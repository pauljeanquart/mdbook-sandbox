<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sandbox</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Custom JS scripts for mdbook-pdf PDF generation -->
        <script type='text/javascript'>
            let markAllContentHasLoadedForPrinting = () =>
                window.setTimeout(
                    () => {
                        let p = document.createElement('div');
                        p.setAttribute('id', 'content-has-all-loaded-for-mdbook-pdf-generation');
                        document.body.appendChild(p);
                    }, 100
                );

            window.addEventListener('load', () => {
                // Expand all the <details> elements for printing.
                r = document.getElementsByTagName('details');
                for (let i of r)
                    i.open = true;

                try {
                    MathJax.Hub.Register.StartupHook('End', markAllContentHasLoadedForPrinting);
                } catch (e) {
                    markAllContentHasLoadedForPrinting();
                }
            });
        </script>
    <div style="display: none"><a href="#summary">summary</a><a href="#introduction">introduction</a><a href="#architecture-network-overview">architecture-network-overview</a><a href="#architecture-traffic-flow">architecture-traffic-flow</a><a href="#binaries-pre-built-binaries">binaries-pre-built-binaries</a><a href="#binaries-building-nym">binaries-building-nym</a><a href="#binaries-init-and-config">binaries-init-and-config</a><a href="#binaries-version-compatiblity">binaries-version-compatiblity</a><a href="#nodes-setup-guides">nodes-setup-guides</a><a href="#nodes-mix-node-setup">nodes-mix-node-setup</a><a href="#nodes-gateway-setup">nodes-gateway-setup</a><a href="#nodes-network-requester-setup">nodes-network-requester-setup</a><a href="#nodes-validator-setup">nodes-validator-setup</a><a href="#nodes-troubleshooting">nodes-troubleshooting</a><a href="#clients-overview">clients-overview</a><a href="#clients-websocket-client">clients-websocket-client</a><a href="#clients-socks5-client">clients-socks5-client</a><a href="#clients-webassembly-client">clients-webassembly-client</a><a href="#clients-addressing-system">clients-addressing-system</a><a href="#sdk-typescript">sdk-typescript</a><a href="#sdk-rust">sdk-rust</a><a href="#wallet-desktop-wallet">wallet-desktop-wallet</a><a href="#wallet-cli-wallet">wallet-cli-wallet</a><a href="#explorers-mixnet-explorer">explorers-mixnet-explorer</a><a href="#nyx-smart-contracts">nyx-smart-contracts</a><a href="#nyx-mixnet-contract">nyx-mixnet-contract</a><a href="#nyx-vesting-contract">nyx-vesting-contract</a><a href="#nyx-rpc-node">nyx-rpc-node</a><a href="#nyx-ledger-live">nyx-ledger-live</a><a href="#coconut">coconut</a><a href="#bandwidth-credentials">bandwidth-credentials</a><a href="#tools-nym-cli">tools-nym-cli</a><a href="#coc">coc</a><a href="#licensing">licensing</a></div>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="SUMMARY.html"></a></li><li class="chapter-item expanded affix "><li class="part-title">Summary</li><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Architecture</li><li class="chapter-item expanded "><a href="architecture/network-overview.html"><strong aria-hidden="true">2.</strong> Network Overview</a></li><li class="chapter-item expanded "><a href="architecture/traffic-flow.html"><strong aria-hidden="true">3.</strong> Mixnet Traffic Flow</a></li><li class="chapter-item expanded affix "><li class="part-title">Binaries</li><li class="chapter-item expanded "><a href="binaries/pre-built-binaries.html"><strong aria-hidden="true">4.</strong> Pre-built Binaries</a></li><li class="chapter-item expanded "><a href="binaries/building-nym.html"><strong aria-hidden="true">5.</strong> Building from Source</a></li><li class="chapter-item expanded "><a href="binaries/init-and-config.html"><strong aria-hidden="true">6.</strong> Binary Initialisation and Configuration</a></li><li class="chapter-item expanded "><a href="binaries/version-compatiblity.html"><strong aria-hidden="true">7.</strong> Version Compatibility Table</a></li><li class="chapter-item expanded affix "><li class="part-title">Nodes</li><li class="chapter-item expanded "><a href="nodes/setup-guides.html"><strong aria-hidden="true">8.</strong> Node Setup Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="nodes/mix-node-setup.html"><strong aria-hidden="true">8.1.</strong> Mix Node</a></li><li class="chapter-item expanded "><a href="nodes/gateway-setup.html"><strong aria-hidden="true">8.2.</strong> Gateway</a></li><li class="chapter-item expanded "><a href="nodes/network-requester-setup.html"><strong aria-hidden="true">8.3.</strong> Network Requester</a></li><li class="chapter-item expanded "><a href="nodes/validator-setup.html"><strong aria-hidden="true">8.4.</strong> Validator</a></li></ol></li><li class="chapter-item expanded "><a href="nodes/troubleshooting.html"><strong aria-hidden="true">9.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Clients</li><li class="chapter-item expanded "><a href="clients/overview.html"><strong aria-hidden="true">10.</strong> Clients Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="clients/websocket-client.html"><strong aria-hidden="true">10.1.</strong> Websocket</a></li><li class="chapter-item expanded "><a href="clients/socks5-client.html"><strong aria-hidden="true">10.2.</strong> Socks5</a></li><li class="chapter-item expanded "><a href="clients/webassembly-client.html"><strong aria-hidden="true">10.3.</strong> Webassembly</a></li></ol></li><li class="chapter-item expanded "><a href="clients/addressing-system.html"><strong aria-hidden="true">11.</strong> Addressing System</a></li><li class="chapter-item expanded affix "><li class="part-title">SDK</li><li class="chapter-item expanded "><a href="sdk/typescript.html"><strong aria-hidden="true">12.</strong> Typescript SDK</a></li><li class="chapter-item expanded "><a href="sdk/rust.html"><strong aria-hidden="true">13.</strong> Rust SDK (coming soon)</a></li><li class="chapter-item expanded affix "><li class="part-title">Wallet</li><li class="chapter-item expanded "><a href="wallet/desktop-wallet.html"><strong aria-hidden="true">14.</strong> Desktop Wallet</a></li><li class="chapter-item expanded "><a href="wallet/cli-wallet.html"><strong aria-hidden="true">15.</strong> CLI Wallet</a></li><li class="chapter-item expanded affix "><li class="part-title">Explorers</li><li class="chapter-item expanded "><a href="explorers/mixnet-explorer.html"><strong aria-hidden="true">16.</strong> Mixnet Explorer</a></li><li class="chapter-item expanded affix "><li class="part-title">Nyx Blockchain</li><li class="chapter-item expanded "><a href="nyx/smart-contracts.html"><strong aria-hidden="true">17.</strong> Smart Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="nyx/mixnet-contract.html"><strong aria-hidden="true">17.1.</strong> Mixnet Contract</a></li><li class="chapter-item expanded "><a href="nyx/vesting-contract.html"><strong aria-hidden="true">17.2.</strong> Vesting Contract</a></li></ol></li><li class="chapter-item expanded "><a href="nyx/rpc-node.html"><strong aria-hidden="true">18.</strong> RPC Nodes</a></li><li class="chapter-item expanded "><a href="nyx/ledger-live.html"><strong aria-hidden="true">19.</strong> Ledger Live Support</a></li><li class="chapter-item expanded affix "><li class="part-title">Coconut</li><li class="chapter-item expanded "><a href="coconut.html"><strong aria-hidden="true">20.</strong> Coconut</a></li><li class="chapter-item expanded "><a href="bandwidth-credentials.html"><strong aria-hidden="true">21.</strong> Bandwidth Credentials</a></li><li class="chapter-item expanded affix "><li class="part-title">Tools</li><li class="chapter-item expanded "><a href="tools/nym-cli.html"><strong aria-hidden="true">22.</strong> NymCLI</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Misc.</li><li class="chapter-item expanded "><a href="coc.html"><strong aria-hidden="true">23.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="licensing.html"><strong aria-hidden="true">24.</strong> Licensing</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sandbox</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div id="summary"></div><h1 id="summary-table-of-contents"><a class="header" href="#summary-table-of-contents">Table of Contents</a></h1>
<p><a href="#summary"></a></p>
<h1 id="summary-summary"><a class="header" href="#summary-summary">Summary</a></h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
</ul>
<h1 id="summary-architecture"><a class="header" href="#summary-architecture">Architecture</a></h1>
<ul>
<li><a href="#architecture-network-overview">Network Overview</a></li>
<li><a href="#architecture-traffic-flow">Mixnet Traffic Flow</a></li>
</ul>
<!-- todo reintroduce this with themed images  -->
<!-- - [Network Rewards](architecture/network-rewards.md) --> 
<h1 id="summary-binaries"><a class="header" href="#summary-binaries">Binaries</a></h1>
<ul>
<li><a href="#binaries-pre-built-binaries">Pre-built Binaries</a></li>
<li><a href="#binaries-building-nym">Building from Source</a></li>
<li><a href="#binaries-init-and-config">Binary Initialisation and Configuration</a></li>
<li><a href="#binaries-version-compatiblity">Version Compatibility Table</a></li>
</ul>
<h1 id="summary-nodes"><a class="header" href="#summary-nodes">Nodes</a></h1>
<ul>
<li><a href="#nodes-setup-guides">Node Setup Guides</a>
<ul>
<li><a href="#nodes-mix-node-setup">Mix Node</a></li>
<li><a href="#nodes-gateway-setup">Gateway</a></li>
<li><a href="#nodes-network-requester-setup">Network Requester</a></li>
<li><a href="#nodes-validator-setup">Validator</a></li>
</ul>
</li>
<li><a href="#nodes-troubleshooting">Troubleshooting</a></li>
</ul>
<h1 id="summary-clients"><a class="header" href="#summary-clients">Clients</a></h1>
<ul>
<li><a href="#clients-overview">Clients Overview</a>
<ul>
<li><a href="#clients-websocket-client">Websocket</a></li>
<li><a href="#clients-socks5-client">Socks5</a></li>
<li><a href="#clients-webassembly-client">Webassembly</a></li>
</ul>
</li>
<li><a href="#clients-addressing-system">Addressing System</a></li>
</ul>
<h1 id="summary-sdk"><a class="header" href="#summary-sdk">SDK</a></h1>
<ul>
<li><a href="#sdk-typescript">Typescript SDK</a></li>
<li><a href="#sdk-rust">Rust SDK (coming soon)</a></li>
</ul>
<h1 id="summary-wallet"><a class="header" href="#summary-wallet">Wallet</a></h1>
<ul>
<li><a href="#wallet-desktop-wallet">Desktop Wallet</a></li>
<li><a href="#wallet-cli-wallet">CLI Wallet</a></li>
</ul>
<h1 id="summary-explorers"><a class="header" href="#summary-explorers">Explorers</a></h1>
<ul>
<li><a href="#explorers-mixnet-explorer">Mixnet Explorer</a></li>
</ul>
<h1 id="summary-nyx-blockchain"><a class="header" href="#summary-nyx-blockchain">Nyx Blockchain</a></h1>
<!-- - [Interacting with Nyx Chain and Smart Contracts](nyx/interacting-with-chain.md) -->
<ul>
<li><a href="#nyx-smart-contracts">Smart Contracts</a>
<ul>
<li><a href="#nyx-mixnet-contract">Mixnet Contract</a></li>
<li><a href="#nyx-vesting-contract">Vesting Contract</a></li>
</ul>
</li>
<li><a href="#nyx-rpc-node">RPC Nodes</a></li>
<li><a href="#nyx-ledger-live">Ledger Live Support</a></li>
</ul>
<h1 id="summary-coconut"><a class="header" href="#summary-coconut">Coconut</a></h1>
<ul>
<li><a href="#coconut">Coconut</a></li>
<li><a href="#bandwidth-credentials">Bandwidth Credentials</a></li>
</ul>
<h1 id="summary-tools"><a class="header" href="#summary-tools">Tools</a></h1>
<ul>
<li><a href="#tools-nym-cli">NymCLI</a></li>
</ul>
<hr />
<h1 id="summary-misc"><a class="header" href="#summary-misc">Misc.</a></h1>
<ul>
<li><a href="#coc">Code of Conduct</a></li>
<li><a href="#licensing">Licensing</a></li>
</ul>
<hr />
<div style="break-before: page; page-break-before: always;"></div><div id="introduction"></div><h1 id="introduction-introduction"><a class="header" href="#introduction-introduction">Introduction</a></h1>
<ul>
<li><a href="#licensing">Licensing</a></li>
</ul>
<p>This is Nym's technical documentation, containing information and setup guides about the various pieces of Nym software such as different mixnet infrastructure nodes, application clients, and existing applications like the desktop wallet and mixnet explorer. </p>
<p>If you are new to Nym and want to learn about the mixnet, how to integrate with the network, developer tutorials and quickstart guides, check out the <a href="https://nymtech.net/developers/">Developer Portal</a>. </p>
<p>If you are looking for information on grants and beta-release Nym apps, check out the <a href="https://shipyard.nymtech.net">Shipyard</a> site.</p>
<h2 id="introduction-popular-pages"><a class="header" href="#introduction-popular-pages">Popular pages</a></h2>
<p><strong>Network Architecture:</strong></p>
<ul>
<li><a href="#architecture-network-overview">Network Overview</a></li>
<li><a href="#architecture-traffic-flow">Mixnet Traffic Flow</a></li>
</ul>
<!-- * [Network Rewards](./architecture/network-rewards.md) -->
<p><strong>Node setup and usage guides:</strong></p>
<ul>
<li><a href="#nodes-mix-node-setup">Mix nodes</a> </li>
<li><a href="#nodes-gateway-setup">Gateways</a> </li>
<li><a href="#nodes-network-requester-setup">Network requesters</a> </li>
<li><a href="#nodes-validator-setup">Validators</a> </li>
</ul>
<p><strong>Client setup and usage guides:</strong></p>
<ul>
<li><a href="#clients-websocket-client">Websocket client</a></li>
<li><a href="#clients-socks5-client">Socks5 client</a></li>
<li><a href="#clients-webassembly-client">Webassembly client</a></li>
</ul>
<p><strong>SDK guides:</strong></p>
<ul>
<li><a href="#sdk-typescript">Typescript SDK</a></li>
<li>(Coming soon) Rust SDK</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><div id="architecture-network-overview"></div><h1 id="architecture-network-overview-network-overview"><a class="header" href="#architecture-network-overview-network-overview">Network Overview</a></h1>
<p>Nym is a privacy platform. It provides strong network-level privacy against sophisticated end-to-end attackers, and anonymous access control using blinded, re-randomizable, decentralized credentials. Our goal is to allow developers to build new applications, or upgrade existing apps, with privacy features unavailable in other systems.</p>
<p>The Nym platform knits together several privacy technologies, integrating them into a system of cooperating networked nodes.</p>
<p>At a high level, our technologies include:</p>
<ul>
<li>a <strong>mixnet</strong>, which encrypts and mixes Sphinx packet traffic so that it cannot be determined who is communicating with whom. Our mixnet is based on a modified version of the <strong>Loopix</strong> design.</li>
<li>a privacy enhancing signature scheme called <strong>Coconut</strong>. Coconut allows a shift in thinking about resource access control, from an identity-based paradigm based on <em>who you are</em> to a privacy-preserving paradigm based on <em>right to use</em>.</li>
<li><strong>Sphinx</strong>, a way of transmitting armoured, layer-encrypted information packets which are indistinguishable from each other at a binary level.</li>
<li>the <strong>Nyx</strong> blockchain, a general-purpose CosmWasm-enabled smart contract platform, and the home of the smart contracts which keep track of the mixnet. </li>
</ul>
<p>The most important thing to note is that these technologies ensure privacy at two different levels of the stack: <strong>network data transmission</strong>, and <strong>transactions</strong>.</p>
<p>Here's an overview diagram of the different types of nodes making up the network: </p>
<p><img src="architecture/../images/nym-platform-dark.png" alt="Nym Platform" /></p>
<p>Developers can think of the network as being comprised of <strong>infrastructure nodes</strong> and <strong>clients</strong> for interacting with this infrastructure via <strong>P</strong>rivacy-<strong>e</strong>nhanced <strong>app</strong>lications (PEApps). </p>
<h2 id="architecture-network-overview-mixnet-infrastructure"><a class="header" href="#architecture-network-overview-mixnet-infrastructure">Mixnet Infrastructure</a></h2>
<p>The mixnet - the different pieces of software that your traffic will pass through when using an privacy-enhanced app (PEApp) - is made up of several different types of nodes:</p>
<ul>
<li>
<p><strong>Mix Nodes</strong> provide network security for network content <em>and</em> metadata, making it impossible to see who is communicating with who, by performing packet-mixing on traffic travelling through the network. </p>
</li>
<li>
<p><strong>Gateways</strong> act as message storage for clients which may go offline and come back online again, and defend against denial of service attacks. The default gateway implementation included in the Nym platform code holds packets for later retrieval. For many applications (such as simple chat), this is usable out of the box, as it provides a place that potentially offline clients can retrieve packets from. The access token allows clients to pull messages from the gateway node.</p>
</li>
<li>
<p><strong>Services</strong> are applications that communicate with nym clients, listening and sending traffic to the mixnet. This is an umbrella term for a variety of different pieces of code, such as the <a href="#nodes-network-requester-setup">network requester</a> binary.</p>
</li>
<li>
<p><strong>Nyx Blockchain Validators</strong> secure the network with proof-of-stake Sybil defenses, determine which nodes are included within the network, and work together to create Coconut threshold credentials which provide anonymous access to data and resources. They also produce blocks and secure the Nyx Blockchain. Initially, this chain was used only to house the CosmWasm smart contracts keeping track of Nym's network topology, token vesting contracts, and the <code>NYM</code> token itself. In recent months, we've decided to expand the role of Nyx and instead expand its role by making it an open smart contract platform for anyone to upload CosmWasm smart contracts to. Validators also provide privacy-enhanced credentials based on the testimony of a set of decentralized, blockchain-based issuing authorities. Nym validators use the <a href="https://arxiv.org/abs/1802.07344">Coconut</a> <a href="https://en.wikipedia.org/wiki/Digital_signature">signature scheme</a> to issue credentials. This allows privacy apps to generate anonymous resource claims through decentralised authorities, then use them with Service Providers.</p>
</li>
</ul>
<h2 id="architecture-network-overview-privacy-enhanced-applications-peapps"><a class="header" href="#architecture-network-overview-privacy-enhanced-applications-peapps">Privacy-enhanced applications (PEApps)</a></h2>
<p>PEApps use a Nym client to connect to the network in order to get the available Network Topology for traffic routing, and send/receive packets to other users and services. Clients, in order to send traffic through the mixnet, connect to gateways. Since applications may go online and offline, a client's gateway provides a sort of mailbox where apps can receive their messages.</p>
<p>Nym clients connect to gateways. Messages are automatically piped to connected clients and deleted from the gateway's disk storage. If a client is offline when a message arrives, it will be stored for later retrieval. When the client connects, all messages will be delivered, and deleted from the gateway's disk. </p>
<p>When it starts up, a client registers itself with a gateway, and the gateway returns an access token. The access token plus the gateway's IP can then be used as a form of addressing for delivering packets.</p>
<p>There are two basic kinds of privacy enhanced applications:</p>
<ul>
<li><strong>Client apps</strong> running on mobile or desktop devices. These will typically expose a user interface (UI) to a human user. These might be existing apps such as crypto wallets that communicate with Nym via our SOCKS5 proxy, or entirely new apps.</li>
<li><strong>Service Providers</strong>, which will usually run on a server, and take actions on behalf of users without knowing who they are.</li>
</ul>
<p>Service Providers (SPs) may interact with external systems on behalf of a user. For example, an SP might submit a Bitcoin, Ethereum or Cosmos transaction, proxy a network request, talk to a chat server, or provide anonymous access to a medical system such as a <a href="https://constructiveproof.com/posts/2020-04-24-coronavirus-tracking-app-privacy/">privacy-friendly coronavirus tracker</a>.</p>
<p>There is also a special category of Service Provider, namely SPs that do not visibly interact with any external systems. You might think of these as crypto-utopiapps: they're doing something, but it's not possible from outside to say with any certainty what their function is, or who is interacting with them.</p>
<p>All apps talk with gateways using Sphinx packets and a small set of simple control messages. These messages are sent to gateways over websockets. Each app client has a long-lived relationship with its gateway; Nym defines messages for clients registering and authenticating with gateways, as well as sending encrypted Sphinx packets. </p>
<div style="break-before: page; page-break-before: always;"></div><div id="architecture-traffic-flow"></div><h1 id="architecture-traffic-flow-mixnet-traffic-flow"><a class="header" href="#architecture-traffic-flow-mixnet-traffic-flow">Mixnet Traffic Flow</a></h1>
<h2 id="architecture-traffic-flow-technical-motivations"><a class="header" href="#architecture-traffic-flow-technical-motivations">Technical Motivations</a></h2>
<p>When you send data across the internet, it can be recorded by a wide range of observers: your ISP, internet infrastructure providers, large tech companies, and governments.</p>
<p>Even if the content of a network request is encrypted, observers can still see that data was transmitted, its size, frequency of transmission, and gather metadata from unencrypted parts of the data (such as IP routing information). Adversaries may then combine all the leaked information to probabilistically de-anonymize users.</p>
<p>The Nym mixnet provides very strong security guarantees against this sort of surveillance. It <em>packetizes</em> and <em>mixes</em> together IP traffic from many users inside the <em>mixnet</em>. </p>
<blockquote>
<p>If you're into comparisons, the Nym mixnet is conceptually similar to other systems such as Tor, but provides improved protections against end-to-end timing attacks which can de-anonymize users. When Tor was first fielded, in 2002, those kinds of attacks were regarded as science fiction. But the future is now here.</p>
</blockquote>
<h2 id="architecture-traffic-flow-mixnet-traffic-flow-1"><a class="header" href="#architecture-traffic-flow-mixnet-traffic-flow-1">Mixnet Traffic Flow</a></h2>
<p>The Nym mixnet re-orders encrypted, indistinguishable <a href="https://cypherpunks.ca/~iang/pubs/Sphinx_Oakland09.pdf">Sphinx</a> packets as they travel through the gateways and mix nodes. </p>
<p>Traffic to send through the mixnet is broken up into uniformly-sized packets, encrypted in the Sphinx packet format according to the route the packet will take, and sent through the mixnet to be mixed among other real traffic and fake - but identical - 'dummy traffic'. </p>
<p>At each 'hop' (i.e. as a packet is forwarded from one node in the sequence to another) a layer of decryption is removed from the Sphinx packet, revealing the address of the next hop, and another Sphinx packet. The packet is then held by the node for a variable amount of time, before being forwarded on to the next node in the route. </p>
<p>Traffic always travels through the nodes of the mixnet like such:</p>
<pre><code>                                                                               
       +----------+              +----------+             +----------+                 
       | Mix Node |&lt;-----------&gt; | Mix Node |&lt;-----------&gt;| Mix Node |                 
       | Layer 1  |              | Layer 2  |             | Layer 3  |                 
       +----------+              +----------+             +----------+                 
            ^                                                   ^                      
            |                                                   |                      
            |                                                   |                      
            v                                                   v                      
    +--------------+                                   +-----------------+        
    | Your gateway |                                   | Service gateway |        
    +--------------+                                   +-----------------+        
            ^                                                    ^                     
            |                                                    |                     
            |                                                    |                     
            v                                                    v                     
  +-------------------+                                +-------------------+           
  | +---------------+ |                                | +---------------+ |           
  | |  Nym client   | |                                | |  Nym Client   | |           
  | +---------------+ |                                | +---------------+ |           
  |         ^         |                                |         ^         |           
  |         |         |                                |         |         |           
  |         |         |                                |         |         |           
  |         v         |                                |         v         |           
  | +---------------+ |                                | +---------------+ |           
  | | Your app code | |                                | | Service Code  | |           
  | +---------------+ |                                | +---------------+ |           
  +-------------------+                                +-------------------+           
   Your Local Machine**                               Service Provider Machine**        


** note that depending on the technical setup, the Nym client running on these machines may
be either a seperate process or embedded in the same process as the app code via one of our SDKs. 

</code></pre>
<p>From your Nym client, your encrypted traffic is sent to:</p>
<ul>
<li>the gateway your client has registered with,</li>
<li>a mix node on layer 1 of the Mixnet, </li>
<li>a mix node on layer 2 of the Mixnet,</li>
<li>a mix node on layer 3 of the Mixnet, </li>
<li>the recipient's gateway, which forwards it finally to...</li>
<li>the recipient's Nym client, which communicates with an application.</li>
</ul>
<blockquote>
<p>If the recipient's Nym client is offline at the time then the packets will be held by the Gateway their Nym client has registered with until they come online.</p>
</blockquote>
<p>Whatever is on the 'other side' of the mixnet from your client, all traffic will travel this way through the mixnet. If you are sending traffic to a service external to Nym (such as a chat application's servers) then your traffic will be sent from the recieving Nym client to an application that will proxy it 'out' of the mixnet to these servers, shielding your metadata from them. P2P (peer-to-peer) applications, unlike the majority of apps, might want to keep all of their traffic entirely 'within' the mixnet, as they don't have to necessarily make outbound network requests to application servers. They would simply have their local application code communicate with their Nym clients, and not forward traffic anywhere 'outside' of the mixnet. </p>
<h2 id="architecture-traffic-flow-acks--package-retransmission"><a class="header" href="#architecture-traffic-flow-acks--package-retransmission">Acks &amp; Package Retransmission</a></h2>
<p>Whenever a hop is completed, the recieving node will send back an acknowledgement ('ack') so that the sending node knows that the packet was recieved. If it does not recieve an ack after sending, it will resend the packet, as it assumes that the packet was dropped for some reason. This is done under the hood by the binaries themselves, and is never something that developers and node operators have to worry about dealing with themselves. </p>
<p>Packet retransmission means that if a client sends 100 packets to a gateway, but only receives an acknowledgement ('ack') for 95 of them, it will resend those 5 packets to the gateway again, to make sure that all packets are received. All nodes in the mixnet support packet retransmission. </p>
<pre><code>                                                                                                               
  +-------------------+                  +-------------------+                                                
  | +---------------+ |                  |                   | Packet lost in transmission - no ack recieved! 
  | |  Nym client   | |                  |                   |-----------------?                              
  | +-------^-------+ |Send 100 packets  |                   |                                                     
  |         |         |-----------------&gt;|   Gateway your    |  Resend packet    +------------------+     etc...  
  |         |         |                  |   client is       |------------------&gt;|                  |------------------&gt; 
  |         |         |                  |   connected to    |                   | Mix node layer 1 |          
  |         v         | Send 100 acks    |                   |&lt;------------------|                  |         
  | +---------------+ |&lt;-----------------|                   |   Send ack        +------------------+        
  | | Your app code | |                  |                   |                                              
  | +---------------+ |                  |                   |                                             
  +-------------------+                  +-------------------+                                            
   Your Local Machine                                                                                    

</code></pre>
<h2 id="architecture-traffic-flow-private-replies-using-surbs"><a class="header" href="#architecture-traffic-flow-private-replies-using-surbs">Private Replies using SURBs</a></h2>
<p>SURBs ('Single Use Reply Blocks') allow apps to reply to other apps anonymously.</p>
<p>It will often be the case that a client app wants to interact with a service of some kind, or a P2P application on someone else's machine. It sort of defeats the purpose of the whole system if your client app needs to reveal its own gateway public key and client public key in order to get a response from the service/app. </p>
<p>Luckily, SURBs allow for anonymous replies. A SURB is a layer encrypted set of Sphinx headers detailing a reply path ending in the original app's address. SURBs are encrypted by the client, so the recieving service/app can attach its response and send back the resulting Sphinx packet, but it <strong>never has sight of who it is replying to</strong>.</p>
<p>MultiSURBs were implemented in <code>v1.1.4</code>. Clients, when sending a message to another client, attach a bundle of SURBs which can be used by the receiver to construct large anonymous replies, such as files. If a reply is too large still (i.e. it would use more SURBs than sent with the original message), the receiver will use a SURB to ask the sender for more SURBs. </p>
<p>What this means in practice is that files can now be sent via anonymous replies!</p>
<div style="break-before: page; page-break-before: always;"></div><div id="binaries-pre-built-binaries"></div><h1 id="binaries-pre-built-binaries-pre-built-binaries"><a class="header" href="#binaries-pre-built-binaries-pre-built-binaries">Pre-built Binaries</a></h1>
<p>The <a href="https://github.com/nymtech/nym/releases">Github releases page</a> has pre-built binaries which should work on Ubuntu 20.04 and other Debian-based systems, but at this stage cannot be guaranteed to work everywhere.</p>
<p>If the pre-built binaries don't work or are unavailable for your system, you will need to build the platform yourself.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="binaries-building-nym"></div><h1 id="binaries-building-nym-building-from-source"><a class="header" href="#binaries-building-nym-building-from-source">Building from Source</a></h1>
<blockquote>
<p>Nym runs on Mac OS X, Linux, and Windows. All nodes <strong>except the Desktop Wallet and NymConnect</strong> on Windows should be considered experimental - it works fine if you're an app developer but isn't recommended for running nodes.</p>
</blockquote>
<h2 id="binaries-building-nym-building-nym"><a class="header" href="#binaries-building-nym-building-nym">Building Nym</a></h2>
<p>Nym has two main codebases:</p>
<ul>
<li>the <a href="https://github.com/nymtech/nym">Nym platform</a>, written in Rust. This contains all of our code <em>except</em> for the validators.</li>
<li>the <a href="https://github.com/nymtech/nyxd">Nym validators</a>, written in Go.</li>
</ul>
<blockquote>
<p>This page details how to build the main Nym platform code. <strong>If you want to build and run a validator, <a href="#nodes-validator-setup">go here</a> instead.</strong></p>
</blockquote>
<h2 id="binaries-building-nym-prerequisites"><a class="header" href="#binaries-building-nym-prerequisites">Prerequisites</a></h2>
<ul>
<li>(Debian/Ubuntu) <code>pkg-config</code>, <code>build-essential</code>, <code>libssl-dev</code>, <code>curl</code>, <code>jq</code>, <code>git</code></li>
</ul>
<pre><code>sudo apt update
sudo apt install pkg-config build-essential libssl-dev curl jq git
</code></pre>
<ul>
<li>(Arch/Manjaro) <code>base-devel</code></li>
</ul>
<pre><code>pacman -S base-devel
</code></pre>
<ul>
<li>(Mac OS X) <code>pkg-config</code> , <code>brew</code>, <code>openss1</code>, <code>protobuf</code>, <code>curl</code>, <code>git</code></li>
</ul>
<p><code>curl</code> - required for transferring data over various protocols. It's used for downloading files or send requests to a server.</p>
<p><code>openssl</code> - used for encryption, decryption, and secure communication over the internet.</p>
<p><code>protobuf</code> - for serialising and deserialising structured data in a fast and efficient way.</p>
<p>Running the following the script installs Homebrew and the above dependencies:</p>
<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
</code></pre>
<ul>
<li><code>Rust &amp; cargo &gt;= {{minimum_rust_version}}</code></li>
</ul>
<p>We recommend using the <a href="https://www.rust-lang.org/tools/install">Rust shell script installer</a>. Installing cargo from your package manager (e.g. <code>apt</code>) is not recommended as the packaged versions are usually too old.</p>
<p>If you really don't want to use the shell script installer, the <a href="https://forge.rust-lang.org/infra/other-installation-methods.html">Rust installation docs</a> contain instructions for many platforms.</p>
<h2 id="binaries-building-nym-download-and-build-nym-binaries"><a class="header" href="#binaries-building-nym-download-and-build-nym-binaries">Download and build Nym binaries</a></h2>
<p>The following commands will compile binaries into the <code>nym/target/release</code> directory:</p>
<pre><code>rustup update
git clone https://github.com/nymtech/nym.git
cd nym

git reset --hard # in case you made any changes on your branch
git pull # in case you've checked it out before

git checkout release/{{platform_release_version}} # checkout to the latest release branch: `develop` will most likely be incompatible with deployed public networks

cargo build --release # build your binaries with **mainnet** configuration
NETWORK=sandbox cargo build --release # build your binaries with **sandbox** configuration
</code></pre>
<p>Quite a bit of stuff gets built. The key working parts are:</p>
<ul>
<li><a href="#nodes-mix-node-setup">mix node</a>: <code>nym-mixnode</code></li>
<li><a href="#nodes-gateway-setup">gateway node</a>: <code>nym-gateway</code></li>
<li><a href="#clients-websocket-client">websocket client</a>: <code>nym-client</code></li>
<li><a href="#clients-socks5-client">socks5 client</a>: <code>nym-socks5-client</code></li>
<li><a href="#nodes-network-requester-setup">network requester</a>: <code>nym-network-requester</code></li>
<li><a href="#tools-nym-cli">nym-cli tool</a>: <code>nym-cli</code></li>
</ul>
<p>The repository also contains Typescript applications which aren't built in this process. These can be built by following the instructions on their respective docs pages.</p>
<ul>
<li><a href="#wallet-desktop-wallet">Nym Wallet</a> </li>
<li><a href="https://nymtech.net/developers/quickstart/nymconnect-gui.html">Nym Connect</a></li>
<li><a href="#explorers-mixnet-explorer">Network Explorer UI</a> </li>
</ul>
<blockquote>
<p>You cannot build from GitHub's .zip or .tar.gz archive files on the releases page - the Nym build scripts automatically include the current git commit hash in the built binary during compilation, so the build will fail if you use the archive code (which isn't a Git repository). Check the code out from github using <code>git clone</code> instead. </p>
</blockquote>
<blockquote>
<p>You cannot build from GitHub's .zip or .tar.gz archive files on the releases page - the Nym build scripts automatically include the current git commit hash in the built binary during compilation, so the build will fail if you use the archive code (which isn't a Git repository). Check the code out from github using <code>git clone</code> instead.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><div id="binaries-init-and-config"></div><h1 id="binaries-init-and-config-binary-initialisation-and-configuration"><a class="header" href="#binaries-init-and-config-binary-initialisation-and-configuration">Binary Initialisation and Configuration</a></h1>
<p>All Nym binaries must first be initialised with <code>init</code> before being <code>run</code>. </p>
<p>The <code>init</code> command is usually where you pass flags specifying configuration arguments such as the gateway you wish to communicate with, the ports you wish your binary to listen on, etc. </p>
<p>The <code>init</code> command will also create the necessary keypairs and configuration files at <code>~/.nym/&lt;BINARY_TYPE&gt;/&lt;BINARY_ID&gt;/</code> if these files do not already exist. <strong>It will not overwrite existing keypairs if they are present.</strong> </p>
<p>You can reconfigure your binaries at any time by editing the config file located at <code>~/.nym/&lt;BINARY_TYPE&gt;/&lt;BINARY_ID&gt;/config/config.toml</code> and restarting the binary process. </p>
<p>Once you have run <code>init</code>, you can start your binary with the <code>run</code> command, usually only accompanied by the <code>id</code> of the binary that you specified. </p>
<p>This <code>id</code> is <strong>never</strong> transmitted over the network, and is used to select which local config and key files to use for startup. </p>
<div style="break-before: page; page-break-before: always;"></div><div id="binaries-version-compatiblity"></div><h1 id="binaries-version-compatiblity-version-compatibility-table"><a class="header" href="#binaries-version-compatiblity-version-compatibility-table">Version Compatibility Table</a></h1>
<p>There are numerous components to Nym which are released independently of one another aside from when breaking changes occur in the <a href="https://github.com/nymtech/nym/">core platform code</a> - mix nodes, gateways, network requesters, and clients.</p>
<p>Whilst in general it recommended to be running the most recent version of any software, if you cannot do that for whatever reason this table will tell you which versions of different components are mutually compatible with which platform code releases.</p>
<div class="table-wrapper"><table><thead><tr><th>Core Platform</th><th>SDK</th><th>Wallet</th><th>NymConnect</th><th>Network Explorer</th><th>Mixnet contract</th><th>Vesting contract</th></tr></thead><tbody>
<tr><td>1.1.13 - 1.1.14*</td><td>1.1.7</td><td>1.1.12 - 1.1.13</td><td>1.1.12 - 1.1.13</td><td>1.1.2</td><td>1.2.0 - 1.3.0</td><td>1.2.0 - 1.3.0</td></tr>
<tr><td>1.1.1 - 1.1.12</td><td>1.1.4 - 1.1.7</td><td>1.1.0 - 1.1.12</td><td>1.1.1 - 1.1.12</td><td>1.1.0 - 1.1.2</td><td>1.1.0 - 1.1.3</td><td>1.1.0  - 1.1.3</td></tr>
<tr><td>1.1.0 - 1.1.1</td><td>1.1.4</td><td>1.1.0</td><td>1.1.0 - 1.1.1</td><td>1.1.0</td><td>1.1.0</td><td>1.1.0</td></tr>
<tr><td>1.1.0</td><td>x</td><td>1.1.0</td><td>1.1.0</td><td>1.1.0</td><td>1.1.0</td><td>1.1.0</td></tr>
</tbody></table>
</div>
<p><code>*</code> the <code>nym-mixnode</code> binary is currently one point ahead of the main platform release version </p>
<blockquote>
<p>There are seperate changelogs for <a href="https://github.com/nymtech/nym/blob/release/%7B%7Bplatform_release_version%7D%7D/nym-connect/CHANGELOG.md"><code>NymConnect</code></a> and the <a href="https://github.com/nymtech/nym/blob/release/%7B%7Bplatform_release_version%7D%7D/nym-wallet/CHANGELOG.md"><code>Desktop Wallet</code></a>. The changelog referenced below is for the core platform code. </p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>Platform release changelog</th></tr></thead><tbody>
<tr><td>1.1.14 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.14/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.13 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.13/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.12 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.12/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.11 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.11/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.10 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.10/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.9 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.9/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.8 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.8/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.7 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.7/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.6 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.6/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.5 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.5/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.4 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.4/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.3 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.3/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.2 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.2/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.1 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.1/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.1.0 (<a href="https://github.com/nymtech/nym/blob/release/v1.1.0/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.0.2 (<a href="https://github.com/nymtech/nym/blob/nym-binaries-1.0.2/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.0.1 (<a href="https://github.com/nymtech/nym/blob/nym-binaries-1.0.1/CHANGELOG.md">CHANGELOG</a>)</td></tr>
<tr><td>1.0.0 (<a href="https://github.com/nymtech/nym/blob/nym-binaries-1.0.0/CHANGELOG.md">CHANGELOG</a>)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><div id="nodes-setup-guides"></div><h1 id="nodes-setup-guides-node-setup-guides"><a class="header" href="#nodes-setup-guides-node-setup-guides">Node Setup Guides</a></h1>
<p>This section contains setup guides for the following node types:</p>
<ul>
<li><a href="#nodes-mix-node-setup">Mix node</a></li>
<li><a href="#nodes-gateway-setup">Gateway</a></li>
<li><a href="#nodes-network-requester-setup">Network Requester</a></li>
<li><a href="#nodes-validator-setup">Validator</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><div id="nodes-mix-node-setup"></div><h1 id="nodes-mix-node-setup-mix-nodes"><a class="header" href="#nodes-mix-node-setup-mix-nodes">Mix Nodes</a></h1>
<blockquote>
<p>The Nym mix node binary was built in the <a href="#binaries-building-nym">building nym</a> section. If you haven't yet built Nym and want to run the code, go there first.</p>
</blockquote>
<pre><code class="language-admonish info">The `nym-mixnode` binary is currently one point version ahead of the rest of the platform binaries due to a patch applied between releases. 
</code></pre>
<h2 id="nodes-mix-node-setup-preliminary-steps"><a class="header" href="#nodes-mix-node-setup-preliminary-steps">Preliminary steps</a></h2>
<p>There are a couple of steps that need completing before starting to set up your mix node:</p>
<ul>
<li>preparing your wallet</li>
<li>requisitioning a VPS (Virtual Private Server)</li>
</ul>
<h3 id="nodes-mix-node-setup-wallet-preparation"><a class="header" href="#nodes-mix-node-setup-wallet-preparation">Wallet preparation</a></h3>
<h4 id="nodes-mix-node-setup-mainnet"><a class="header" href="#nodes-mix-node-setup-mainnet">Mainnet</a></h4>
<p>Before you initialise and run your mixnode, head to our <a href="https://nymtech.net/download/">website</a> and download the Nym wallet for your operating system. If pre-compiled binaries for your operating system aren't availiable, you can build the wallet yourself with instructions <a href="#wallet-desktop-wallet">here</a>.</p>
<p>If you don't already have one, please create a Nym address using the wallet, and fund it with tokens. The minimum amount required to bond a mixnode is 100 <code>NYM</code>, but make sure you have a bit more to account for gas costs.</p>
<p><code>NYM</code> can be purchased via Bity from the wallet itself, and is currently present on several exchanges. Head to our <a href="https://t.me/nymchan">telegram channels</a> to find out where to get <code>NYM</code> tokens.</p>
<blockquote>
<p>Remember that you can <strong>only</strong> use Cosmos <code>NYM</code> tokens to bond your mixnode. You <strong>cannot</strong> use ERC20 representations of <code>NYM</code> to run a node.</p>
</blockquote>
<h4 id="nodes-mix-node-setup-sandbox-testnet"><a class="header" href="#nodes-mix-node-setup-sandbox-testnet">Sandbox testnet</a></h4>
<p>Make sure to download a wallet and create an account as outlined above. Then head to our <a href="https://faucet.nymtech.net/">token faucet</a> and get some tokens to use to bond it.</p>
<h3 id="nodes-mix-node-setup-vps-hardware-specs"><a class="header" href="#nodes-mix-node-setup-vps-hardware-specs">VPS Hardware Specs</a></h3>
<p>You will need to rent a VPS to run your mix node on. One key reason for this is that your node <strong>must be able to send TCP data using both IPv4 and IPv6</strong> (as other nodes you talk to may use either protocol).</p>
<p>For the moment, we haven't put a great amount of effort into optimizing concurrency to increase throughput, so don't bother provisioning a beastly server with multiple cores. This will change when we get a chance to start doing performance optimizations in a more serious way. Sphinx packet decryption is CPU-bound, so once we optimise, more fast cores will be better.</p>
<p>For now, see the below rough specs:</p>
<ul>
<li>Processors: 2 cores are fine. Get the fastest CPUs you can afford.</li>
<li>RAM: Memory requirements are very low - typically a mix node may use only a few hundred MB of RAM.</li>
<li>Disks: The mixnodes require no disk space beyond a few bytes for the configuration files.</li>
</ul>
<h2 id="nodes-mix-node-setup-mix-node-setup"><a class="header" href="#nodes-mix-node-setup-mix-node-setup">Mix node setup</a></h2>
<p>Now that you have built the codebase, set up your wallet, and have a VPS with the <code>nym-mixnode</code> binary, you can set up your mix node with the instructions below.</p>
<h3 id="nodes-mix-node-setup-viewing-command-help"><a class="header" href="#nodes-mix-node-setup-viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-mixnode --help
</code></pre>
<p>Which should return a list of all avaliable commands.</p>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (mixnode - version {{mix_node_release_version}})


nym-mixnode {{mix_node_release_version}}
Nymtech
Implementation of a Loopix-based Mixnode

USAGE:
    nym-mixnode [OPTIONS] &lt;SUBCOMMAND&gt;

OPTIONS:
        --config-env-file &lt;CONFIG_ENV_FILE&gt;
            Path pointing to an env file that configures the mixnode

    -h, --help
            Print help information

    -V, --version
            Print version information

SUBCOMMANDS:
    completions          Generate shell completions
    describe             Describe your mixnode and tell people why they should delegate state to you
    generate-fig-spec    Generate Fig specification
    help                 Print this message or the help of the given subcommand(s)
    init                 Initialise the mixnode
    node-details         Show details of this mixnode
    run                  Starts the mixnode
    sign                 Sign text to prove ownership of this mixnode
    upgrade              Try to upgrade the mixnode

    nym-mixnode {{mix_node_release_version}}
    Nymtech
```
</code></pre>
<p>You can also check the various arguments required for individual commands with:</p>
<pre><code>./nym-mixnode &lt;command&gt; --help
</code></pre>
<h3 id="nodes-mix-node-setup-initialising-your-mix-node"><a class="header" href="#nodes-mix-node-setup-initialising-your-mix-node">Initialising your mix node</a></h3>
<p>To check available configuration options for initializing your node use:</p>
<pre><code>./nym-mixnode init --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (mixnode - version {{mix_node_release_version}})


nym-mixnode-init
Initialise the mixnode

USAGE:
    nym-mixnode init [OPTIONS] --id &lt;ID&gt; --host &lt;HOST&gt; --wallet-address &lt;WALLET_ADDRESS&gt;

OPTIONS:
        --announce-host &lt;ANNOUNCE_HOST&gt;
            The custom host that will be reported to the directory server

    -h, --help
            Print help information

        --host &lt;HOST&gt;
            The host on which the mixnode will be running

        --http-api-port &lt;HTTP_API_PORT&gt;
            The port on which the mixnode will be listening for http requests

        --id &lt;ID&gt;
            Id of the mixnode we want to create config for

        --mix-port &lt;MIX_PORT&gt;
            The port on which the mixnode will be listening for mix packets

        --validators &lt;VALIDATORS&gt;
            Comma separated list of rest endpoints of the validators

        --verloc-port &lt;VERLOC_PORT&gt;
            The port on which the mixnode will be listening for verloc packets

        --wallet-address &lt;WALLET_ADDRESS&gt;
            The wallet address you will use to bond this mixnode, e.g.
            nymt1z9egw0knv47nmur0p8vk4rcx59h9gg4zuxrrr9
```
</code></pre>
<p>Initalise your mixnode with the following command, replacing the value of <code>--id</code> with the moniker you wish to give your mixnode, and the <code>--wallet-address</code> with the Nym address you created earlier. Your <code>--host</code> must be publicly routable on the internet in order to mix packets, and can be either an Ipv4 or IPv6 address. The <code>$(curl ifconfig.me)</code> command returns your IP automatically using an external service. If you enter your IP address manually, enter it <strong>without</strong> any port information.</p>
<pre><code>./nym-mixnode init --id winston-smithnode --host $(curl ifconfig.me) --wallet-address &lt;wallet-address&gt;
</code></pre>
<blockquote>
<p>The <code>init</code> command will refuse to destroy existing mix node keys.</p>
</blockquote>
<p>During the <code>init</code> process you will have the option to change the <code>http_api</code>, <code>verloc</code> and <code>mixnode</code> ports from their default settings. If you wish to change these in the future you can edit their values in the <code>config.toml</code> file created by the initialization process, which is located at <code>~/.nym/mixnodes/&lt;your-id&gt;/</code>.</p>
<h3 id="nodes-mix-node-setup-bonding-your-mix-node"><a class="header" href="#nodes-mix-node-setup-bonding-your-mix-node">Bonding your mix node</a></h3>
<pre><code class="language-admonish caution">From `v1.1.3`, if you unbond your mixnode that means you are leaving the mixnet and you will lose all your delegations (permanently). You can join again with the same identity key, however, you will start with **no delegations**.
</code></pre>
<h4 id="nodes-mix-node-setup-bond-via-the-desktop-wallet-recommended"><a class="header" href="#nodes-mix-node-setup-bond-via-the-desktop-wallet-recommended">Bond via the Desktop wallet (recommended)</a></h4>
<p>You can bond your mix node via the Desktop wallet.</p>
<ul>
<li>
<p>Open your wallet, and head to the <code>Bond</code> page, then select the node type and input your node details. Press <code>continue</code> </p>
</li>
<li>
<p>You will be asked to run a the <code>sign</code> command with your <code>gateway</code> - copy and paste the long signature as the value of <code>--contract-msg</code> and run it. It will look something like this: </p>
</li>
</ul>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
./nym-mixnode sign --id upgrade_test --contract-msg 5XrvVEMzRJk2AcT2h1o6ErZNb8z1ZzD3h7teipBW3NUtrtYq7vu4DRMgzZRTPVPnyr2YWCxpmKCMFaEXvksnJ
4jt7np3NMLxsLMrFjEBhh67Crtjy4868vCzAivUqzdc365RiqxQQKtv4r9eTk9mTbE9JY8U3TxzKJCSGcBqbrb9JX3HrZVWm6tqbUYbsnku9pqnfeyeUiaYKY44Lm72TYrkZfRrMAZLMATiXT1ntmiKqT37HzRxNZjiH8qHeQEoRHkgDsmXDXRbfppGTpPrN7R4sjynJzehzUBZ8Ug7ovT9FoAHb8kuVQhUiMs1js6tdwtthzQMbPi9vwxUtVvjYknN2fnJgMnckEhzJJpJDCNdH7YhpPaWQnGVVS334mskiuqkbRVrFPJN2nnwArHr3L2cLxSMk9toKfw7ViKJ2p5E5JxiSmKY1cFGZ7uRLsuQ833PJN9JE8crPtkBNefqkbFNz68S5jPmzUShSvAc4TqXKeovDASFmmhKaPqLUrfsSWm7nzuKnzJSMADF6xSuwr9cknMoirqkRkLe7ybJ2ERwSdf5cUxMjF7yjS8tW9hZudnTUb1uPNDuSmPPVrCR12XZyFzBvVgxH51ZNJTym46nqnfA881LQcmFMnCwJf39rVJ4ASLnzEzmuwXj75QoB9ce9kiLmoBNLYe4QKSB6gDd858VnBtBNQELVuCCZbrTYuSCeNdUFhvMwD4kryc1pBYUa8Ro81F3QVfiKN

      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/
        
             (nym-mixnode - version 1.1.14)

    
&gt;&gt;&gt; attempting to sign 5XrvVEMzRJk2AcT2h1o6ErZNb8z1ZzD3h7teipBW3NUtrtYq7vu4DRMgzZRTPVPnyr2YWCxpmKCMFaEXvksnJ4jt7np3NMLxsLMrFjEBhh67Crtjy4868vCzAivUqzdc365RiqxQQKtv4r9eTk9mTbE9JY8U3TxzKJCSGcBqbrb9JX3HrZVWm6tqbUYbsnku9pqnfeyeUiaYKY44Lm72TYrkZfRrMAZLMATiXT1ntmiKqT37HzRxNZjiH8qHeQEoRHkgDsmXDXRbfppGTpPrN7R4sjynJzehzUBZ8Ug7ovT9FoAHb8kuVQhUiMs1js6tdwtthzQMbPi9vwxUtVvjYknN2fnJgMnckEhzJJpJDCNdH7YhpPaWQnGVVS334mskiuqkbRVrFPJN2nnwArHr3L2cLxSMk9toKfw7ViKJ2p5E5JxiSmKY1cFGZ7uRLsuQ833PJN9JE8crPtkBNefqkbFNz68S5jPmzUShSvAc4TqXKeovDASFmmhKaPqLUrfsSWm7nzuKnzJSMADF6xSuwr9cknMoirqkRkLe7ybJ2ERwSdf5cUxMjF7yjS8tW9hZudnTUb1uPNDuSmPPVrCR12XZyFzBvVgxH51ZNJTym46nqnfA881LQcmFMnCwJf39rVJ4ASLnzEzmuwXj75QoB9ce9kiLmoBNLYe4QKSB6gDd858VnBtBNQELVuCCZbrTYuSCeNdUFhvMwD4kryc1pBYUa8Ro81F3QVfiKN
&gt;&gt;&gt; decoding the message...
&gt;&gt;&gt; message to sign: {&quot;nonce&quot;:0,&quot;algorithm&quot;:&quot;ed25519&quot;,&quot;message_type&quot;:&quot;mixnode-bonding&quot;,&quot;content&quot;:{&quot;sender&quot;:&quot;n1eufxdlgt0puwrwptgjfqne8pj4nhy2u5ft62uq&quot;,&quot;proxy&quot;:null,&quot;funds&quot;:[{&quot;denom&quot;:&quot;unym&quot;,&quot;amount&quot;:&quot;100000000&quot;}],&quot;data&quot;:{&quot;mix_node&quot;:{&quot;host&quot;:&quot;62.240.134.189&quot;,&quot;mix_port&quot;:1789,&quot;verloc_port&quot;:1790,&quot;http_api_port&quot;:8000,&quot;sphinx_key&quot;:&quot;CfZSy1jRfrfiVi9JYexjFWPqWkKoY72t7NdpWaq37K8Z&quot;,&quot;identity_key&quot;:&quot;DhmUYedPZvhP9MMwXdNpPaqCxxTQgjAg78s2nqtTTiNF&quot;,&quot;version&quot;:&quot;1.1.14&quot;},&quot;cost_params&quot;:{&quot;profit_margin_percent&quot;:&quot;0.1&quot;,&quot;interval_operating_cost&quot;:{&quot;denom&quot;:&quot;unym&quot;,&quot;amount&quot;:&quot;40000000&quot;}}}}}
```
</code></pre>
<ul>
<li>Copy the resulting signature:</li>
</ul>
<pre><code>&gt;&gt;&gt; The base58-encoded signature is:
2GbKcZVKFdpi3sR9xoJWzwPuGdj3bvd7yDtDYVoKfbTWdpjqAeU8KS5bSftD5giVLJC3gZiCg2kmEjNG5jkdjKUt
</code></pre>
<ul>
<li>And paste it into the wallet nodal, then confirm the transaction.</li>
</ul>
<p><img src="nodes/../images/wallet-sign.png" alt="Paste Signature" /></p>
<ul>
<li>Your node will now be bonded and ready to mix at the beginning of the next epoch (at most 1 hour). </li>
</ul>
<blockquote>
<p>You are asked to <code>sign</code> a transaction on bonding so that the mixnet smart contract is able to map your nym address to your node. This allows us to create a nonce for each account and defend against replay attacks.</p>
</blockquote>
<h4 id="nodes-mix-node-setup-bond-via-the-cli-power-users"><a class="header" href="#nodes-mix-node-setup-bond-via-the-cli-power-users">Bond via the CLI (power users)</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="#tools-nym-cli-bond-a-mix-node">relevant section in the Nym CLI</a> docs.</p>
<h3 id="nodes-mix-node-setup-running-your-mix-node"><a class="header" href="#nodes-mix-node-setup-running-your-mix-node">Running your mix node</a></h3>
<p>Now you've bonded your mix node, run it with:</p>
<pre><code>./nym-mixnode run --id winston-smithnode
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

Starting mixnode winston-smithnode...

To bond your mixnode you will need to install the Nym wallet, go to https://nymtech.net/get-involved and select the Download button.
Select the correct version and install it to your machine. You will need to provide the following:

Identity Key: GWrymUuLaxVHSs8iE7YW48MB81npnKjrVuJzJsGkeji6
Sphinx Key: FU89ULkS4YYDXcm5jShhJvoit7H4jG4EXHxRKbS9cXSJ
Host: 62.240.134.46 (bind address: 62.240.134.46)
Version: {{mix_node_release_version}}
Mix Port: 1789, Verloc port: 1790, Http Port: 8000

You are bonding to wallet address: n1x42mm3gsdg808qu2n3ah4l4r9y7vfdvwkw8az6

2022-04-27T16:08:01.159Z INFO  nym_mixnode::node &gt; Starting nym mixnode
2022-04-27T16:08:01.490Z INFO  nym_mixnode::node &gt; Starting node stats controller...
2022-04-27T16:08:01.490Z INFO  nym_mixnode::node &gt; Starting packet delay-forwarder...
2022-04-27T16:08:01.490Z INFO  nym_mixnode::node &gt; Starting socket listener...
2022-04-27T16:08:01.490Z INFO  nym_mixnode::node::listener &gt; Running mix listener on &quot;62.240.134.46:1789&quot;
2022-04-27T16:08:01.490Z INFO  nym_mixnode::node           &gt; Starting the round-trip-time measurer...

```
</code></pre>
<p>If everything worked, you'll see your node running on the either the <a href="https://sandbox-explorer.nymtech.net">Sandbox testnet network explorer</a> or the <a href="https://explorer.nymtech.net">mainnet network explorer</a>, depending on which network you're running.</p>
<p>Note that your node's public identity key is displayed during startup, you can use it to identify your node in the list.</p>
<p>Keep reading to find out more about configuration options or troubleshooting if you're having issues. There are also some tips for running on AWS and other cloud providers, some of which require minor additional setup.</p>
<p>Also have a look at the saved configuration files in <code>$HOME/.nym/mixnodes/</code> to see more configuration options.</p>
<h3 id="nodes-mix-node-setup-describe-your-mix-node-optional"><a class="header" href="#nodes-mix-node-setup-describe-your-mix-node-optional">Describe your mix node (optional)</a></h3>
<p>In order to easily identify your node via human-readable information later on in the development of the testnet when delegated staking is implemented, you can <code>describe</code> your mixnode with the following command:</p>
<pre><code>./nym-mixnode describe --id winston-smithnode
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
name: winston-smithnode
description: nym-mixnode hosted on Linode VPS in &lt;location&gt; with the following specs: &lt;specs&gt;.
link, e.g. https://mixnode.yourdomain.com: mixnode.mydomain.net
location, e.g. City: London, Country: UK: &lt;your_location&gt;

This information will be shown in the mixnode's page in the Network Explorer, and help people make delegated staking decisions.
```
</code></pre>
<blockquote>
<p>Remember to restart your mix node process in order for the new description to be propogated</p>
</blockquote>
<h3 id="nodes-mix-node-setup-upgrading-your-mix-node"><a class="header" href="#nodes-mix-node-setup-upgrading-your-mix-node">Upgrading your mix node</a></h3>
<p>Upgrading your node is a two-step process:</p>
<ul>
<li>Updating the binary and <code>config.toml</code> on your VPS</li>
<li>Updating the node information in the <a href="#nyx-mixnet-contract">mixnet smart contract</a>. <strong>This is the information that is present on the <a href="https://explorer.nymtech.net">mixnet explorer</a></strong>.</li>
</ul>
<h4 id="nodes-mix-node-setup-step-1-upgrading-your-binary"><a class="header" href="#nodes-mix-node-setup-step-1-upgrading-your-binary">Step 1: upgrading your binary</a></h4>
<p>Follow these steps to upgrade your mix node binary and update its config file:</p>
<ul>
<li>pause your mix node process.</li>
<li>replace the existing binary with the newest binary (which you can either compile yourself or grab from our <a href="https://github.com/nymtech/nym/releases">releases page</a>).</li>
<li>re-run <code>init</code> with the same values as you used initially. <strong>This will just update the config file, it will not overwrite existing keys</strong>.</li>
<li>restart your mix node process with the new binary.</li>
</ul>
<blockquote>
<p>Do <strong>not</strong> use the <code>upgrade</code> command: there is a known error with the command that will be fixed in a subsequent release.</p>
</blockquote>
<h4 id="nodes-mix-node-setup-step-2-updating-your-node-information-in-the-smart-contract"><a class="header" href="#nodes-mix-node-setup-step-2-updating-your-node-information-in-the-smart-contract">Step 2: updating your node information in the smart contract</a></h4>
<p>Follow these steps to update the information about your mix node which is publically avaliable from the <a href="https://validator.nymtech.net/api/swagger/index.html">Nym API</a> and information displayed on the <a href="https://explorer.nymtech.net">mixnet explorer</a>.</p>
<p>You can either do this graphically via the Desktop Wallet, or the CLI.</p>
<h4 id="nodes-mix-node-setup-updating-node-information-via-the-desktop-wallet"><a class="header" href="#nodes-mix-node-setup-updating-node-information-via-the-desktop-wallet">Updating node information via the Desktop Wallet</a></h4>
<ul>
<li>
<p>Navigate to the <code>Bonding</code> page and click the <code>Node Settings</code> link in the top right corner:
<img src="nodes/../images/wallet-screenshots/bonding.png" alt="Bonding page" /></p>
</li>
<li>
<p>Update the fields in the <code>Node Settings</code> page and click <code>Submit changes to the blockchain</code>.
<img src="nodes/../images/wallet-screenshots/node_settings.png" alt="Node Settings Page" /></p>
</li>
</ul>
<h4 id="nodes-mix-node-setup-updating-node-information-via-the-cli"><a class="header" href="#nodes-mix-node-setup-updating-node-information-via-the-cli">Updating node information via the CLI</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="#tools-nym-cli-upgrade-a-mix-node">relevant section in the Nym CLI</a> docs.</p>
<h3 id="nodes-mix-node-setup-displaying-mix-node-information"><a class="header" href="#nodes-mix-node-setup-displaying-mix-node-information">Displaying mix node information</a></h3>
<p>You can always check the details of your mix node with the <code>node-details</code> command:</p>
<pre><code>./nym-mixnode node-details --id winston-smithnode
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

Identity Key: GWrymUuLaxVHSs8iE7YW48MB81npnKjrVuJzJsGkeji6
Sphinx Key: FU89ULkS4YYDXcm5jShhJvoit7H4jG4EXHxRKbS9cXSJ
Host: 62.240.134.46 (bind address: 62.240.134.46)
Version: {{mix_node_release_version}}
Mix Port: 1789, Verloc port: 1790, Http Port: 8000

You are bonding to wallet address: n1x42mm3gsdg808qu2n3ah4l4r9y7vfdvwkw8az6

```
</code></pre>
<h2 id="nodes-mix-node-setup-vps-setup-and-automation"><a class="header" href="#nodes-mix-node-setup-vps-setup-and-automation">VPS Setup and Automation</a></h2>
<h3 id="nodes-mix-node-setup-configure-your-firewall"><a class="header" href="#nodes-mix-node-setup-configure-your-firewall">Configure your firewall</a></h3>
<p>The following commands will allow you to set up a firewall using <code>ufw</code>.</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your mix node's p2p port, as well as ports for ssh, http, and https connections, and ports <code>8000</code> and <code>1790</code> for verloc and measurement pings:</p>
<pre><code>sudo ufw allow 1789,1790,8000,22,80,443/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<p>For more information about your mix node's port configuration, check the <a href="#nodes-mix-node-setup-mixnode-port-reference">mix node port reference table</a> below.</p>
<h3 id="nodes-mix-node-setup-automating-your-mix-node-with-systemd"><a class="header" href="#nodes-mix-node-setup-automating-your-mix-node-with-systemd">Automating your mix node with systemd</a></h3>
<p>It's useful to have the mix node automatically start at system boot time. Here's a systemd service file to do that:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Mixnode ({{mix_node_release_version}})
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym
LimitNOFILE=65536
ExecStart=/home/nym/nym-mixnode run --id mix0100
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Put the above file onto your system at <code>/etc/systemd/system/nym-mixnode.service</code>.</p>
<p>Change the path in <code>ExecStart</code> to point at your mix node binary (<code>nym-mixnode</code>), and the <code>User</code> so it is the user you are running as.</p>
<p>If you have built nym on your server, and your username is <code>jetpanther</code>, then the start command might look like this:</p>
<p><code>ExecStart=/home/jetpanther/nym/target/release/nym-mixnode run --id your-id</code>. Basically, you want the full <code>/path/to/nym-mixnode run --id whatever-your-node-id-is</code></p>
<p>Then run:</p>
<pre><code>systemctl enable nym-mixnode.service
</code></pre>
<p>Start your node:</p>
<pre><code>service nym-mixnode start
</code></pre>
<p>This will cause your node to start at system boot time. If you restart your machine, the node will come back up automatically.</p>
<p>You can also do <code>service nym-mixnode stop</code> or <code>service nym-mixnode restart</code>.</p>
<p>Note: if you make any changes to your systemd script after you've enabled it, you will need to run:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>This lets your operating system know it's ok to reload the service configuration.</p>
<h4 id="nodes-mix-node-setup-setting-the-ulimit"><a class="header" href="#nodes-mix-node-setup-setting-the-ulimit">Setting the ulimit</a></h4>
<p>Linux machines limit how many open files a user is allowed to have. This is called a <code>ulimit</code>.</p>
<p><code>ulimit</code> is 1024 by default on most systems. It needs to be set higher, because mix nodes make and receive a lot of connections to other nodes.</p>
<p>If you see errors such as:</p>
<pre><code>Failed to accept incoming connection - Os { code: 24, kind: Other, message: &quot;Too many open files&quot; }
</code></pre>
<p>This means that the operating system is preventing network connections from being made.</p>
<h5 id="nodes-mix-node-setup-set-the-ulimit-via-systemd-service-file"><a class="header" href="#nodes-mix-node-setup-set-the-ulimit-via-systemd-service-file">Set the ulimit via <code>systemd</code> service file</a></h5>
<p>Query the <code>ulimit</code> of your mix node with:</p>
<pre><code>grep -i &quot;open files&quot; /proc/$(ps -A -o pid,cmd|grep nym-mixnode | grep -v grep |head -n 1 | awk '{print $1}')/limits
</code></pre>
<p>You'll get back the hard and soft limits, which looks something like this:</p>
<pre><code>Max open files            65536                65536                files
</code></pre>
<p>If your output is <strong>the same as above</strong>, your node will not encounter any <code>ulimit</code> related issues.</p>
<p>However if either value is <code>1024</code>, you must raise the limit via the systemd service file. Add the line:</p>
<pre><code>LimitNOFILE=65536
</code></pre>
<p>Reload the daemon:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>or execute this as root for system-wide setting of <code>ulimit</code>:</p>
<pre><code>echo &quot;DefaultLimitNOFILE=65535&quot; &gt;&gt; /etc/systemd/system.conf
</code></pre>
<p>Reboot your machine and restart your node. When it comes back, use <code>cat /proc/$(pidof nym-mixnode)/limits | grep &quot;Max open files&quot;</code> to make sure the limit has changed to 65535.</p>
<h5 id="nodes-mix-node-setup-set-the-ulimit-on-non-systemd-based-distributions"><a class="header" href="#nodes-mix-node-setup-set-the-ulimit-on-non-systemd-based-distributions">Set the ulimit on <code>non-systemd</code> based distributions</a></h5>
<p>Edit <code>etc/security/conf</code> and add the following lines:</p>
<pre><code># Example hard limit for max opened files
username        hard nofile 4096
# Example soft limit for max opened files
username        soft nofile 4096
</code></pre>
<p>Then reboot your server and restart your mixnode.</p>
<h2 id="nodes-mix-node-setup-node-families"><a class="header" href="#nodes-mix-node-setup-node-families">Node Families</a></h2>
<p>Node family involves setting up a group of mix nodes that work together to provide greater privacy and security for network communications. This is achieved by having the nodes in the family share information and routes, creating a decentralized network that makes it difficult for third parties to monitor or track communication traffic.</p>
<h3 id="nodes-mix-node-setup-create-a-node-family"><a class="header" href="#nodes-mix-node-setup-create-a-node-family">Create a Node Family</a></h3>
<p>To create a Node family, you will need to install and configure multiple mix nodes, and then use the CLI to link them together into a family. Once your Node family is up and running, you can use it to route your network traffic through a series of nodes, obscuring the original source and destination of the communication.</p>
<p>You can use either <code>nym-cli</code> which can be downloaded from the <a href="https://github.com/nymtech/nym/releases">release page</a> or compiling <code>nyxd</code>.</p>
<p><code>/path/to/the/release</code> and run the following on the family head to obtain the signature for the member:</p>
<pre><code>./nym-mixnode sign --id winston-smithnode --text &lt;text&gt;
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```



      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-mixnode - version {{mix_node_release_version}})

Signing the text &quot;APxUbCmGp4K9qDzvwVADJFNu8S3JV1AJBw7q6bS5KN9E&quot; using your mixnode's Ed25519 identity key...
The base58-encoded signature on 'APxUbCmGp4K9qDzvwVADJFNu8S3JV1AJBw7q6bS5KN9E' is: 2ZuCFYU91pvEcgAj6EzU33oozazvsRAoxP7NQHFM6Xy6AkJrzgCZdnsnZYAmxFtqe8Su17KXwpTHQtkVmAnAiV4H

```
</code></pre>
<p>Using <code>nym-cli</code>:</p>
<blockquote>
<p><code>--mnemonic</code> is the mnemonic of the member wanting to be the head of family.</p>
</blockquote>
<pre><code>/nym-cli cosmwasm execute &lt;wallet-address&gt; '{&quot;create_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;,&quot;owner_signature&quot;:&quot;&lt;node owner signature&gt;&quot;,&quot;label&quot;: &quot;&lt;node label&gt;&quot;}}' --mnemonic &lt;mnemonic from node to be the head&gt;
</code></pre>
<p>Using <code>nyxd</code>:</p>
<blockquote>
<p><code>--from</code> is mnemonic of the member wanting to join the family.</p>
</blockquote>
<pre><code>./nyxd tx wasm execute ${MIXNET-CONTRACT} '{&quot;join_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;}}' --node ${VALIDATOR-ENDPOINT} --from mix1 --chain-id nyx --gas-prices 0.025unym --gas auto --gas-adjustment 1.3 -y -b block
</code></pre>
<p>To get the node owner signature, use:</p>
<p><code>./nym-mixnode node-details --id &lt;id&gt;</code></p>
<h3 id="nodes-mix-node-setup-joining-a-node-family"><a class="header" href="#nodes-mix-node-setup-joining-a-node-family">Joining a Node Family</a></h3>
<p><code>/path/to/the/release</code> and run the following on the family head to obtain the signature for the member:</p>
<pre><code>./nym-mixnode sign --id mixnode --text &lt;text&gt;
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-mixnode - version {{mix_node_release_version}})


Signing the text &quot;4yRfauFzZnejJhG2FACTVQ7UnYEcFUYw3HzXrmuwLMaR&quot; using your mixnode's Ed25519 identity key...
The base58-encoded signature on '4yRfauFzZnejJhG2FACTVQ7UnYEcFUYw3HzXrmuwLMaR' is: 4By7EQEMM8BAt6ptxJyeGqpoxHWxeRUhyJ4wMr2x3mXSQD9nvttkvd7tgP1uKu2ktJjB2bLzD1oaZ33d2Wv5eYWp
</code></pre>
<p>Using <code>nym-cli</code>:</p>
<pre><code>./nym-cli cosmwasm execute &lt;wallet-address&gt; '{&quot;join_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;,&quot;owner_signautre&quot;: &quot;&lt;owner signature from node to join&gt;&quot;, &quot;label&quot;:&quot;&lt;node to join label&gt;&quot;}}'  --mnemonic &lt;mnemonic-from-node-to-join&gt;
</code></pre>
<p>Using <code>nyxd</code>:</p>
<pre><code>./nyxd tx wasm execute ${MIXNET-CONTRACT} '{&quot;join_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;}}' --node ${VALIDATOR-ENDPOINT} --from mix1 --chain-id nyx --gas-prices 0.025unym --gas auto --gas-adjustment 1.3 -y -b block
</code></pre>
<p>To get the node owner signature, use:</p>
<p><code>./nym-mixnode node-details --id &lt;id&gt;</code></p>
<h3 id="nodes-mix-node-setup-leaving-a-family"><a class="header" href="#nodes-mix-node-setup-leaving-a-family">Leaving a family</a></h3>
<p>If wanting to leave, run the same initial command as above, followed by:</p>
<p>Using <code>nym-cli</code>:</p>
<pre><code>./nym-cli cosmwasm execute n17srjznxl9dvzdkpwpw24gg668wc73val88a6m5ajg6ankwvz9wtst0cznr '{&quot;leave_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;,&quot;owner_signautre&quot;: &quot;&lt;owner signature from node to leave&gt;&quot;}}'  --mnemonic &lt;mnemonic-from-node-to leave&gt;
</code></pre>
<p>Using <code>nyxd</code>:</p>
<pre><code>./nyxd tx wasm execute ${MIXNET-CONTRACT} '{&quot;join_family&quot;: {&quot;signature&quot;: &quot;&lt;base58-encoded-signature&gt;&quot;,&quot;family_head&quot;: &quot;&lt;text&gt;&quot;}}' --node ${VALIDATOR-ENDPOINT} --from mix1 --chain-id nyx --gas-prices 0.025unym --gas auto --gas-adjustment 1.3 -y -b block
</code></pre>
<h2 id="nodes-mix-node-setup-checking-that-your-node-is-mixing-correctly"><a class="header" href="#nodes-mix-node-setup-checking-that-your-node-is-mixing-correctly">Checking that your node is mixing correctly</a></h2>
<h3 id="nodes-mix-node-setup-network-explorers"><a class="header" href="#nodes-mix-node-setup-network-explorers">Network explorers</a></h3>
<p>Once you've started your mix node and it connects to the validator, your node will automatically show up in the 'Mix nodes' section of either the Nym Network Explorers:</p>
<ul>
<li><a href="https://explorer.nymtech.net/overview">Mainnet</a></li>
<li><a href="https://sandbox-explorer.nymtech.net/">Sandbox testnet</a></li>
</ul>
<p>Enter your <strong>identity key</strong> to find your node. There are numerous statistics about your node on that page that are useful for checking your uptime history, packets mixed, and any delegations your node may have.</p>
<p>There are also 2 community explorers which have been created by <a href="https://nodes.guru">Nodes Guru</a>:</p>
<ul>
<li><a href="https://mixnet.explorers.guru/">Mainnet</a></li>
<li><a href="https://sandbox.mixnet.explorers.guru/">Sandbox testnet</a></li>
</ul>
<p>For more details see <a href="#nodes-troubleshooting">Troubleshooting FAQ</a></p>
<h3 id="nodes-mix-node-setup-virtual-ips-and-hosting-via-google--aws"><a class="header" href="#nodes-mix-node-setup-virtual-ips-and-hosting-via-google--aws">Virtual IPs and hosting via Google &amp; AWS</a></h3>
<p>On some services (AWS, Google, etc), the machine's available bind address is not the same as the public IP address. In this case, bind <code>--host</code> to the local machine address returned by <code>ifconfig</code>, but also specify <code>--announce-host</code> with the public IP. Please make sure that you pass the correct, routable <code>--announce-host</code>.</p>
<p>For example, on a Google machine, you may see the following output from the <code>ifconfig</code> command:</p>
<pre><code>ens4: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1460
        inet 10.126.5.7  netmask 255.255.255.255  broadcast 0.0.0.0
        ...
</code></pre>
<p>The <code>ens4</code> interface has the IP <code>10.126.5.7</code>. But this isn't the public IP of the machine, it's the IP of the machine on Google's internal network. Google uses virtual routing, so the public IP of this machine is something else, maybe <code>36.68.243.18</code>.</p>
<p><code>nym-mixnode init --host 10.126.5.7</code>, initalises the mix node, but no packets will be routed because <code>10.126.5.7</code> is not on the public internet.</p>
<p>Trying <code>nym-mixnode init --host 36.68.243.18</code>, you'll get back a startup error saying <code>AddrNotAvailable</code>. This is because the mix node doesn't know how to bind to a host that's not in the output of <code>ifconfig</code>.</p>
<p>The right thing to do in this situation is <code>nym-mixnode init --host 10.126.5.7 --announce-host 36.68.243.18</code>.</p>
<p>This will bind the mix node to the available host <code>10.126.5.7</code>, but announce the mix node's public IP to the directory server as <code>36.68.243.18</code>. It's up to you as a node operator to ensure that your public and private IPs match up properly.</p>
<h2 id="nodes-mix-node-setup-metrics--api-endpoints"><a class="header" href="#nodes-mix-node-setup-metrics--api-endpoints">Metrics / API endpoints</a></h2>
<p>The mix node binary exposes several API endpoints that can be pinged in order to gather information about the node, and the Nym API (previously 'Validator API') exposes numerous mix node related endpoints which provide network-wide information about mix nodes, the network topology (the list of avaliable mix nodes for packet routing), and information regarding uptime monitoring and rewarding history.</p>
<h3 id="nodes-mix-node-setup-mix-node-api-endpoints"><a class="header" href="#nodes-mix-node-setup-mix-node-api-endpoints">Mix node API endpoints</a></h3>
<p>Since the mix node binary exposes several API endpoints itself, you can ping these easily via curl:</p>
<div class="table-wrapper"><table><thead><tr><th>Endpoint</th><th>Description</th><th>Command</th></tr></thead><tbody>
<tr><td><code>/description</code></td><td>Returns the description of the node set with the <code>describe</code> command</td><td><code>curl &lt;NODE_IP_ADDRESS&gt;:8000/description</code></td></tr>
<tr><td><code>/hardware</code></td><td>Returns the hardware information of the node</td><td><code>curl &lt;NODE_IP_ADDRESS&gt;:8000/hardware</code></td></tr>
<tr><td><code>/verloc</code></td><td>Returns the verloc information of the node, updated every 12 hours</td><td><code>curl &lt;NODE_IP_ADDRESS&gt;:8000/verloc</code></td></tr>
</tbody></table>
</div>
<p>The code for exposed API endpoints can be found <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/mixnode/src/node/http">here</a>.</p>
<blockquote>
<p>You can get more detailed info by appending <code>?debug</code> to the URL, like so: <code>curl http://&lt;NODE_IP_ADDRESS&gt;:8000/stats?debug</code></p>
</blockquote>
<h3 id="nodes-mix-node-setup-mix-node-related-nym-api-previously-validator-api-endpoints"><a class="header" href="#nodes-mix-node-setup-mix-node-related-nym-api-previously-validator-api-endpoints">Mix node related Nym API (previously 'Validator API') endpoints</a></h3>
<p>Numerous endpoints are documented on the Nym API (previously 'Validator API')'s <a href="https://validator.nymtech.net/api/swagger/index.html">Swagger Documentation</a>. There you can also try out various requests from your broswer, and download the response from the API. Swagger will also show you what commands it is running, so that you can run these from an app or from your CLI if you prefer.</p>
<h4 id="nodes-mix-node-setup-mix-node-reward-estimation-api-endpoint"><a class="header" href="#nodes-mix-node-setup-mix-node-reward-estimation-api-endpoint">Mix node Reward Estimation API endpoint</a></h4>
<p>The Reward Estimation API endpoint allows mix node operators to estimate the rewards they could earn for running a Nym mixnode with a specific <code>mix_id</code>.</p>
<blockquote>
<p>The <code>{mix_id}</code> can be found in the &quot;Mix ID&quot; column of the <a href="https://explorer.nymtech.net/network-components/mixnodes/active">Network Explorer</a>.</p>
</blockquote>
<p>The endpoint is a particularly common for mix node operators as it can provide an estimate of potential earnings based on factors such as the amount of traffic routed through the mixnode, the quality of the mix node's performance, and the overall demand for mix nodes in the network. This information can be useful for mix node operators in deciding whether or not to run a mix node and in optimizing its operations for maximum profitability.</p>
<p>Using this API endpoint returns information about the Reward Estimation:</p>
<pre><code>/status/mixnode/{mix_id}/reward-estimation
</code></pre>
<p>Query Response:</p>
<pre><code>    &quot;estimation&quot;: {
        &quot;total_node_reward&quot;: &quot;942035.916721770541325331&quot;,
        &quot;operator&quot;: &quot;161666.263307386408152071&quot;,
        &quot;delegates&quot;: &quot;780369.65341438413317326&quot;,
        &quot;operating_cost&quot;: &quot;54444.444444444444444443&quot;
    },
</code></pre>
<blockquote>
<p>The unit of value is measured in <code>uNYM</code>.</p>
</blockquote>
<ul>
<li>
<p><code>estimated_total_node_reward</code> - An estimate of the total amount of rewards that a particular mix node can expect to receive during the current epoch. This value is calculated by the Nym Validator based on a number of factors, including the current state of the network, the number of mix nodes currently active in the network, and the amount of network traffic being processed by the mix node.</p>
</li>
<li>
<p><code>estimated_operator_reward</code> - An estimate of the amount of rewards that a particular mix node operator can expect to receive. This value is calculated by the Nym Validator based on a number of factors, including the amount of traffic being processed by the mix node, the quality of service provided by the mix node, and the operator's stake in the network.</p>
</li>
<li>
<p><code>estimated_delegators_reward</code> - An estimate of the amount of rewards that mix node delegators can expect to receive individually. This value is calculated by the Nym Validator based on a number of factors, including the amount of traffic being processed by the mix node, the quality of service provided by the mix node, and the delegator's stake in the network.</p>
</li>
<li>
<p><code>estimated_node_profit</code> - An estimate of the profit that a particular mix node operator can expect to earn. This value is calculated by subtracting the mix node operator's <code>operating_costs</code> from their <code>estimated_operator_reward</code> for the current epoch.</p>
</li>
<li>
<p><code>estimated_operator_cost</code> - An estimate of the total cost that a particular mix node operator can expect to incur for their participation. This value is calculated by the Nym Validator based on a number of factors, including the cost of running a mix node, such as server hosting fees, and other expenses associated with operating the mix node.</p>
</li>
</ul>
<h2 id="nodes-mix-node-setup-ports"><a class="header" href="#nodes-mix-node-setup-ports">Ports</a></h2>
<p>All mix node-specific port configuration can be found in <code>$HOME/.nym/mixnodes/&lt;your-id&gt;/config/config.toml</code>. If you do edit any port configs, remember to restart your mix node.</p>
<h3 id="nodes-mix-node-setup-mix-node-port-reference"><a class="header" href="#nodes-mix-node-setup-mix-node-port-reference">Mix node port reference</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td><code>1789</code></td><td>Listen for mixnet traffic</td></tr>
<tr><td><code>1790</code></td><td>Listen for VerLoc traffic</td></tr>
<tr><td><code>8000</code></td><td>Metrics http API endpoint</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><div id="nodes-gateway-setup"></div><h1 id="nodes-gateway-setup-gateways"><a class="header" href="#nodes-gateway-setup-gateways">Gateways</a></h1>
<blockquote>
<p>The Nym gateway was built in the <a href="#binaries-building-nym">building nym</a> section. If you haven't yet built Nym and want to run the code, go there first.</p>
</blockquote>
<h2 id="nodes-gateway-setup-preliminary-steps"><a class="header" href="#nodes-gateway-setup-preliminary-steps">Preliminary steps</a></h2>
<p>There are a couple of steps that need completing before starting to set up your gateway:</p>
<ul>
<li>preparing your wallet</li>
<li>requisitioning a VPS (Virtual Private Server)</li>
</ul>
<h3 id="nodes-gateway-setup-wallet-preparation"><a class="header" href="#nodes-gateway-setup-wallet-preparation">Wallet preparation</a></h3>
<h4 id="nodes-gateway-setup-mainnet"><a class="header" href="#nodes-gateway-setup-mainnet">Mainnet</a></h4>
<p>Before you initialise and run your gateway, head to our <a href="https://nymtech.net/download/">website</a> and download the Nym wallet for your operating system. If pre-compiled binaries for your operating system aren't availiable, you can build the wallet yourself with instructions <a href="#wallet-desktop-wallet">here</a>. </p>
<p>If you don't already have one, please create a Nym address using the wallet, and fund it with tokens. The minimum amount required to bond a gateway is 100 <code>NYM</code>, but make sure you have a bit more to account for gas costs.</p>
<p><code>NYM</code> can be purchased via Bity from the wallet itself, and is currently present on several exchanges. Head to our <a href="https://t.me/nymchan">telegram channels</a> to find out where to get <code>NYM</code> tokens.</p>
<blockquote>
<p>Remember that you can <strong>only</strong> use native Cosmos <code>NYM</code> tokens to bond your gateway. You <strong>cannot</strong> use ERC20 representations of <code>NYM</code> to run a node. </p>
</blockquote>
<h4 id="nodes-gateway-setup-sandbox-testnet"><a class="header" href="#nodes-gateway-setup-sandbox-testnet">Sandbox testnet</a></h4>
<p>Make sure to download a wallet and create an account as outlined above. Then head to our <a href="https://faucet.nymtech.net/">token faucet</a> and get some tokens to use to bond it. </p>
<h3 id="nodes-gateway-setup-vps-hardware-specs"><a class="header" href="#nodes-gateway-setup-vps-hardware-specs">VPS Hardware Specs</a></h3>
<p>You will need to rent a VPS to run your mix node on. One key reason for this is that your node <strong>must be able to send TCP data using both IPv4 and IPv6</strong> (as other nodes you talk to may use either protocol.</p>
<p>We currently have these <em>rough</em> specs for VPS hardware: </p>
<ul>
<li>Processors: 2 cores are fine. Get the fastest CPUs you can afford.</li>
<li>RAM: Memory requirements depend on the amount of users your Gateway will be serving at any one time. If you're just going to be using it yourself, then minimal RAM is fine. <strong>If you're running your Gateway as part of a Service Grant, get something with at least 4GB RAM.</strong> </li>
<li>Disks: much like the amount of RAM your Gateway could use, the amount of disk space required will vary with the amount of users your Gateway is serving. <strong>If you're running your Gateway as part of a Service Grant, get something with at least 40GB storage.</strong> </li>
</ul>
<h2 id="nodes-gateway-setup-gateway-setup"><a class="header" href="#nodes-gateway-setup-gateway-setup">Gateway setup</a></h2>
<p>Now that you have built the codebase, set up your wallet, and have a VPS with the <code>nym-gateway</code> binary, you can set up your gateway with the instructions below.</p>
<h3 id="nodes-gateway-setup-viewing-command-help"><a class="header" href="#nodes-gateway-setup-viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-gateway --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (gateway - version {{platform_release_version}})

    
nym-gateway {{platform_release_version}}
Nymtech
Implementation of the Nym Mixnet Gateway

USAGE:
    nym-gateway [OPTIONS] &lt;SUBCOMMAND&gt;

OPTIONS:
        --config-env-file &lt;CONFIG_ENV_FILE&gt;
            Path pointing to an env file that configures the gateway

    -h, --help
            Print help information

    -V, --version
            Print version information

SUBCOMMANDS:
    completions          Generate shell completions
    generate-fig-spec    Generate Fig specification
    help                 Print this message or the help of the given subcommand(s)
    init                 Initialise the gateway
    node-details         Show details of this gateway
    run                  Starts the gateway
    sign                 Sign text to prove ownership of this mixnode
    upgrade              Try to upgrade the gateway
    
```
</code></pre>
<p>You can also check the various arguments required for individual commands with: </p>
<pre><code>./nym-gateway &lt;command&gt; --help
</code></pre>
<h3 id="nodes-gateway-setup-initialising-your-gateway"><a class="header" href="#nodes-gateway-setup-initialising-your-gateway">Initialising your gateway</a></h3>
<p>To check available configuration options use:</p>
<pre><code> ./nym-gateway init --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (gateway - version {{platform_release_version}})

    
nym-gateway-init 
Initialise the gateway

USAGE:
    nym-gateway init [OPTIONS] --id &lt;ID&gt; --host &lt;HOST&gt; --wallet-address &lt;WALLET_ADDRESS&gt;

OPTIONS:
        --announce-host &lt;ANNOUNCE_HOST&gt;
            The host that will be reported to the directory server

        --clients-port &lt;CLIENTS_PORT&gt;
            The port on which the gateway will be listening for clients gateway-requests

        --datastore &lt;DATASTORE&gt;
            Path to sqlite database containing all gateway persistent data

        --enabled-statistics &lt;ENABLED_STATISTICS&gt;
            Enable/disable gateway anonymized statistics that get sent to a statistics aggregator server

    -h, --help
            Print help information

        --host &lt;HOST&gt;
            The custom host on which the gateway will be running for receiving sphinx packets

        --id &lt;ID&gt;
            Id of the gateway we want to create config for

        --mix-port &lt;MIX_PORT&gt;
            The port on which the gateway will be listening for sphinx packets

        --mnemonic &lt;MNEMONIC&gt;
            Cosmos wallet mnemonic needed for double spending protection

        --statistics-service-url &lt;STATISTICS_SERVICE_URL&gt;
            URL where a statistics aggregator is running. The default value is a Nym aggregator server

        --validator-apis &lt;VALIDATOR_APIS&gt;
            Comma separated list of endpoints of the validators APIs

        --validators &lt;VALIDATORS&gt;
            Comma separated list of endpoints of the validator

        --wallet-address &lt;WALLET_ADDRESS&gt;
            The wallet address you will use to bond this gateway, e.g.
            nymt1z9egw0knv47nmur0p8vk4rcx59h9gg4zuxrrr9
```
</code></pre>
<p>The following command returns a gateway on your current IP with the <code>id</code> of <code>supergateway</code>:</p>
<pre><code>./nym-gateway init --id supergateway --host $(curl ifconfig.me) --wallet-address &lt;WALLET_ADDRESS&gt; --enabled-statistics true
</code></pre>
<p>The <code>$(curl ifconfig.me)</code> command above returns your IP automatically using an external service. Alternatively, you can enter your IP manually wish. If you do this, remember to enter your IP <strong>without</strong> any port information.</p>
<h3 id="nodes-gateway-setup-bonding-your-gateway"><a class="header" href="#nodes-gateway-setup-bonding-your-gateway">Bonding your gateway</a></h3>
<h4 id="nodes-gateway-setup-via-the-desktop-wallet"><a class="header" href="#nodes-gateway-setup-via-the-desktop-wallet">Via the Desktop wallet</a></h4>
<p>You can bond your gateway via the Desktop wallet. </p>
<ul>
<li>
<p>Open your wallet, and head to the <code>Bond</code> page, then select the node type and input your node details. Press <code>continue</code> </p>
</li>
<li>
<p>You will be asked to run a the <code>sign</code> command with your <code>gateway</code> - copy and paste the long signature as the value of <code>--contract-msg</code> and run it. It will look something like this: </p>
</li>
</ul>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
./nym-gateway sign --id upgrade_test --contract-msg 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a


      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-gateway - version 1.1.13)

    
&gt;&gt;&gt; attempting to sign 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a
&gt;&gt;&gt; decoding the message...
&gt;&gt;&gt; message to sign: {&quot;nonce&quot;:0,&quot;algorithm&quot;:&quot;ed25519&quot;,&quot;message_type&quot;:&quot;gateway-bonding&quot;,&quot;content&quot;:{&quot;sender&quot;:&quot;n1ewmme88q22l8syvgshqma02jv0vqrug9zq9dy8&quot;,&quot;proxy&quot;:null,&quot;funds&quot;:[{&quot;denom&quot;:&quot;unym&quot;,&quot;amount&quot;:&quot;100000000&quot;}],&quot;data&quot;:{&quot;gateway&quot;:{&quot;host&quot;:&quot;62.240.134.189&quot;,&quot;mix_port&quot;:1789,&quot;clients_port&quot;:9000,&quot;location&quot;:&quot;62.240.134.189&quot;,&quot;sphinx_key&quot;:&quot;FKbuN7mPdoCG9jA3CkAfXxC5X4rHhqeMVtmfRtJ3cFZd&quot;,&quot;identity_key&quot;:&quot;3RoAhR8gEdfBETMjm2vbMFzKddxXDdE9ygBAnJHWqSzD&quot;,&quot;version&quot;:&quot;1.1.13&quot;}}}}
```
</code></pre>
<ul>
<li>Copy the resulting signature:</li>
</ul>
<pre><code>&gt;&gt;&gt; The base58-encoded signature is:
2SPDjLjX4b6XEtkgG7yD8Znsb1xycL1edFvRK4JcVnPsM9k6HXEUUeVS6rswRiYxoj1bMgiRKyPDwiksiuyxu8Xi
</code></pre>
<ul>
<li>And paste it into the wallet nodal, then confirm the transaction.</li>
</ul>
<p><img src="nodes/../images/wallet-sign.png" alt="Paste Signature" /></p>
<ul>
<li>Your gateway is now bonded. </li>
</ul>
<blockquote>
<p>You are asked to <code>sign</code> a transaction on bonding so that the mixnet smart contract is able to map your nym address to your node. This allows us to create a nonce for each account and defend against replay attacks.</p>
</blockquote>
<h4 id="nodes-gateway-setup-via-the-cli-power-users"><a class="header" href="#nodes-gateway-setup-via-the-cli-power-users">Via the CLI (power users)</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="#tools-nym-cli-bond-a-gateway">relevant section in the Nym CLI</a> docs.</p>
<h3 id="nodes-gateway-setup-running-your-gateway"><a class="header" href="#nodes-gateway-setup-running-your-gateway">Running your gateway</a></h3>
<p>The <code>run</code> command starts the gateway:</p>
<pre><code>./nym-gateway run --id supergateway
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">
```
Starting gateway supergateway...

To bond your gateway you will need to install the Nym wallet, go to https://nymtech.net/get-involved and select the Download button.
Select the correct version and install it to your machine. You will need to provide the following: 

Identity Key: 6jWSJZsQ888jwzi1CBfkHefiDdUEjgwfeMfJU4RNhDuk
Sphinx Key: HbqYJwjmtzDi4WzGp7ehj8Ns394sRvJnxtanX28upon
Host: 62.240.134.46 (bind address: 62.240.134.46)
Version: 1.1.
Mix Port: 1789, Clients port: 9000
Data store is at: &quot;/home/mx/.nym/gateways/supergateway/data/db.sqlite&quot;
2022-04-27T16:04:33.831Z INFO  nym_gateway::node &gt; Starting nym gateway!
2022-04-27T16:04:34.268Z INFO  nym_gateway::node &gt; Starting mix packet forwarder...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node &gt; Starting mix socket listener...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node::mixnet_handling::receiver::listener &gt; Running mix listener on &quot;62.240.134.46:1789&quot;
2022-04-27T16:04:34.269Z INFO  nym_gateway::node              
&gt; Starting client [web]socket listener...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node                                      &gt; Finished nym gateway startup procedure - it should now be able to receive mix and client traffic!

```
</code></pre>
<h3 id="nodes-gateway-setup-upgrading-your-gateway"><a class="header" href="#nodes-gateway-setup-upgrading-your-gateway">Upgrading your gateway</a></h3>
<p>Upgrading your node is a two-step process:</p>
<ul>
<li>Updating the binary and <code>config.toml</code> on your VPS</li>
<li>Updating the node information in the <a href="#nyx-mixnet-contract">mixnet smart contract</a>. <strong>This is the information that is present on the <a href="https://explorer.nymtech.net">mixnet explorer</a></strong>.</li>
</ul>
<blockquote>
<p>These instructions are specifically regarding upgrading your gateway binary from one version to another. If you want to change node information such as the listening port, you can do this by clicking the <code>node settings</code> tab in the <code>bond</code> page of the wallet.</p>
</blockquote>
<h4 id="nodes-gateway-setup-step-1-upgrading-your-binary"><a class="header" href="#nodes-gateway-setup-step-1-upgrading-your-binary">Step 1: upgrading your binary</a></h4>
<p>Follow these steps to upgrade your binary and update its config file:</p>
<ul>
<li>pause your gateway process.</li>
<li>replace the existing binary with the newest binary (which you can either compile yourself or grab from our <a href="https://github.com/nymtech/nym/releases">releases page</a>).</li>
<li>re-run <code>init</code> with the same values as you used initially. <strong>This will just update the config file, it will not overwrite existing keys</strong>.</li>
<li>restart your gateway process with the new binary.</li>
</ul>
<blockquote>
<p>Do <strong>not</strong> use the <code>upgrade</code> command: there is a known error with the command that will be fixed in a subsequent release.</p>
</blockquote>
<h4 id="nodes-gateway-setup-step-2-updating-your-node-information-in-the-smart-contract"><a class="header" href="#nodes-gateway-setup-step-2-updating-your-node-information-in-the-smart-contract">Step 2: updating your node information in the smart contract</a></h4>
<p>Follow these steps to update the information about your node which is publically avaliable from the <a href="https://validator.nymtech.net/api/swagger/index.html">Nym API</a> and information displayed on the <a href="https://explorer.nymtech.net">mixnet explorer</a>.</p>
<p>You can either do this graphically via the Desktop Wallet, or the CLI.</p>
<h4 id="nodes-gateway-setup-updating-node-information-via-the-desktop-wallet"><a class="header" href="#nodes-gateway-setup-updating-node-information-via-the-desktop-wallet">Updating node information via the Desktop Wallet</a></h4>
<ul>
<li>
<p>Navigate to the <code>Bonding</code> page and click the <code>Node Settings</code> link in the top right corner:
<img src="nodes/../images/wallet-screenshots/bonding.png" alt="Bonding page" /></p>
</li>
<li>
<p>Update the fields in the <code>Node Settings</code> page and click <code>Submit changes to the blockchain</code>.
<img src="nodes/../images/wallet-screenshots/node_settings.png" alt="Node Settings Page" /></p>
</li>
</ul>
<h4 id="nodes-gateway-setup-updating-node-information-via-the-cli"><a class="header" href="#nodes-gateway-setup-updating-node-information-via-the-cli">Updating node information via the CLI</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="#tools-nym-cli-upgrade-a-mix-node">relevant section in the Nym CLI</a> docs.</p>
<h2 id="nodes-gateway-setup-vps-setup-and-automation"><a class="header" href="#nodes-gateway-setup-vps-setup-and-automation">VPS Setup and Automation</a></h2>
<h3 id="nodes-gateway-setup-configure-your-firewall"><a class="header" href="#nodes-gateway-setup-configure-your-firewall">Configure your firewall</a></h3>
<p>Although your gateway is now ready to receive traffic, your server may not be - the following commands will allow you to set up a properly configured firewall using <code>ufw</code>:</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your gateway's p2p port, as well as ports for ssh and incoming traffic connections:</p>
<pre><code>sudo ufw allow 1789,22,9000/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<p>For more information about your gateway's port configuration, check the <a href="#nodes-gateway-setup-gateway-port-reference">gateway port reference table</a> below.</p>
<h3 id="nodes-gateway-setup-automating-your-gateway-with-systemd"><a class="header" href="#nodes-gateway-setup-automating-your-gateway-with-systemd">Automating your gateway with systemd</a></h3>
<p>Although it's not totally necessary, it's useful to have the gateway automatically start at system boot time. Here's a systemd service file to do that:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Gateway ({{platform_release_version}})
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym
LimitNOFILE=65536
ExecStart=/home/nym/nym-gateway run --id supergateway
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Put the above file onto your system at <code>/etc/systemd/system/nym-gateway.service</code>.</p>
<p>Change the path in <code>ExecStart</code> to point at your gateway binary (<code>nym-gateway</code>), and the <code>User</code> so it is the user you are running as.</p>
<p>If you have built nym on your server, and your username is <code>jetpanther</code>, then the start command might look like this:</p>
<p><code>ExecStart=/home/jetpanther/nym/target/release/nym-gateway run --id your-id</code>. Basically, you want the full <code>/path/to/nym-gateway run --id whatever-your-node-id-is</code></p>
<p>Then run:</p>
<pre><code>systemctl enable nym-gateway.service
</code></pre>
<p>Start your node:</p>
<pre><code>service nym-gateway start
</code></pre>
<p>This will cause your node to start at system boot time. If you restart your machine, the node will come back up automatically.</p>
<p>You can also do <code>service nym-gateway stop</code> or <code>service nym-gateway restart</code>.</p>
<p>Note: if you make any changes to your systemd script after you've enabled it, you will need to run:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>This lets your operating system know it's ok to reload the service configuration.</p>
<h2 id="nodes-gateway-setup-gateway-related-validator-api-endpoints"><a class="header" href="#nodes-gateway-setup-gateway-related-validator-api-endpoints">Gateway related Validator API endpoints</a></h2>
<p>Numerous gateway related API endpoints are documented on the Validator API's <a href="https://validator.nymtech.net/api/swagger/index.html">Swagger Documentation</a>. There you can also try out various requests from your broswer, and download the response from the API. Swagger will also show you what commands it is running, so that you can run these from an app or from your CLI if you prefer. </p>
<h2 id="nodes-gateway-setup-ports"><a class="header" href="#nodes-gateway-setup-ports">Ports</a></h2>
<p>All gateway specific port configuration can be found in <code>$HOME/.nym/gateways/&lt;your-id&gt;/config/config.toml</code>. If you do edit any port configs, remember to restart your gateway.</p>
<h3 id="nodes-gateway-setup-gateway-port-reference"><a class="header" href="#nodes-gateway-setup-gateway-port-reference">Gateway port reference</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td>1789</td><td>Listen for Mixnet traffic</td></tr>
<tr><td>9000</td><td>Listen for Client traffic</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><div id="nodes-network-requester-setup"></div><h1 id="nodes-network-requester-setup-network-requesters"><a class="header" href="#nodes-network-requester-setup-network-requesters">Network Requesters</a></h1>
<blockquote>
<p>The Nym network requester was built in the <a href="#binaries-building-nym">building nym</a> section. If you haven't yet built Nym and want to run the code on this page, go there first.</p>
</blockquote>
<p>If you have access to a server, you can run the network requester, which allows Nym users to send outbound requests from their local machine through the mixnet to a server, which then makes the request on their behalf, shielding them (and their metadata) from clearnet, untrusted and unknown infrastructure, such as email or message client servers.</p>
<blockquote>
<p>As of <code>v1.1.10</code>, the network requester longer requires a separate nym client instance for it to function, as it has a client embedded within the binary running as a single process.</p>
</blockquote>
<h2 id="nodes-network-requester-setup-network-requester-whitelist"><a class="header" href="#nodes-network-requester-setup-network-requester-whitelist">Network Requester Whitelist</a></h2>
<p>The network requester is <strong>not</strong> an open proxy. It uses a file called <code>allowed.list</code> (located in <code>~/.nym/service-providers/network-requester/&lt;network-requester-id&gt;/</code>) as a whitelist for outbound requests.</p>
<p>Any request to a URL which is not on this list will be blocked.</p>
<p>On startup, if this file is not present, the requester will grab the default whitelist from <a href="https://nymtech.net/.wellknown/network-requester/standard-allowed-list.txt">here</a> automatically.</p>
<p>This default whitelist is useful for knowing that the majority of network requesters are able to support certain apps 'out of the box'.</p>
<p><strong>Operators of a network requester are of course free to edit this file and add the URLs of services they wish to support to it!</strong> You can find instructions below on adding your own URLs or IPs to this list.</p>
<p>The domains and IPs on the default whitelist can be broken down by application as follows:</p>
<pre><code># Keybase
keybaseapi.com
s3.amazonaws.com
amazonaws.com
twitter.com
keybase.io
gist.githubusercontent.com

# Used to for uptime healthcheck (see the section on testing your requester below for more)
nymtech.net

# Blockstream Green Bitcoin Wallet
blockstream.info
blockstream.com
greenaddress.it

# Electrum Bitcoin Wallet
electrum.org

# Helios Ethereum Client
alchemy.com
lightclientdata.org
p2pify.com

# Telegram - these IPs have been copied from https://core.telegram.org/resources/cidr.txt as Telegram does
# not seem to route by domain as the other apps on this list do
91.108.56.0/22
91.108.4.0/22
91.108.8.0/22
91.108.16.0/22
91.108.12.0/22
149.154.160.0/20
91.105.192.0/23
91.108.20.0/22
185.76.151.0/24
2001:b28:f23d::/48
2001:b28:f23f::/48
2001:67c:4e8::/48
2001:b28:f23c::/48
2a0a:f280::/32
</code></pre>
<h2 id="nodes-network-requester-setup-network-requester-directory"><a class="header" href="#nodes-network-requester-setup-network-requester-directory">Network Requester Directory</a></h2>
<p>You can find a list of Network Requesters running the default whitelist <a href="https://explorer.nymtech.net/network-components/service-providers">here</a>. This list comprises of the NRs running as infrastructure for NymConnect.</p>
<blockquote>
<p>We are currently working on a smart-contract based solution more in line with how Mix nodes and Gateways annouce themselves to the network.</p>
</blockquote>
<h2 id="nodes-network-requester-setup-initializing-and-running-your-network-requester-standard-mode"><a class="header" href="#nodes-network-requester-setup-initializing-and-running-your-network-requester-standard-mode">Initializing and running your network requester (standard mode)</a></h2>
<pre><code class="language-admonish caution">If you are following these instructions to set up a requester as part of a Service Grant, **ignore these instructions and jump to the step [below](./network-requester-setup.md#running-your-network-requester-stats-mode)**
</code></pre>
<p>The network-requester needs to be initialized before it can be run. This is required for the embedded nym-client to connect successfully to the mixnet. We want to specify an <code>id</code> using the <code>--id</code> command and give it a value of your choosing. The following command will achieve that:</p>
<pre><code> ./nym-network-requester init --id example
</code></pre>
<p>Now that we have initialized our network-requester, we can start it with the following command:</p>
<pre><code> ./nym-network-requester run --id example
</code></pre>
<p>Expected output:</p>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-network-requester - version {{platform_release_version}})


Initialising client...
Registering with new gateway
 2023-02-23T11:56:42.370Z INFO  gateway_client::client &gt; the gateway is using exactly the same protocol version as we are. We're good to continue!
 2023-02-23T11:56:42.375Z INFO  config                 &gt; Configuration file will be saved to &quot;/Users/myusername/.nym/service-providers/network-requester/example/config/config.toml&quot;
Saved configuration file to &quot;/Users/myusername/.nym/service-providers/network-requester/example/config/config.toml&quot;
Using gateway: 3zd3wrCK8Dz5TXrcvk5dG5s9EEdf4Ck1v9VgBPMMFVkR
Client configuration completed.

Version: {{platform_release_version}}
ID: example
Identity key: 3wqJJb1Xj9876KBPnGuSZnN5pCWH6id6wkzS2tL6eZEh
Encryption: 4KfgDmFhwbzLBWcnSEGKgTxGwfJzGqofSVTJKiAcokNX
Gateway ID: 3zd3wrCK8Dz5TXrcvk5dG5s9EEdf4Ck1v9VgBPMMFVkR
Gateway: ws://116.203.88.95:9000

The address of this client is: 3wqJJb1Xj9876KBPnGuSZnN5pCWH6id6wkzS2tL6eZEh.4KfgDmFhwbzLBWcnSEGKgTxGwfJzGqofSVTJKiAcokNX@3zd3wrCK8Dz5TXrcvk5dG5s9EEdf4Ck1v9VgBPMMFVkR
```
</code></pre>
<p>When running the above commands, the <code>./nym-network-requester --help </code> command can be used to show a list of available parameters.</p>
<h2 id="nodes-network-requester-setup-running-your-network-requester-stats-mode"><a class="header" href="#nodes-network-requester-setup-running-your-network-requester-stats-mode">Running your network requester (stats mode)</a></h2>
<p>Once an network-requester has been initialized, we can start it with the following command.</p>
<pre><code> ./nym-network-requester run --id example --enable-statistics
</code></pre>
<p>Expected output:</p>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-network-requester - version {{platform_release_version}})




THE NETWORK REQUESTER STATISTICS ARE ENABLED. IT WILL COLLECT AND SEND ANONYMIZED STATISTICS TO A CENTRAL SERVER. PLEASE QUIT IF YOU DON'T WANT THIS TO HAPPEN AND START WITHOUT THE enable-statistics FLAG .


 2023-02-23T12:08:18.296Z INFO  nym_network_requester::cli::run &gt; Starting socks5 service provider
 ```
</code></pre>
<p>The <code>--enable-statistics</code> flag starts the node in a mode which reports very minimal usage statistics - the amount of bytes sent to a service, and the number of requests - to a service we run, as part of the Nym Connect Beta testing.</p>
<p>Use the following command to ping our stats service to see what it has recorded (remember to change the <code>'until'</code> date):</p>
<pre><code>curl -d '{&quot;since&quot;:&quot;2022-07-26T12:46:00.000000+00:00&quot;, &quot;until&quot;:&quot;2022-07-26T12:57:00.000000+00:00&quot;}' -H &quot;Content-Type: application/json&quot; -X POST http://mainnet-stats.nymte.ch:8090/v1/all-statistics
</code></pre>
<p>Expected output:</p>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
      [
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;chat-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:294,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:55:44.459257091&quot;
            }
        },
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;chat-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:890,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:56:44.459333653&quot;
            }
        },
        {
            &quot;Service&quot;:{
              &quot;requested_service&quot;:&quot;api-0.core.keybaseapi.com:443&quot;,
              &quot;request_processed_bytes&quot;:1473,
              &quot;response_processed_bytes&quot;:0,
              &quot;interval_seconds&quot;:60,
              &quot;timestamp&quot;:&quot;2022-07-26 12:56:44.459333653&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;Fo4f4SQLdoyoGkFae5TpVhRVoXCF8UiypLVGtGjujVPf&quot;,
              &quot;inbox_count&quot;:8,
              &quot;timestamp&quot;:&quot;2022-07-26 12:46:34.148075290&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;2BuMSfMW3zpeAjKXyKLhmY4QW1DXurrtSPEJ6CjX3SEh&quot;,
              &quot;inbox_count&quot;:6,
              &quot;timestamp&quot;:&quot;2022-07-26 12:46:51.578765358&quot;
            }
        },
        {
            &quot;Gateway&quot;:{
              &quot;gateway_id&quot;:&quot;Fo4f4SQLdoyoGkFae5TpVhRVoXCF8UiypLVGtGjujVPf&quot;,
              &quot;inbox_count&quot;:8,
              &quot;timestamp&quot;:&quot;2022-07-26 12:47:34.149270862&quot;
            }
        }
      ]
```
</code></pre>
<h2 id="nodes-network-requester-setup-upgrading-your-network-requester"><a class="header" href="#nodes-network-requester-setup-upgrading-your-network-requester">Upgrading your network requester</a></h2>
<p>You can upgrade your network requester by following these steps:</p>
<ul>
<li>stop your network requester service</li>
<li>replace the old binary with the new binary</li>
<li>restart your service using the commands in the previous section of the document</li>
</ul>
<h3 id="nodes-network-requester-setup-upgrading-to-version-1110"><a class="header" href="#nodes-network-requester-setup-upgrading-to-version-1110">Upgrading to version 1.1.10</a></h3>
<p>In the previous version of the network-requester, users were required to run a nym-client along side it to function. As of <code>v1.1.10</code>, the network-requester now has a nym client embedded into the binary, so it can run standalone.</p>
<p>If you are running an existing network requester registered with nym-connect, upgrading requires you move your old keys over to the new network requester configuration. We suggest following these instructions carefully to ensure a smooth transition.</p>
<p>Initiate the new network requester:</p>
<pre><code>nym-network-requester init --id mynetworkrequester
</code></pre>
<p>Copy the old keys from your client to the network-requester configuration that was created above:</p>
<pre><code>cp -vr ~/.nym/clients/myoldclient/data/* ~/.nym/service-providers/network-requester/mynetworkrequester/data
</code></pre>
<p>Edit the gateway configuration to match what you used on your client. Specifically, edit the configuration file at:</p>
<pre><code>~/.nym/service-providers/network-requester/mynetworkrequester/config/config.toml
</code></pre>
<p>Ensure that the fields <code>gateway_id</code>, <code>gateway_owner</code>, <code>gateway_listener</code> in the new config match those in the old client config at:</p>
<pre><code>~/.nym/clients/myoldclient/config/config.toml
</code></pre>
<h2 id="nodes-network-requester-setup-automating-your-network-requester-with-systemd"><a class="header" href="#nodes-network-requester-setup-automating-your-network-requester-with-systemd">Automating your network requester with systemd</a></h2>
<p>Stop the running process with <code>CTRL-C</code>, and create a service file for the requester as we did with our client instance previously at <code>/etc/systemd/system/nym-network-requester.service</code>:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Network Requester ({{platform_release_version}})
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym # replace this with whatever user you wish
LimitNOFILE=65536
# remember to add the `--enable-statistics` flag if running as part of a service grant and check the path to your nym-network-requester binary
ExecStart=/home/nym/nym-network-requester run --id &lt;your_id&gt;
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Now enable and start your requester:</p>
<pre><code>systemctl enable nym-network-requester.service
systemctl start nym-network-requester.service

# you can always check your requester has succesfully started with:
systemctl status nym-network-requester.service
</code></pre>
<h2 id="nodes-network-requester-setup-vps-setup"><a class="header" href="#nodes-network-requester-setup-vps-setup">VPS Setup</a></h2>
<h3 id="nodes-network-requester-setup-configure-your-firewall"><a class="header" href="#nodes-network-requester-setup-configure-your-firewall">Configure your firewall</a></h3>
<p>Although your requester is now ready to receive traffic, your server may not be - the following commands will allow you to set up a properly configured firewall using <code>ufw</code>:</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your requester's p2p port, as well as ports for ssh and incoming traffic connections:</p>
<pre><code>sudo ufw allow 1789,22,9000/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<p>For more information about your requester's port configuration, check the <a href="#nodes-network-requester-setup-requester-port-reference">requester port reference table</a> below.</p>
<h2 id="nodes-network-requester-setup-using-your-network-requester"><a class="header" href="#nodes-network-requester-setup-using-your-network-requester">Using your network requester</a></h2>
<pre><code class="language-admonish caution">Service Grant grantees should only whitelist a single application - edit your `allowed.list` accordingly!
</code></pre>
<p>Is this safe to do? If it was an open proxy, this would be unsafe, because any Nym user could make network requests to any system on the internet.</p>
<p>To make things a bit less stressful for administrators, the Network Requester drops all incoming requests by default. In order for it to make requests, you need to add specific domains to the <code>allowed.list</code> file at <code>$HOME/.nym/service-providers/network-requester/allowed.list</code>.</p>
<h3 id="nodes-network-requester-setup-supporting-custom-domains-with-your-network-requester"><a class="header" href="#nodes-network-requester-setup-supporting-custom-domains-with-your-network-requester">Supporting custom domains with your network requester</a></h3>
<p>It is easy to add new domains and services to your network requester - simply find out which endpoints (both URLs and raw IP addresses are supported) you need to whitelist, and then add these endpoints to your <code>allowed.list</code> as such:</p>
<pre><code>cp service-providers/network-requester/allowed.list.sample ~/.nym/service-providers/network-requester/allowed.list
</code></pre>
<p>Those URLs will let through requests for the Blockstream Green and Electrum cryptocurrency wallets, as well as the KeyBase chat client.</p>
<blockquote>
<p>If you change your <code>allowed.list</code>, make sure you restart the <code>nym-network-requester.service</code> to pick up the new allowed request list</p>
</blockquote>
<h3 id="nodes-network-requester-setup-adding-urls-for-other-clients"><a class="header" href="#nodes-network-requester-setup-adding-urls-for-other-clients">Adding URLs for other clients</a></h3>
<p>It would suck if Nym was restricted to only three clients. How can we add support for a new application? It's fairly easy to do.</p>
<p>Have a look in your nym-network-requester config directory:</p>
<pre><code>ls $HOME/.nym/service-providers/network-requester/

# returns: allowed.list  unknown.list
</code></pre>
<p>We already know that <code>allowed.list</code> is what lets requests go through. All unknown requests are logged to <code>unknown.list</code>. If you want to try using a new client type, just start the new application, point it at your local SOCKS5 proxy (configured to use your remote <code>nym-network-requester</code>), and keep copying URLs from <code>unknown.list</code> into <code>allowed.list</code> (it may take multiple tries until you get all of them, depending on the complexity of the application).</p>
<p>If you add support for a new application, we'd love to hear about it: let us know or submit a commented pull request on <code>allowed.list.sample</code>.</p>
<blockquote>
<p>If you are adding custom domains, please note that whilst they may appear in the logs of your network-requester as something like <code>api-0.core.keybaseapi.com:443</code>, you <strong>only need</strong> to include the main domain name, in this instance <code>keybaseapi.com</code></p>
</blockquote>
<h3 id="nodes-network-requester-setup-running-an-open-proxy"><a class="header" href="#nodes-network-requester-setup-running-an-open-proxy">Running an open proxy</a></h3>
<p>If you <em>really</em> want to run an open proxy, perhaps for testing purposes for your own use or among a small group of trusted friends, it is possible to do so. You can disable network checks by passing the flag <code>--open-proxy</code> flag when you run it. If you run in this configuration, you do so at your own risk.</p>
<h2 id="nodes-network-requester-setup-testing-your-network-requester"><a class="header" href="#nodes-network-requester-setup-testing-your-network-requester">Testing your network requester</a></h2>
<ol>
<li>
<p>Add <code>nymtech.net</code> to your <code>allowed.list</code> (remember to restart your network requester).</p>
</li>
<li>
<p>Ensure that your network-requester is initialized and running.</p>
</li>
<li>
<p>In another terminal window, run the following:</p>
</li>
</ol>
<pre><code>curl -x socks5h://localhost:1080 https://nymtech.net/.wellknown/connect/healthcheck.json
</code></pre>
<p>This command should return the following:</p>
<pre><code>{ &quot;status&quot;: &quot;ok&quot; }
</code></pre>
<h2 id="nodes-network-requester-setup-ports"><a class="header" href="#nodes-network-requester-setup-ports">Ports</a></h2>
<h3 id="nodes-network-requester-setup-requester-port-reference"><a class="header" href="#nodes-network-requester-setup-requester-port-reference">Requester port reference</a></h3>
<p>All network-requester-specific port configuration can be found in <code>$HOME/.nym/service-providers/network-requester/&lt;YOUR_ID&gt;/config/config.toml</code>. If you do edit any port configs, remember to restart your client and requester processes.</p>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td>9000</td><td>Listen for Client traffic</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><div id="nodes-validator-setup"></div><h1 id="nodes-validator-setup-validators"><a class="header" href="#nodes-validator-setup-validators">Validators</a></h1>
<p>The validator is built using <a href="https://cosmos.network">Cosmos SDK</a> and <a href="https://tendermint.com">Tendermint</a>, with a <a href="https://cosmwasm.com">CosmWasm</a> smart contract controlling the directory service, node bonding, and delegated mixnet staking.</p>
<h2 id="nodes-validator-setup-building-your-validator"><a class="header" href="#nodes-validator-setup-building-your-validator">Building your validator</a></h2>
<h3 id="nodes-validator-setup-prerequisites"><a class="header" href="#nodes-validator-setup-prerequisites">Prerequisites</a></h3>
<ul>
<li><code>git</code></li>
</ul>
<pre><code>sudo apt update
sudo apt install git
</code></pre>
<p>Verify <code>git</code> is installed with:</p>
<pre><code>git version
# Should return: git version X.Y.Z
</code></pre>
<ul>
<li><code>Go</code></li>
</ul>
<p><code>Go</code> can be installed via the following commands (taken from the <a href="https://github.com/Agoric/agoric-sdk/wiki/Validator-Guide-for-Incentivized-Testnet#install-go">Agoric SDK docs</a>):</p>
<pre><code># First remove any existing old Go installation
sudo rm -rf /usr/local/go

# Install correct Go version
curl https://dl.google.com/go/go1.19.2.linux-amd64.tar.gz | sudo tar -C/usr/local -zxvf -

# Update environment variables to include go
cat &lt;&lt;'EOF' &gt;&gt;$HOME/.profile
export GOROOT=/usr/local/go
export GOPATH=$HOME/go
export GO111MODULE=on
export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin
EOF
source $HOME/.profile
</code></pre>
<p>Verify <code>Go</code> is installed with:</p>
<pre><code>go version
# Should return: go version go1.19.2 linux/amd64
</code></pre>
<ul>
<li><code>gcc</code></li>
</ul>
<p><code>gcc</code> can be installed with:</p>
<pre><code>sudo apt install build-essential
# Optional additional manual pages can be installed with:
sudo apt-get install manpages-dev
</code></pre>
<p>Verify <code>gcc</code> is installed with:</p>
<pre><code>gcc --version
</code></pre>
<p>Which should return something like:</p>
<pre><code>gcc (Ubuntu 7.4.0-1ubuntu1~18.04) 7.4.0
Copyright (C) 2017 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre>
<h3 id="nodes-validator-setup-building-your-validator-1"><a class="header" href="#nodes-validator-setup-building-your-validator-1">Building your validator</a></h3>
<p>We use the <code>wasmd</code> version of the Cosmos validator to run our blockchain. First define the correct variables by selecting the correct network below, as the instructions, files, and endpoints differ in the instructions from here on in: </p>
<pre><code># Mainnet 
BECH32_PREFIX=n
WASMD_VERSION=v0.26.1
NYM_APP_NAME=nyxd
</code></pre>
<pre><code># Sandbox
BECH32_PREFIX=nymt
WASMD_VERSION=v0.26.1
NYM_APP_NAME=nymd
</code></pre>
<p>Then run this to clone, compile, and build your validator:</p>
<pre><code>git clone https://github.com/nymtech/nyxd.git
cd nyxd
git checkout ${WASMD_VERSION}
mkdir build
go build -o ./build/${NYM_APP_NAME} -mod=readonly -tags &quot;netgo,ledger&quot; -ldflags &quot;-X github.com/cosmos/cosmos-sdk/version.Name=${NYM_APP_NAME} -X github.com/cosmos/cosmos-sdk/version.AppName=${NYM_APP_NAME} -X github.com/CosmWasm/wasmd/app.NodeDir=.${NYM_APP_NAME} -X github.com/cosmos/cosmos-sdk/version.Version=${WASMD_VERSION} -X github.com/cosmos/cosmos-sdk/version.Commit=2582f0aab7b2cbf66ade066fe570a4622cf0b098 -X github.com/CosmWasm/wasmd/app.Bech32Prefix=${BECH32_PREFIX} -X \&quot;github.com/cosmos/cosmos-sdk/version.BuildTags=netgo,ledger\&quot;&quot; -trimpath ./cmd/wasmd
</code></pre>
<p>At this point, you will have a copy of the <code>nymd</code> (for sandbox) or <code>nyxd</code> (for mainnet) binary in your <code>build/</code> directory. Test that it's compiled properly by running:</p>
<pre><code>./build/${NYM_APP_NAME}
</code></pre>
<p>You should see help text print out.</p>
<p>Both the <code>nymd</code> or <code>nyxd</code> binary and the <code>libwasmvm.so</code> shared object library binary have been compiled. <code>libwasmvm.so</code> is the wasm virtual machine which is needed to execute smart contracts.</p>
<pre><code class="language-admonish caution">If you have compiled these files locally you need to upload both of them to the server on which the validator will run. **If you have instead compiled them on the server skip to the step outlining setting `LD_LIBRARY PATH` below.**
</code></pre>
<p>To locate these files on your local system run (replace <code>nyxd</code> with <code>nymd</code> for Sandbox testnet builds):</p>
<pre><code>WASMVM_SO=$(ldd build/nyxd | grep libwasmvm.so | awk '{ print $3 }')
ls ${WASMVM_SO}      
</code></pre>
<p>This will output something like:</p>
<pre><code>'/home/username/go/pkg/mod/github.com/!cosm!wasm/wasmvm@v0.13.0/api/libwasmvm.so'
</code></pre>
<pre><code class="language-admonish note">
if you are on Mac OSX use this command instead:
```
WASMVM_SO=$(otool -L build/nymd | grep libwasmvm.so | awk '{ print $3 }')
ls ${WASMVM_SO}
```
To get the location of the `libwasmvm.so` file.
</code></pre>
<p>When you upload your <code>nymd</code>/<code>nyxd</code> binary, you'll need to tell it where <code>libwasmvm.so</code> is when you start your validator, or it will not run. If you have compiled them on your server then this is not necessary, as the compiled <code>nymd</code>/<code>nyxd</code> already has access to <code>libwasmvm.so</code>.</p>
<p>Upload both <code>nymd</code>/<code>nyxd</code> and <code>libwasmvm.so</code> to your validator machine. If <code>nymd</code>/<code>nyxd</code> can't find <code>libwasmvm.so</code> you will see an error like the following:</p>
<pre><code>./nyxd: error while loading shared libraries: libwasmvm.so: cannot open shared object file: No such file or directory
</code></pre>
<p>You'll need to set <code>LD_LIBRARY_PATH</code> in your user's <code>~/.bashrc</code> file, and add that to our path. Replace <code>/home/youruser/path/to/nym/binaries</code> in the command below to the locations of <code>nymd</code> and <code>libwasmvm.so</code> and run it. If you have compiled these on the server, they will be in the <code>build/</code> folder:</p>
<pre><code>NYX_BINARIES=/home/youruser/path/to/nym/binaries
# if you are using another shell like zsh replace '.bashrc' with the relevant config file
echo 'export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:'NYX_BINARIES &gt;&gt; ~/.bashrc 
echo 'export PATH=$PATH:'${NYX_BINARIES} &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p>Test everything worked:</p>
<pre><code># Mainnet 
nyxd
</code></pre>
<pre><code># Sandbox 
nymd
</code></pre>
<p>This should return the regular help text.</p>
<h3 id="nodes-validator-setup-initialising-your-validator"><a class="header" href="#nodes-validator-setup-initialising-your-validator">Initialising your validator</a></h3>
<p>Prerequisites:</p>
<ul>
<li>FQDN Domain name</li>
<li>IPv4 and IPv6 connectivity</li>
</ul>
<p>Choose a name for your validator and use it in place of <code>&lt;ID&gt;</code> in the following command:</p>
<pre><code>nyxd init &lt;ID&gt; --chain-id=nyx 
</code></pre>
<pre><code class="language-admonish caution">`init` generates `priv_validator_key.json` and `node_key.json`.  

If you have already set up a validator on a previous testnet, **make sure to back up the key located at** 
`~/.nymd/config/priv_validator_key.json`. 

If you don't save the validator key, then it can't sign blocks and will be jailed all the time, and
there is no way to deterministically (re)generate this key.  
</code></pre>
<p>At this point, you have a new validator, with its own genesis file located at <code>$HOME/${NYM_APP_NAME}/config/genesis.json</code>. You will need to replace the contents of that file that with either the Nyx Mainnet <a href="https://nymtech.net/genesis/genesis.json">genesis file</a> or Sandbox Sandbox Testnet <a href="https://nymtech.net/testnets/sandbox/genesis.json">genesis file</a>. </p>
<p>You can use the following command to download them for the correct network:</p>
<pre><code># Mainnet 
wget  -O $HOME/.nyxd/config/genesis.json https://nymtech.net/genesis/genesis.json
</code></pre>
<pre><code># Sandbox Testnet
wget  -O $HOME/.nymd/config/genesis.json https://sandbox-validator1.nymtech.net/genesis
</code></pre>
<h3 id="nodes-validator-setup-configtoml-configuration"><a class="header" href="#nodes-validator-setup-configtoml-configuration"><code>config.toml</code> configuration</a></h3>
<p>Edit the following config options in <code>$HOME/.nyxd/config/config.toml</code> to match the information below for your network:</p>
<pre><code># Mainnet
persistent_peers = &quot;ee03a6777fb76a2efd0106c3769daaa064a3fcb5@51.79.21.187:26656&quot; 
create_empty_blocks = false 
laddr = &quot;tcp://0.0.0.0:26656&quot; 
</code></pre>
<pre><code># Sandbox Testnet 
cors_allowed_origins = [&quot;*&quot;] 
persistent_peers = &quot;d24ee58d85a65d34ad5adfc3302c3614b36e8b14@sandbox-validator.nymtech.net:26656&quot; 
create_empty_blocks = false 
laddr = &quot;tcp://0.0.0.0:26656&quot; 
</code></pre>
<p>These affect the following: </p>
<ul>
<li><code>persistent_peers = &quot;&lt;PEER_ADDRESS&gt;@&lt;DOMAIN&gt;.nymtech.net:26656&quot;</code> allows your validator to start pulling blocks from other validators</li>
<li><code>create_empty_blocks = false</code> will save space </li>
<li><code>laddr = &quot;tcp://0.0.0.0:26656&quot;</code> is in your p2p configuration options </li>
</ul>
<p>Optionally, if you want to enable <a href="https://prometheus.io/">Prometheus</a> metrics then the following must also match in the <code>config.toml</code>:</p>
<ul>
<li><code>prometheus = true</code></li>
<li><code>prometheus_listen_addr = &quot;:26660&quot;</code></li>
</ul>
<blockquote>
<p>Remember to enable metrics in the 'Configuring Prometheus metrics' section below as well.</p>
</blockquote>
<p>And if you wish to add a human-readable moniker to your node:</p>
<ul>
<li><code>moniker = &quot;yourname&quot;</code></li>
</ul>
<p>Finally, if you plan on using <a href="https://cockpit-project.org/documentation.html">Cockpit</a> on your server, change the <code>grpc</code> port from <code>9090</code> as this is the port used by Cockpit.</p>
<h3 id="nodes-validator-setup-apptoml-configuration"><a class="header" href="#nodes-validator-setup-apptoml-configuration"><code>app.toml</code> configuration</a></h3>
<p>In the file <code>$HOME/.${NYM_APP_NAME}/config/app.toml</code>, set the following values:</p>
<pre><code># Mainnet 
minimum-gas-prices = &quot;0.025unym&quot; 
enable = true in the `[api]` section to get the API server running
</code></pre>
<pre><code># Sandbox Testnet
minimum-gas-prices = &quot;0.025unymt&quot; 
enable = true` in the `[api]` section to get the API server running
</code></pre>
<h3 id="nodes-validator-setup-setting-up-your-validators-admin-user"><a class="header" href="#nodes-validator-setup-setting-up-your-validators-admin-user">Setting up your validator's admin user</a></h3>
<p>You'll need an admin account to be in charge of your validator. Set that up with:</p>
<pre><code>${NYM_APP_NAME} keys add nyxd-admin
</code></pre>
<p>This will add keys for your administrator account to your system's keychain and log your name, address, public key, and mnemonic. As the instructions say, remember to <strong>write down your mnemonic</strong>.</p>
<p>You can get the admin account's address with:</p>
<pre><code>${NYM_APP_NAME} keys show nyxd-admin -a
</code></pre>
<p>Type in your keychain <strong>password</strong>, not the mnemonic, when asked. </p>
<h3 id="nodes-validator-setup-starting-your-validator"><a class="header" href="#nodes-validator-setup-starting-your-validator">Starting your validator</a></h3>
<p>Everything should now be ready to go. You've got the validator set up, all changes made in <code>config.toml</code> and <code>app.toml</code>, the Nym genesis file copied into place (replacing the initial auto-generated one). Now let's validate the whole setup:</p>
<pre><code>${NYM_APP_NAME} validate-genesis
</code></pre>
<p>If this check passes, you should receive the following output:</p>
<pre><code>File at /path/to/genesis.json is a valid genesis file
</code></pre>
<blockquote>
<p>If this test did not pass, check that you have replaced the contents of <code>/path/to/.nymd/config/genesis.json</code> with that of the correct genesis file.</p>
</blockquote>
<p>Before starting the validator, we will need to open the firewall ports:</p>
<pre><code># if ufw is not already installed:
sudo apt install ufw
sudo ufw enable
sudo ufw allow 1317,26656,26660,22,80,443/tcp
# to check everything worked
sudo ufw status
</code></pre>
<p>Ports <code>22</code>, <code>80</code>, and <code>443</code> are for ssh, http, and https connections respectively. The rest of the ports are documented <a href="https://docs.cosmos.network/v0.42/core/grpc_rest.html">here</a>.</p>
<p>For more information about your validator's port configuration, check the <a href="#nodes-validator-setup-validator-port-reference">validator port reference table</a> below.</p>
<blockquote>
<p>If you are planning to use <a href="https://cockpit-project.org/">Cockpit</a> on your validator server then you will have defined a different <code>grpc</code> port in your <code>config.toml</code> above: remember to open this port as well.</p>
</blockquote>
<p>Start the validator:</p>
<pre><code>${NYM_APP_NAME} start
</code></pre>
<p>Once your validator starts, it will start requesting blocks from other validators. This may take several hours. Once it's up to date, you can issue a request to join the validator set with the command below. </p>
<blockquote>
<p>If you are having trouble upgrading your validator binary, try replacing (or re-compile) the <code>libwasmvm.so</code> file and replace it on your validator server.</p>
</blockquote>
<pre><code class="language-admonish caution">When joining consensus, make sure that you do not disrupt (or worse - halt) the network by coming in with a disproportionately large amount of staked tokens. 

Please initially stake a small amount of tokens compared to existing validators, then delegate to yourself in tranches over time. 
</code></pre>
<pre><code># Mainnet 
nyxd tx staking create-validator
  --amount=10000000unyx
  --fees=0unyx 
  --pubkey=$(/home/youruser/path/to/nyxd/binaries/nyxd tendermint show-validator | jq -r '.[&quot;key&quot;]')
  --moniker=&quot;whatever you called your validator&quot;
  --chain-id=nyx
  --commission-rate=&quot;0.10&quot;
  --commission-max-rate=&quot;0.20&quot;
  --commission-max-change-rate=&quot;0.01&quot;
  --min-self-delegation=&quot;1&quot;
  --gas=&quot;auto&quot;
  --gas-adjustment=1.15
  --from=&quot;KEYRING_NAME&quot;
  --node https://rpc-1.nyx.nodes.guru:443     
</code></pre>
<pre><code># Sandbox Testnet 
nymd tx staking create-validator
  --amount=10000000unyxt
  --fees=5000unyxt
  --pubkey=$(/home/youruser/path/to/nym/binaries/nymd tendermint show-validator)
  --moniker=&quot;whatever you called your validator&quot;
  --chain-id=nym-sandbox
  --commission-rate=&quot;0.10&quot;
  --commission-max-rate=&quot;0.20&quot;
  --commission-max-change-rate=&quot;0.01&quot;
  --min-self-delegation=&quot;1&quot;
  --gas=&quot;auto&quot;
  --gas-adjustment=1.15
  --from=&quot;KEYRING_NAME&quot;
  --node https://sandbox-validator.nymtech.net:443 
</code></pre>
<p>You'll need either <code>unyxt</code> tokens on Sandbox, or <code>unyx</code> tokens on mainnet to perform this command.</p>
<blockquote>
<p>We are currently working towards building up a closed set of reputable validators. You can ask us for coins to get in, but please don't be offended if we say no - validators are part of our system's core security and we are starting out with people we already know or who have a solid reputation.</p>
</blockquote>
<p>If you want to edit some details for your node you will use a command like this:</p>
<pre><code># Mainnet
nymd tx staking edit-validator   
  --chain-id=nym   
  --moniker=&quot;whatever you called your validator&quot;
  --details=&quot;Nym validator&quot;   
  --security-contact=&quot;your email&quot;   
  --identity=&quot;your identity&quot;   
  --gas=&quot;auto&quot;   
  --gas-adjustment=1.15   
  --from=&quot;KEYRING_NAME&quot;
  --fees 2000unyx
</code></pre>
<pre><code># Sandbox Testnet
nymd tx staking edit-validator   
  --chain-id=nym-sandbox   
  --moniker=&quot;whatever you called your validator&quot;
  --details=&quot;Nym validator&quot;   
  --security-contact=&quot;your email&quot;   
  --identity=&quot;your identity&quot;   
  --gas=&quot;auto&quot;   
  --gas-adjustment=1.15   
  --from=&quot;KEYRING_NAME&quot;
  --fees 2000unyxt
</code></pre>
<p>With above command you can specify the <code>gpg</code> key last numbers (as used in <code>keybase</code>) as well as validator details and your email for security contact. </p>
<h3 id="nodes-validator-setup-automating-your-validator-with-systemd"><a class="header" href="#nodes-validator-setup-automating-your-validator-with-systemd">Automating your validator with systemd</a></h3>
<p>You will most likely want to automate your validator restarting if your server reboots. Below is a systemd unit file to place at <code>/etc/systemd/system/nymd.service</code>:</p>
<pre><code class="language-ini">[Unit]
Description=Nymd (1.1.0)
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym                                                          # change to your user
Type=simple
Environment=&quot;LD_LIBRARY_PATH=/home/youruser/path/to/nym/binaries&quot; # change to correct path
ExecStart=/home/youruser/path/to/nym/binaries/nymd start          # change to correct path
Restart=on-failure
RestartSec=30
LimitNOFILE=infinity

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Proceed to start it with:</p>
<pre><code>systemctl daemon-reload # to pickup the new unit file
systemctl enable nymd   # to enable the service
systemctl start nymd    # to actually start the service
journalctl -f           # to monitor system logs showing the service start
</code></pre>
<h3 id="nodes-validator-setup-installing-and-configuring-nginx-for-https"><a class="header" href="#nodes-validator-setup-installing-and-configuring-nginx-for-https">Installing and configuring nginx for HTTPS</a></h3>
<h4 id="nodes-validator-setup-setup"><a class="header" href="#nodes-validator-setup-setup">Setup</a></h4>
<p><a href="https://www.nginx.com/resources/glossary/nginx/#:~:text=NGINX%20is%20open%20source%20software,%2C%20media%20streaming%2C%20and%20more.&amp;text=In%20addition%20to%20its%20HTTP,%2C%20TCP%2C%20and%20UDP%20servers.">Nginx</a> is an open source software used for operating high-performance web servers. It allows us to set up reverse proxying on our validator server to improve performance and security.</p>
<p>Install <code>nginx</code> and allow the 'Nginx Full' rule in your firewall:</p>
<pre><code>sudo ufw allow 'Nginx Full'
</code></pre>
<p>Check nginx is running via systemctl:</p>
<pre><code>systemctl status nginx
</code></pre>
<p>Which should return:</p>
<pre><code>● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2018-04-20 16:08:19 UTC; 3 days ago
     Docs: man:nginx(8)
 Main PID: 2369 (nginx)
    Tasks: 2 (limit: 1153)
   CGroup: /system.slice/nginx.service
           ├─2369 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─2380 nginx: worker process
</code></pre>
<h4 id="nodes-validator-setup-configuration"><a class="header" href="#nodes-validator-setup-configuration">Configuration</a></h4>
<p>Proxying your validator's port <code>26657</code> to nginx port <code>80</code> can then be done by creating a file with the following at <code>/etc/nginx/conf.d/validator.conf</code>:</p>
<pre><code>server {
  listen 80;
  listen [::]:80;
  server_name &quot;{{ domain }}&quot;;

  location / {
    proxy_pass http://127.0.0.1:26657;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}
</code></pre>
<p>Followed by:</p>
<pre><code>sudo apt install certbot nginx python3
certbot --nginx -d nym-validator.yourdomain.com -m you@yourdomain.com --agree-tos --noninteractive --redirect
</code></pre>
<pre><code class="language-admonish caution">If using a VPS running Ubuntu 20: replace `certbot nginx python3` with `python3-certbot-nginx`
</code></pre>
<p>These commands will get you an https encrypted nginx proxy in front of the API.</p>
<h3 id="nodes-validator-setup-configuring-prometheus-metrics-optional"><a class="header" href="#nodes-validator-setup-configuring-prometheus-metrics-optional">Configuring Prometheus metrics (optional)</a></h3>
<p>Configure Prometheus with the following commands (adapted from NodesGuru's <a href="https://nodes.guru/agoric/setup-guide/en">Agoric setup guide</a>):</p>
<pre><code>echo 'export OTEL_EXPORTER_PROMETHEUS_PORT=9464' &gt;&gt; $HOME/.bashrc
source ~/.bashrc
sed -i '/\[telemetry\]/{:a;n;/enabled/s/false/true/;Ta}' $HOME/.nymd/config/app.toml
sed -i &quot;s/prometheus-retention-time = 0/prometheus-retention-time = 60/g&quot; $HOME/.nymd/config/app.toml
sudo ufw allow 9464
echo 'Metrics URL: http://'$(curl -s ifconfig.me)':26660/metrics'
</code></pre>
<p>Your validator's metrics will be available to you at the returned 'Metrics URL'.</p>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
# HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile=&quot;0&quot;} 6.7969e-05
go_gc_duration_seconds{quantile=&quot;0.25&quot;} 7.864e-05
go_gc_duration_seconds{quantile=&quot;0.5&quot;} 8.4591e-05
go_gc_duration_seconds{quantile=&quot;0.75&quot;} 0.000115919
go_gc_duration_seconds{quantile=&quot;1&quot;} 0.001137591
go_gc_duration_seconds_sum 0.356555301
go_gc_duration_seconds_count 2448
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 668
# HELP go_info Information about the Go environment.
# TYPE go_info gauge
go_info{version=&quot;go1.15.7&quot;} 1
# HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 1.62622216e+08
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 2.09341707264e+11
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 5.612319e+06
# HELP go_memstats_frees_total Total number of frees.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 2.828263344e+09
# HELP go_memstats_gc_cpu_fraction The fraction of this program's available CPU time used by the GC since the program started.
# TYPE go_memstats_gc_cpu_fraction gauge
go_memstats_gc_cpu_fraction 0.03357798610671518
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 1.3884192e+07
```
</code></pre>
<h3 id="nodes-validator-setup-setting-the-ulimit"><a class="header" href="#nodes-validator-setup-setting-the-ulimit">Setting the ulimit</a></h3>
<p>Linux machines limit how many open files a user is allowed to have. This is called a <code>ulimit</code>.</p>
<p><code>ulimit</code> is 1024 by default on most systems. It needs to be set higher, because validators make and receive a lot of connections to other nodes.</p>
<p>If you see errors such as:</p>
<pre><code>Failed to accept incoming connection - Os { code: 24, kind: Other, message: &quot;Too many open files&quot; }
</code></pre>
<p>This means that the operating system is preventing network connections from being made.</p>
<h5 id="nodes-validator-setup-set-the-ulimit-via-systemd-service-file"><a class="header" href="#nodes-validator-setup-set-the-ulimit-via-systemd-service-file">Set the ulimit via <code>systemd</code> service file</a></h5>
<p>Query the <code>ulimit</code> of your validator with:</p>
<pre><code>grep -i &quot;open files&quot; /proc/$(ps -A -o pid,cmd|grep nymd | grep -v grep |head -n 1 | awk '{print $1}')/limits
</code></pre>
<p>You'll get back the hard and soft limits, which looks something like this:</p>
<pre><code>Max open files            65536                65536                files
</code></pre>
<p>If your output is <strong>the same as above</strong>, your node will not encounter any <code>ulimit</code> related issues.</p>
<p>However if either value is <code>1024</code>, you must raise the limit via the systemd service file. Add the line:</p>
<pre><code>LimitNOFILE=65536
</code></pre>
<p>Reload the daemon:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>or execute this as root for system-wide setting of <code>ulimit</code>:</p>
<pre><code>echo &quot;DefaultLimitNOFILE=65535&quot; &gt;&gt; /etc/systemd/system.conf
</code></pre>
<p>Reboot your machine and restart your node. When it comes back, use <code>cat /proc/$(pidof nym-validator)/limits | grep &quot;Max open files&quot;</code> to make sure the limit has changed to 65535.</p>
<h5 id="nodes-validator-setup-set-the-ulimit-on-non-systemd-based-distributions"><a class="header" href="#nodes-validator-setup-set-the-ulimit-on-non-systemd-based-distributions">Set the ulimit on <code>non-systemd</code> based distributions</a></h5>
<p>Edit <code>etc/security/conf</code> and add the following lines:</p>
<pre><code># Example hard limit for max opened files
username        hard nofile 4096
# Example soft limit for max opened files
username        soft nofile 4096
</code></pre>
<p>Then reboot your server and restart your validator.</p>
<h3 id="nodes-validator-setup-unjailing-your-validator"><a class="header" href="#nodes-validator-setup-unjailing-your-validator">Unjailing your validator</a></h3>
<p>If your validator gets jailed, you can fix it with the following command:</p>
<pre><code># Mainnet
nyxd tx slashing unjail 
  --broadcast-mode=block 
  --from=&quot;KEYRING_NAME&quot;
  --chain-id=nyx 
  --gas=auto 
  --gas-adjustment=1.4 
  --fees=7000unyx
</code></pre>
<pre><code># Sandbox Testnet
nymd tx slashing unjail 
  --broadcast-mode=block 
  --from=&quot;KEYRING_NAME&quot;
  --chain-id=nym-sandbox 
  --gas=auto 
  --gas-adjustment=1.4 
  --fees=7000unyxt
</code></pre>
<h4 id="nodes-validator-setup-common-reasons-for-your-validator-being-jailed"><a class="header" href="#nodes-validator-setup-common-reasons-for-your-validator-being-jailed">Common reasons for your validator being jailed</a></h4>
<p>The most common reason for your validator being jailed is that your validator is out of memory because of bloated syslogs.</p>
<p>Running the command <code>df -H</code> will return the size of the various partitions of your VPS.</p>
<p>If the <code>/dev/sda</code> partition is almost full, try pruning some of the <code>.gz</code> syslog archives and restart your validator process.</p>
<h3 id="nodes-validator-setup-day-2-operations-with-your-validator"><a class="header" href="#nodes-validator-setup-day-2-operations-with-your-validator">Day 2 operations with your validator</a></h3>
<p>You can check your current balances with:</p>
<pre><code>nymd query bank balances ${ADDRESS}
</code></pre>
<p>For example, on the Sanbox testnet this would return:</p>
<pre><code class="language-yaml">balances:
- amount: &quot;919376&quot;
denom: unymt
pagination:
next_key: null
total: &quot;0&quot;
</code></pre>
<p>You can, of course, stake back the available balance to your validator with the following command. </p>
<blockquote>
<p>Remember to save some tokens for gas costs! </p>
</blockquote>
<pre><code># Mainnet
nyxd tx staking delegate VALOPERADDRESS AMOUNTunym 
  --from=&quot;KEYRING_NAME&quot;
  --keyring-backend=os 
  --chain-id=nyx 
  --gas=&quot;auto&quot; 
  --gas-adjustment=1.15 
  --fees 5000unyx
</code></pre>
<pre><code># Sandbox Testnet
nymd tx staking delegate VALOPERADDRESS AMOUNTunymt 
  --from=&quot;KEYRING_NAME&quot;
  --keyring-backend=os 
  --chain-id=nym-sandbox
  --gas=&quot;auto&quot; 
  --gas-adjustment=1.15 
  --fees 5000unyxt
</code></pre>
<h3 id="nodes-validator-setup-validator-port-reference"><a class="header" href="#nodes-validator-setup-validator-port-reference">Validator port reference</a></h3>
<p>All validator-specific port configuration can be found in <code>$HOME/.nymd/config/config.toml</code>. If you do edit any port configs, remember to restart your validator.</p>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td>1317</td><td>REST API server endpoint</td></tr>
<tr><td>26656</td><td>Listen for incoming peer connections</td></tr>
<tr><td>26660</td><td>Listen for Prometheus connections</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><div id="nodes-troubleshooting"></div><h1 id="nodes-troubleshooting-troubleshooting"><a class="header" href="#nodes-troubleshooting-troubleshooting">Troubleshooting</a></h1>
<h2 id="nodes-troubleshooting-binary-build-problems"><a class="header" href="#nodes-troubleshooting-binary-build-problems">Binary Build Problems</a></h2>
<h3 id="nodes-troubleshooting-i-am-trying-to-build-from-the-github-archive-files-and-the-build-fails"><a class="header" href="#nodes-troubleshooting-i-am-trying-to-build-from-the-github-archive-files-and-the-build-fails">I am trying to build from the GitHub archive files and the build fails</a></h3>
<p>GitHub automatically includes .zip and tar.gz files of the Nym repository in its release. You cannot extract these and build - you'll see something like this:</p>
<pre><code>  process didn't exit successfully: `/build/nym/src/nym-0.12.1/target/release/build/nym-socks5-client-c1d0f76a8c7d7e9a/build-script-build` (exit status: 101)
  --- stderr
  thread 'main' panicked at 'failed to extract build metadata: could not find repository from '/build/nym/src/nym-0.12.1/clients/socks5'; class=Repository (6); code=NotFound (-3)', clients/socks5/build.rs:7:31
  note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
warning: build failed, waiting for other jobs to finish...
error: build failed
</code></pre>
<p>Why does this happen? </p>
<p>We have scripts which automatically include the Git commit hash and Git tag in the binary for easier debugging later. If you download a .zip and try building from that, it's not a Git repository and build will fail as above.</p>
<h2 id="nodes-troubleshooting-general-node-config"><a class="header" href="#nodes-troubleshooting-general-node-config">General Node Config</a></h2>
<h3 id="nodes-troubleshooting-where-can-i-find-my-private-and-public-keys-and--config"><a class="header" href="#nodes-troubleshooting-where-can-i-find-my-private-and-public-keys-and--config">Where can I find my private and public keys and  config?</a></h3>
<p>All config and keys files are stored in a directory named after your <code>id</code> which you chose during the <code>init</code> process, and can be found at the following PATH: <code>$HOME/.nym/&lt;NODE_TYPE&gt;/&lt;NODE_ID&gt;</code> where <code>$HOME</code> is a home directory of the user (your current user in this case) that launched the node or client.</p>
<p>The directory structure for each node will be roughly as follows:</p>
<pre><code>bob@nym:~$ tree /home/nym/.nym/mixnodes/
/home/nym/.nym/mixnodes/
|-- nym010
|   |-- config
|   |   `-- config.toml
|   `-- data
|       |-- private_identity.pem
|       |-- private_sphinx.pem
|       |-- public_identity.pem
|       `-- public_sphinx.pem
</code></pre>
<blockquote>
<p>If you <code>cat</code> the <code>public_sphinx.pem key</code>, the output will be different from the public key you will see on Nym <a href="https://sandbox-explorer.nymtech.net/">dashboard</a>. The reason for this is that <code>.pem</code> files are encoded in <strong>base64</strong>, however on the web they are in <strong>base58</strong>. Don't be confused if your keys look different. They are the same keys, just with different encoding :)</p>
</blockquote>
<h2 id="nodes-troubleshooting-mix-nodes"><a class="header" href="#nodes-troubleshooting-mix-nodes">Mix Nodes</a></h2>
<h3 id="nodes-troubleshooting-how-can-i-tell-my-node-is-up-and-running-and-mixing-traffic"><a class="header" href="#nodes-troubleshooting-how-can-i-tell-my-node-is-up-and-running-and-mixing-traffic">How can I tell my node is up and running and mixing traffic?</a></h3>
<p>First of all check the 'Mixnodes' section of either the Nym Network Explorers: </p>
<ul>
<li><a href="https://explorer.nymtech.net/overview">Mainnet</a> </li>
<li><a href="https://sandbox-explorer.nymtech.net/">Sandbox testnet</a> </li>
</ul>
<p>Enter your <strong>identity key</strong> to find your node. Check the contents of the 'mixnode stats' and 'uptime story' sections.</p>
<p>There are 2 community explorers currently, which have been created by <a href="https://nodes.guru">Nodes Guru</a>: </p>
<ul>
<li><a href="https://mixnet.explorers.guru/">Mainnet</a></li>
<li><a href="https://sandbox.mixnet.explorers.guru/">Sandbox testnet</a></li>
</ul>
<p>If you want more information, or if your node isn't showing up on the explorer of your choice and you want to double-check, here are some examples on how to check if the node is configured properly.</p>
<h4 id="nodes-troubleshooting-check-from-your-vps"><a class="header" href="#nodes-troubleshooting-check-from-your-vps">Check from your VPS</a></h4>
<p>Additional details can be obtained via various methods after you connect to your VPS:</p>
<h5 id="nodes-troubleshooting-socket-statistics-with-ss"><a class="header" href="#nodes-troubleshooting-socket-statistics-with-ss">Socket statistics with <code>ss</code></a></h5>
<pre><code>sudo ss -s -t | grep 1789 # if you have specified a different port in your mixnode config, change accordingly
</code></pre>
<p>This command should return a lot of data containing <code>ESTAB</code>. This command should work on every unix based system.</p>
<h5 id="nodes-troubleshooting-list-open-files-and-reliant-processes-with-lsof"><a class="header" href="#nodes-troubleshooting-list-open-files-and-reliant-processes-with-lsof">List open files and reliant processes with <code>lsof</code></a></h5>
<pre><code># check if lsof is installed:
lsof -v
# install if not installed
sudo apt install lsof
# run against mixnode port
sudo lsof -i TCP:1789 # if you have specified a different port in your mixnode config, change accordingly
</code></pre>
<p>This command should return something like this:</p>
<pre><code>nym-mixno 103349 root   53u  IPv6 1333229972      0t0  TCP [2a03:b0c0:3:d0::ff3:f001]:57844-&gt;[2a01:4f9:c011:38ae::5]:1789 (ESTABLISHED)
nym-mixno 103349 root   54u  IPv4 1333229973      0t0  TCP nym:57104-&gt;194.5.78.73:1789 (ESTABLISHED)
nym-mixno 103349 root   55u  IPv4 1333229974      0t0  TCP nym:48130-&gt;static.236.109.119.168.clients.your-server.de:1789 (ESTABLISHED)
nym-mixno 103349 root   56u  IPv4 1333229975      0t0  TCP nym:52548-&gt;vmi572614.contaboserver.net:1789 (ESTABLISHED)
nym-mixno 103349 root   57u  IPv6 1333229976      0t0  TCP [2a03:b0c0:3:d0::ff3:f001]:43244-&gt;[2600:1f18:1031:2401:c04b:2f25:ca79:fef3]:1789 (ESTABLISHED)
</code></pre>
<h5 id="nodes-troubleshooting-query-systemd-journal-with-journalctl"><a class="header" href="#nodes-troubleshooting-query-systemd-journal-with-journalctl">Query <code>systemd</code> journal with <code>journalctl</code></a></h5>
<pre><code>sudo journalctl -u nym-mixnode -o cat | grep &quot;Since startup mixed&quot;
</code></pre>
<p>If you have created <code>nym-mixnode.service</code> file (i.e. you are running your mixnode via <code>systemd</code>) then this command shows you how many packets have you mixed so far, and should return a list of messages like this:</p>
<pre><code>2021-05-18T12:35:24.057Z INFO  nym_mixnode::node::metrics                      &gt; Since startup mixed 233639 packets!
2021-05-18T12:38:02.178Z INFO  nym_mixnode::node::metrics                      &gt; Since startup mixed 233739 packets!
2021-05-18T12:40:32.344Z INFO  nym_mixnode::node::metrics                      &gt; Since startup mixed 233837 packets!
2021-05-18T12:46:08.549Z INFO  nym_mixnode::node::metrics                      &gt; Since startup mixed 234081 packets!
2021-05-18T12:56:57.129Z INFO  nym_mixnode::node::metrics                      &gt; Since startup mixed 234491 packets!
</code></pre>
<p>You can add <code> | tail</code> to the end of the command to watch for new entries in real time if needed.</p>
<h4 id="nodes-troubleshooting-check-from-your-local-machine"><a class="header" href="#nodes-troubleshooting-check-from-your-local-machine">Check from your local machine</a></h4>
<h5 id="nodes-troubleshooting-scan-ports-with-nmap"><a class="header" href="#nodes-troubleshooting-scan-ports-with-nmap">Scan ports with <code>nmap</code>:</a></h5>
<pre><code>nmap -p 1789 &lt;IP ADDRESS&gt; -Pn
</code></pre>
<p>If your mixnode is configured properly it should output something like this:</p>
<pre><code>bob@desktop:~$ nmap -p 1789 95.296.134.220 -Pn

Host is up (0.053s latency).

PORT     STATE SERVICE
1789/tcp open  hello
</code></pre>
<h5 id="nodes-troubleshooting-query-online-nodes"><a class="header" href="#nodes-troubleshooting-query-online-nodes">Query online nodes:</a></h5>
<pre><code>curl --location --request GET 'https://validator.nymtech.net/api/v1/mixnodes/'
</code></pre>
<p>Will return a list all nodes currently online.</p>
<p>You can query gateways by replacing <code>mixnodes</code> with <code>gateways</code> in the above command, and can query for the mixnodes and gatways on the Sandbox testnet by replacing <code>validator</code> with <code>sandbox-validator</code>. </p>
<h4 id="nodes-troubleshooting-check-with-network-api"><a class="header" href="#nodes-troubleshooting-check-with-network-api">Check with Network API</a></h4>
<p>We currently have an API set up returning our metrics tests of the network. There are two endpoints to ping for information about your mixnode, <code>report</code> and <code>history</code>. Find more information about this in the <a href="#nodes-mix-node-setup-metrics--api-endpoints">Mixnodes metrics documentation</a>.</p>
<h3 id="nodes-troubleshooting-why-is-my-node-not-mixing-any-packets"><a class="header" href="#nodes-troubleshooting-why-is-my-node-not-mixing-any-packets">Why is my node not mixing any packets?</a></h3>
<p>If you are still unable to see your node on the dashboard, or your node is declaring it has not mixed any packets, there are several potential issues:</p>
<ul>
<li>The firewall on your host machine is not configured properly.</li>
<li>You provided incorrect information when bonding your node.</li>
<li>You are running your mixnode from a VPS without IPv6 support.</li>
<li>You did not use the <code>--announce-host</code> flag while running the mixnode from your local machine behind NAT.</li>
<li>You did not configure your router firewall while running the mixnode from your local machine behind NAT, or you are lacking IPv6 support.</li>
<li>Your mixnode is not running at all, it has either exited / panicked or you closed the session without making the node persistent.</li>
</ul>
<pre><code class="language-admonish caution">Your mixnode **must speak both IPv4 and IPv6** in order to cooperate with other nodes and route traffic. This is a common reason behind many errors we are seeing among node operators, so check with your provider that your VPS is able to do this!
</code></pre>
<h4 id="nodes-troubleshooting-incorrectly-configured-firewall"><a class="header" href="#nodes-troubleshooting-incorrectly-configured-firewall">Incorrectly configured firewall</a></h4>
<p>The most common reason your mixnode might not be mixing packets is due to a poorly configured firewall. The following commands will allow you to set up a firewall using <code>ufw</code>.</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your mixnode's p2p port, as well as ports for ssh, http, and https connections, and ports <code>8000</code> and <code>1790</code> for verloc and measurement pings:</p>
<pre><code>sudo ufw allow 1789,1790,8000,22,80,443/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<h4 id="nodes-troubleshooting-incorrect-bonding-information"><a class="header" href="#nodes-troubleshooting-incorrect-bonding-information">Incorrect bonding information</a></h4>
<p>Check that you have provided the correct information when bonding your mixnode in the web wallet <a href="https://sandbox-wallet.nymtech.net/">interface</a>. When in doubt, unbond and then rebond your node!</p>
<h4 id="nodes-troubleshooting-missing-announce-host-flag"><a class="header" href="#nodes-troubleshooting-missing-announce-host-flag">Missing <code>announce-host</code> flag</a></h4>
<p>On certain cloud providers such as AWS and Google Cloud, you need to do some additional configuration of your firewall and use <code>--host</code> with your <strong>local ip</strong> and <code>--announce-host</code> with the <strong>public ip</strong> of your mixnode host.</p>
<h4 id="nodes-troubleshooting-no-ipv6-connectivity"><a class="header" href="#nodes-troubleshooting-no-ipv6-connectivity">No IPv6 connectivity</a></h4>
<p>Make sure that your VPS has IPv6 connectivity available with whatever provider you are using.</p>
<p>To get all ip addresses of your host, try following commands:</p>
<pre><code>hostname -i
</code></pre>
<p>Will return your <strong>local ip</strong> address.</p>
<pre><code>hostname -I
</code></pre>
<p>Will return all of the ip addresses of your host. This output should look something like this:</p>
<pre><code>bob@nym:~$ hostname -I
88.36.11.23 172.18.0.1 2a01:28:ca:102::1:641
</code></pre>
<ul>
<li>The first <strong>ipv4</strong> is the public ip you need to use for the <code>--announce-host</code> flag.</li>
<li>The second <strong>ipv4</strong> is the local ip you need to use for the <code>--host</code> flag.</li>
<li>The 3rd output should confirm if your machine has ipv6 available.</li>
</ul>
<h3 id="nodes-troubleshooting-running-on-a-local-machine-behind-nat-with-no-fixed-ip-address"><a class="header" href="#nodes-troubleshooting-running-on-a-local-machine-behind-nat-with-no-fixed-ip-address">Running on a local machine behind NAT with no fixed IP address</a></h3>
<p>Your ISP has to be IPv6 ready if you want to run a mixnode on your local machine. Sadly, in 2020, most of them are not and you won't get an IPv6 address by default from your ISP. Usually it is a extra paid service or they simply don't offer it.</p>
<p>Before you begin, check if you have IPv6 <a href="https://test-ipv6.cz/">here</a>. If not, then don't waste your time to run a node which won't ever be able to mix any packet due to this limitation. Call your ISP and ask for IPv6, there is a plenty of it for everyone!</p>
<p>If all goes well and you have IPv6 available, then you will need to <code>init</code> the mixnode with an extra flag, <code>--announce-host</code>. You will also need to edit your <code>config.toml</code> file each time your IPv4 address changes, that could be a few days or a few weeks.</p>
<p>Additional configuration on your router might also be needed to allow traffic in and out to port 1789 and IPv6 support.</p>
<p>Here is a sample of the <code>init</code> command to create the mixnode config.</p>
<pre><code>./target/release/nym-mixnode init --id nym-nat --host 0.0.0.0 --announce-host 85.160.12.13 --layer 3
</code></pre>
<ul>
<li>
<p><code>--host 0.0.0.0</code> should work everytime even if your local machine IPv4 address changes. For example on Monday your router gives your machine an address <code>192.168.0.13</code> and on Wednesday, the DHCP lease will end and you will be asigned <code>192.168.0.14</code>. Using <code>0.0.0.0</code> should avoid this without having to set any static ip in your router`s configuration.</p>
</li>
<li>
<p>you can get your current IPv4 address by either using <code>curl ipinfo.io</code> if you're on MacOS or Linux or visiting <a href="https://www.whatsmyip.org/">whatsmyip site</a>. Simply copy it and use it as <code>--anounce-host</code> address.</p>
</li>
</ul>
<p>Make sure you check if your node is really mixing. You will need a bit of luck to set this up from your home behind NAT.</p>
<h3 id="nodes-troubleshooting-accidentally-killing-your-node-process-on-exiting-session"><a class="header" href="#nodes-troubleshooting-accidentally-killing-your-node-process-on-exiting-session">Accidentally killing your node process on exiting session</a></h3>
<p>When you close your current terminal session, you need to make sure you don't kill the mixnode process! There are multiple ways on how to make it persistent even after exiting your ssh session, the easiest solution is to use <code>nohup</code>, and the more elegant solution is to run the node with <code>systemd</code>.</p>
<h3 id="nodes-troubleshooting-running-your-mixnode-as-a-background-process-with-nohup"><a class="header" href="#nodes-troubleshooting-running-your-mixnode-as-a-background-process-with-nohup">Running your mixnode as a background process with <code>nohup</code></a></h3>
<p><code>nohup</code> is a command with which your terminal is told to ignore the <code>HUP</code> or 'hangup' signal. This will stop the mixnode process ending if you kill your session.</p>
<pre><code>nohup ./nym-mixnode run --id NYM # where `--id NYM` is the id you set during the `init` command.
</code></pre>
<h3 id="nodes-troubleshooting-running-your-mixnode-as-a-background-process-with-systemd"><a class="header" href="#nodes-troubleshooting-running-your-mixnode-as-a-background-process-with-systemd">Running your mixnode as a background process with <code>systemd</code></a></h3>
<p>The most reliable and elegant solution is to create a <code>systemd.service</code> file and run the nym-mixnode with <code>systemctl</code> command.</p>
<p>Create a file with <code>nano</code> at <code>/etc/systemd/system/nym-mixnode.service</code> containing the following:</p>
<pre><code class="language-ini">[Unit]
Description=nym mixnode service
After=network.target

[Service]
Type=simple
User=nym                                      # change as appropriate
LimitNOFILE=65536
ExecStart=/home/nym/nym-mixnode run --id nym  # change as appropriate
KillSignal=SIGINT
Restart=on-failure
RestartSec=30
Restart=on-abort
[Install]
WantedBy=multi-user.target
</code></pre>
<pre><code># enable the service
sudo systemctl enable nym-mixnode
# start the service
sudo systemctl start nym-mixnode
# check if the service is running properly and mixnode is mixing
sudo systemctl status nym-mixnode
</code></pre>
<p>Now your node should be mixing all the time, and restart if you reboot your server!</p>
<p>Anytime you change your <code>systemd</code> service file you need to <code>sudo systemctl daemon-reload</code> in order to restart the service.</p>
<h3 id="nodes-troubleshooting-network-configuration-seems-fine-but-log-still-claims-since-startup-mixed-0-packets"><a class="header" href="#nodes-troubleshooting-network-configuration-seems-fine-but-log-still-claims-since-startup-mixed-0-packets">Network configuration seems fine but log still claims <code>Since startup mixed 0 packets!</code></a></h3>
<p>This behavior is most likely caused by a mismatch between your node configuration and the bonding information. Unbond and then rebond your node.</p>
<p>Also make sure to enter all the information in the web wallet exactly as it appears in the log when you start the mixnode process. In particular, the <code>host</code> field must contain the <em>port</em> on which your mixnode will listen:</p>
<ul>
<li>correct host: <code>34.12.3.43:1789</code></li>
<li>incorrect host:<code>34.12.3.43</code></li>
</ul>
<h3 id="nodes-troubleshooting-common-errors-and-warnings"><a class="header" href="#nodes-troubleshooting-common-errors-and-warnings">Common errors and warnings</a></h3>
<p>Most of the <code>ERROR</code> and <code>WARN</code> messages in your node logs are benign - as long as your node outputs <code>since startup mixed X packets!</code> in your logs (and this number increases over time), your node is mixing packets. If you want to be sure, check the Nym <a href="https://sandbox-explorer.nymtech.net/">dashboard</a> or see other ways on how to check if your node is mixing properly as outlined in the section <strong>How can I tell my node is up and running and mixing traffic?</strong> above.</p>
<p>More specific errors and warnings are covered below.</p>
<h4 id="nodes-troubleshooting-tokio-runtime-worker-error"><a class="header" href="#nodes-troubleshooting-tokio-runtime-worker-error"><code>tokio runtime worker</code> error</a></h4>
<p>If you are running into issues with an error including the following:</p>
<pre><code>thread 'tokio-runtime-worker' panicked at 'Failed to create TCP listener: Os { code: 99, kind: AddrNotAvailable, message: &quot;Cannot assign requested address&quot; }'
</code></pre>
<p>Then you need to <code>--announce-host &lt;public ip&gt;</code> and ``--host <local ip>` on startup. This issue arises because of your use of a provider like AWS or Google Cloud, and the fact that your VPS' available bind address is not the same as the public IP address (see <a href="#nodes-mix-node-setup-virtual-ips-and-hosting-via-google--aws">Virtual IPs and hosting via Google and AWS</a> for more information on this issue).</p>
<h4 id="nodes-troubleshooting-rocketlaunch-warnings"><a class="header" href="#nodes-troubleshooting-rocketlaunch-warnings"><code>rocket::launch</code> warnings</a></h4>
<p>These warnings are not an issue, please ignore them. Rocket is a web framework for rust which we are using to provide mixnodes with <code>/verloc</code> and <code>/description</code> http APIs.</p>
<p>Find more information about this in the <a href="#nodes-mix-node-setup-metrics--api-endpoints">Mixnodes metrics documentation</a>.</p>
<p>Rocket runs on port <code>8000</code> by default. Although at this stage of the testnet we need Rocket to be reachable via this port, in the future customization of the particular port it uses will be possible.</p>
<h4 id="nodes-troubleshooting-failed-to-receive-reply-to-our-echo-packet-within-15s-stopping-the-test"><a class="header" href="#nodes-troubleshooting-failed-to-receive-reply-to-our-echo-packet-within-15s-stopping-the-test"><code>failed to receive reply to our echo packet within 1.5s. Stopping the test</code></a></h4>
<p>This relates to the VerLoc implementation that appeared in <code>0.10.1</code>, which has a particularly high log sensitivity. This warning means that the echo packet sent to the mixnode was received, but not sent back. <em>This will not affect the rate of rewards or performance metrics of your mixnode in the testnet at this point.</em></p>
<h4 id="nodes-troubleshooting-connection-to-ip1789-seems-to-be-dead"><a class="header" href="#nodes-troubleshooting-connection-to-ip1789-seems-to-be-dead"><code>Connection to &lt;IP&gt;:1789 seems to be dead</code></a></h4>
<p>This warning is normal at the moment, and is <em>nothing to do with your mixnode!</em> It is simply a warning that your node is unable to connect to other peoples' mixnodes for some reason, most likely because they are offline or poorly configured.</p>
<h3 id="nodes-troubleshooting-can-i-use-a-port-other-than-1789-"><a class="header" href="#nodes-troubleshooting-can-i-use-a-port-other-than-1789-">Can I use a port other than 1789 ?</a></h3>
<p>Yes! Here is what you will need to do:</p>
<p>Assuming you would like to use port <code>1337</code> for your mixnode, you need to open the new port (and close the old one):</p>
<pre><code>sudo ufw allow 1337
sudo ufw deny 1789
</code></pre>
<p>And then edit the mixnode's config.</p>
<blockquote>
<p>If you want to change the port for an already running node, you need to stop the process before editing your config file.</p>
</blockquote>
<p>Assuming your node name is <code>nym</code>, the config file is located at <code>~/.nym/mixnodes/nym/config/config.toml</code>.</p>
<pre><code>nano ~/.nym/mixnodes/nym/config/config.toml
</code></pre>
<p>You will need to edit two parts of the file. <code>announce_address</code> and <code>listening_address</code> in the config.toml file. Simply replace <code>:1789</code> (the default port) with <code>:1337</code> (your new port) after your IP address.</p>
<p>Finally, restart your node. You should see if the mixnode is using the port you have changed in the config.toml file right after you run the node.</p>
<h3 id="nodes-troubleshooting-what-is-verloc-and-do-i-have-to-configure-my-mixnode-to-implement-it"><a class="header" href="#nodes-troubleshooting-what-is-verloc-and-do-i-have-to-configure-my-mixnode-to-implement-it">What is <code>verloc</code> and do I have to configure my mixnode to implement it?</a></h3>
<p><code>verloc</code> is short for <em>verifiable location</em>. Mixnodes and gateways now measure speed-of-light distances to each other, in an attempt to verify how far apart they are. In later releases, this will allow us to algorithmically verify node locations in a non-fakeable and trustworthy manner.</p>
<p>You don't have to do any additional configuration for your node to implement this, it is a passive process that runs in the background of the mixnet from version <code>0.10.1</code> onwards.</p>
<h3 id="nodes-troubleshooting-where-can-i-get-more-help"><a class="header" href="#nodes-troubleshooting-where-can-i-get-more-help">Where can I get more help?</a></h3>
<p>The fastest way to reach one of us or get a help from the community, visit our <a href="https://t.me/nymchan_help_chat">Telegram help chat</a> or head to our <a href="https://Discord.gg/nym">Discord</a></p>
<p>For more tech heavy questions join our Keybase channel. Get Keybase <a href="https://keybase.io/">here</a>, then click Teams -&gt; Join a team. Type nymtech.friends into the team name and hit continue. For general chat, hang out in the #general channel. </p>
<div style="break-before: page; page-break-before: always;"></div><div id="clients-overview"></div><h1 id="clients-overview-clients-overview"><a class="header" href="#clients-overview-clients-overview">Clients Overview</a></h1>
<p>A large proportion of the Nym mixnet's functionality is implemented client-side. </p>
<p>Clients perform the following actions on behalf of users: </p>
<ul>
<li>determine network topology - what mixnodes exist, what their keys are, etc.</li>
<li>register with a gateway</li>
<li>authenticate with a gateway</li>
<li>receive and decrypt messages from the gateway</li>
<li>create layer-encrypted Sphinx packets</li>
<li>send Sphinx packets with real messages</li>
<li>send Sphinx packet <em>cover traffic</em> when no real messages are being sent</li>
<li>retransmit un-acknowledged packet sends - if a client sends 100 packets to a gateway, but only receives an acknowledgement ('ack') for 95 of them, it will resend those 5 packets to the gateway again, to make sure that all packets are received.</li>
</ul>
<h2 id="clients-overview-types-of-nym-clients"><a class="header" href="#clients-overview-types-of-nym-clients">Types of Nym clients</a></h2>
<p>At present, there are three Nym clients:</p>
<ul>
<li>the websocket (native) client</li>
<li>the SOCKS5 client</li>
<li>the wasm (webassembly) client</li>
</ul>
<p>You need to choose which one you want incorporate into your app. Which one you use will depend largely on your preferred programming style and the purpose of your app.</p>
<h3 id="clients-overview-the-websocket-client"><a class="header" href="#clients-overview-the-websocket-client">The websocket client</a></h3>
<p>Your first option is the native websocket client (<code>nym-client</code>). This is a compiled program that can run on Linux, Mac OS X, and Windows machines. It runs as a persistent process on a desktop or server machine. You can connect to it with <strong>any language that supports websockets</strong>.</p>
<h3 id="clients-overview-the-webassembly-client"><a class="header" href="#clients-overview-the-webassembly-client">The webassembly client</a></h3>
<p>If you're working in JavaScript or Typescript in the browser, or building an <a href="https://en.wikipedia.org/wiki/Edge_computing">edge computing</a> app, you'll likely want to choose the webassembly client. </p>
<p>It's packaged and <a href="https://www.npmjs.com/package/@nymproject/nym-client-wasm">available on the npm registry</a>, so you can <code>npm install</code> it into your JavaScript or TypeScript application. </p>
<p>The webassembly client is most easily used via the <a href="#sdk-typescript">sdk</a>. </p>
<h3 id="clients-overview-the-socks5-client"><a class="header" href="#clients-overview-the-socks5-client">The SOCKS5 client</a></h3>
<p>This client (<code>nym-socks5-client</code>) is useful for allowing existing applications to use the Nym mixnet without any code changes. All that's necessary is that they can use one of the SOCKS5, SOCKS4a, or SOCKS4 proxy protocols (which many applications can - crypto wallets, browsers, chat applications etc). </p>
<p>It's less flexible as a way of writing custom applications than the other clients, but able to be used to proxy application traffic through the mixnet without having to make any code changes. </p>
<h2 id="clients-overview-commonalities-between-clients"><a class="header" href="#clients-overview-commonalities-between-clients">Commonalities between clients</a></h2>
<p>All Nym client packages present basically the same capabilities to the privacy application developer. They need to run as a persistent process in order to stay connected and ready to receive any incoming messages from their gateway nodes. They register and authenticate to gateways, and encrypt Sphinx packets.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="clients-websocket-client"></div><h1 id="clients-websocket-client-websocket-client"><a class="header" href="#clients-websocket-client-websocket-client">Websocket Client</a></h1>
<blockquote>
<p>The Nym Websocket Client was built in the <a href="#binaries-building-nym">building nym</a> section. If you haven't yet built Nym and want to run the code on this page, go there first.</p>
</blockquote>
<h2 id="clients-websocket-client-client-setup"><a class="header" href="#clients-websocket-client-client-setup">Client setup</a></h2>
<h3 id="clients-websocket-client-viewing-command-help"><a class="header" href="#clients-websocket-client-viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-client --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (client - version {{platform_release_version}})

    
      nym-client {{platform_release_version}}
      Nymtech
      Implementation of the Nym Client

      USAGE:
          nym-client [OPTIONS] &lt;SUBCOMMAND&gt;

      OPTIONS:
              --config-env-file &lt;CONFIG_ENV_FILE&gt;
                  Path pointing to an env file that configures the client

          -h, --help
                  Print help information

          -V, --version
                  Print version information

      SUBCOMMANDS:
          completions          Generate shell completions
          generate-fig-spec    Generate Fig specification
          help                 Print this message or the help of the given subcommand(s)
          init                 Initialise a Nym client. Do this first!
          run                  Run the Nym client with provided configuration client optionally
                               overriding set parameters
          upgrade              Try to upgrade the client


```
</code></pre>
<p>The two most important commands you will issue to the client are: </p>
<ul>
<li><code>init</code> - initalise a new client instance. </li>
<li><code>run</code> - run a mixnet client process. </li>
</ul>
<p>You can check the necessary parameters for the available commands by running:</p>
<pre><code>./nym-client &lt;command&gt; --help 
</code></pre>
<h3 id="clients-websocket-client-initialising-your-client"><a class="header" href="#clients-websocket-client-initialising-your-client">Initialising your client</a></h3>
<p>Before you can use the client, you need to initalise a new instance of it. Each instance of the client has its own public/private keypair, and connects to its own gateway node. Taken together, these 3 things (public/private keypair + gateway node identity key) make up an app's identity.</p>
<p>Initialising a new client instance can be done with the following command:</p>
<pre><code>./nym-client init --id &lt;client_id&gt; 
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
      Initialising client...
      Saved all generated keys
      Saved configuration file to &quot;/home/mx/.nym/clients/client/config/config.toml&quot;
      Using gateway: BNjYZPxzcJwczXHHgBxCAyVJKxN6LPteDRrKapxWmexv
      Client configuration completed.




      The address of this client is: 7bxykcEH1uGNMr8mxGABvLJA44nbYt6Rp7xXHhJ4wQVk.HpnFbaMJ8NN1cp5ZPdPTc2GoBDnG4Jd51Sti32tbf3tF@BNjYZPxzcJwczXHHgBxCAyVJKxN6LPteDRrKapxWmexv

```
</code></pre>
<p>The <code>--id</code> in the example above is a local identifier so that you can name your clients; it is <strong>never</strong> transmitted over the network.</p>
<p>There is an optional <code>--gateway</code> flag that you can use if you want to use a specific gateway. The supplied argument is the <code>Identity Key</code> of the gateway you wish to use, which can be found on the <a href="https://explorer.nymtech.net/network-components/gateways">mainnet Network Explorer</a> or <a href="https://sandbox-explorer.nymtech.net/network-components/gateways">Sandbox Testnet Explorer</a> depending on which network you are on. </p>
<p>Not passing this argument will randomly select a gateway for your client.</p>
<h4 id="clients-websocket-client-choosing-a-gateway"><a class="header" href="#clients-websocket-client-choosing-a-gateway">Choosing a Gateway</a></h4>
<p>By default - as in the example above - your client will choose a random gateway to connect to. </p>
<p>However, there are several options for choosing a gateway, if you do not want one that is randomly assigned to your client:</p>
<ul>
<li>If you wish to connect to a specific gateway, you can specify this with the <code>--gateway</code> flag when running <code>init</code>. </li>
<li>You can also choose a gateway based on its location relative to your client. This can be done by appending the <code>--latency-based-routing</code> flag to your <code>init</code> command. This command means that to select a gateway, your client will: 
<ul>
<li>fetch a list of all availiable gateways</li>
<li>send few ping messages to all of them, and measure response times. </li>
<li>create a weighted distribution to randomly choose one, favouring ones with lower latency. </li>
</ul>
</li>
</ul>
<blockquote>
<p>Note this doesn't mean that your client will pick the closest gateway to you, but it will be far more likely to connect to gateway with a 20ms ping rather than 200ms</p>
</blockquote>
<h3 id="clients-websocket-client-configuring-your-client"><a class="header" href="#clients-websocket-client-configuring-your-client">Configuring your client</a></h3>
<p>When you initalise a client instance, a configuration directory will be generated and stored in <code>$HOME_DIR/.nym/clients/&lt;client-name&gt;/</code>.</p>
<pre><code>/home/&lt;user&gt;/.nym/clients/&lt;client_id&gt;/
├── config
│   └── config.toml
└── data
    ├── private_identity.pem
    └── public_identity.pem
</code></pre>
<p>The <code>config.toml</code> file contains client configuration options, while the two <code>pem</code> files contain client key information.</p>
<p>The generated files contain the client name, public/private keypairs, and gateway address. The name <code>&lt;client_id&gt;</code> in the example above is just a local identifier so that you can name your clients.</p>
<h4 id="clients-websocket-client-configuring-your-client-for-docker"><a class="header" href="#clients-websocket-client-configuring-your-client-for-docker">Configuring your client for Docker</a></h4>
<p>By default, the native client listens to host <code>127.0.0.1</code>. However this can be an issue if you wish to run a client in a Dockerized environment, where it can be convenenient to listen on a different host such as <code>0.0.0.0</code>. </p>
<p>You can set this via the <code>--host</code> flag during either the <code>init</code> or <code>run</code> commands. </p>
<p>Alternatively, a custom host can be set in the <code>config.toml</code> file under the <code>socket</code> section. If you do this, remember to restart your client process. </p>
<h3 id="clients-websocket-client-running-your-client"><a class="header" href="#clients-websocket-client-running-your-client">Running your client</a></h3>
<p>You can run the initalised client by doing this:</p>
<pre><code>./nym-client run --id &lt;client_id&gt;
</code></pre>
<p>When you run the client, it immediately starts generating (fake) cover traffic and sending it to the mixnet.</p>
<p>When the client is first started, it will reach out to the Nym network's validators, and get a list of available Nym nodes (gateways, mixnodes, and validators). We call this list of nodes the network <em>topology</em>. The client does this so that it knows how to connect, register itself with the network, and know which mixnodes it can route Sphinx packets through.</p>
<h2 id="clients-websocket-client-using-your-client"><a class="header" href="#clients-websocket-client-using-your-client">Using your client</a></h2>
<h3 id="clients-websocket-client-connecting-to-the-local-websocket"><a class="header" href="#clients-websocket-client-connecting-to-the-local-websocket">Connecting to the local websocket</a></h3>
<p>The Nym native client exposes a websocket interface that your code connects to. To program your app, choose a websocket library for whatever language you're using. The <strong>default</strong> websocket port is <code>1977</code>, you can override that in the client config if you want.</p>
<p>The Nym monorepo includes websocket client example code for Rust, Go, Javacript, and Python, all of which can be found <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/clients/native/examples">here</a></p>
<blockquote>
<p>Rust users can run the examples with <code>cargo run --example &lt;rust_file&gt;.rs</code>, as the examples are not organised in the same way as the other examples, due to already being inside a Cargo project. </p>
</blockquote>
<p>All of these code examples will do the following: </p>
<ul>
<li>connect to a running websocket client on port <code>1977</code></li>
<li>format a message to send in either JSON or Binary format. Nym messages have defined JSON formats.</li>
<li>send the message into the websocket. The native client packages the message into a Sphinx packet and sends it to the mixnet</li>
<li>wait for confirmation that the message hit the native client</li>
<li>wait to receive messages from other Nym apps</li>
</ul>
<p>By varying the message content, you can easily build sophisticated service provider apps. For example, instead of printing the response received from the mixnet, your service provider might take some action on behalf of the user - perhaps initiating a network request, a blockchain transaction, or writing to a local data store.</p>
<blockquote>
<p>You can find an example of building both frontend and service provider code with the websocket client in the <a href="https://nymtech.net/developers/tutorials/simple-service-provider.html">Simple Service Provider Tutorial</a> in the Developer Portal. </p>
</blockquote>
<h3 id="clients-websocket-client-message-types"><a class="header" href="#clients-websocket-client-message-types">Message Types</a></h3>
<p>There are a small number of messages that your application sends up the websocket to interact with the native client, as follows.</p>
<h4 id="clients-websocket-client-sending-text"><a class="header" href="#clients-websocket-client-sending-text">Sending text</a></h4>
<p>If you want to send text information through the mixnet, format a message like this one and poke it into the websocket:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;send&quot;,
  &quot;message&quot;: &quot;the message&quot;,
  &quot;recipient&quot;: &quot;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&quot;
}
</code></pre>
<p>In some applications, e.g. where people are chatting with friends who they know, you might want to include unencrypted reply information in the message field. This provides an easy way for the receiving chat to then turn around and send a reply message:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;send&quot;,
  &quot;message&quot;: {
    &quot;sender&quot;: &quot;198427b63ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&quot;,
    &quot;chatMessage&quot;: &quot;hi julia!&quot;
  },
  &quot;recipient&quot;: &quot;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&quot;
}
</code></pre>
<p>If that fits your security model, good. However, it may be the case that you want to send <strong>anonymous replies using Single Use Reply Blocks (SURBs)</strong>. </p>
<p>You can read more about SURBs <a href="#architecture-traffic-flow-private-replies-using-surbs">here</a> but in short they are ways for the receiver of this message to anonymously reply to you - the sender - without them having to know your nym address. </p>
<p>Your client will send along a number of <code>replySurbs</code> to the recipient of the message. These are pre-addressed Sphinx packets that the recipient can write to, but not view the address. If the recipient is unable to fit the response data into the bucket of SURBs sent to it, it will use a SURB to request more SURBs be sent to it. </p>
<pre><code class="language-json">{
    &quot;type&quot;: &quot;sendAnonymous&quot;, 
    &quot;message&quot;: &quot;something you want to keep secret&quot;
    &quot;recipient&quot;: &quot;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&quot;
    &quot;replySurbs&quot;: 100 // however many reply SURBs to send along with your message
}
</code></pre>
<p>Each bucket of replySURBs, when received as part of an incoming message, has a unique session identifier, which <strong>only identifies the bucket of pre-addressed packets</strong>. This is necessary to make sure that your app is replying to the correct people with the information meant for them! Constructing a reply with SURBs looks something like this (where <code>senderTag</code> was parsed from the incoming message)</p>
<pre><code class="language-json">{
    &quot;type&quot;: &quot;reply&quot;, 
    &quot;message&quot;: &quot;reply you also want to keep secret&quot;, 
    &quot;senderTag&quot;: &quot;the sender tag you parsed from the incoming message&quot;
}
</code></pre>
<h4 id="clients-websocket-client-sending-binary-data"><a class="header" href="#clients-websocket-client-sending-binary-data">Sending binary data</a></h4>
<p>You can also send bytes instead of JSON. For that you have to send a binary websocket frame containing a binary encoded
Nym <a href="https://github.com/nymtech/nym/blob/develop/clients/native/websocket-requests/src/requests.rs#L25"><code>ClientRequest</code></a> containing the same information. </p>
<p>As a response the <code>native-client</code> will send a <code>ServerResponse</code> to be decoded. </p>
<p>You can find examples of sending and receiving binary data in the Rust, Python and Go <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/clients/native/examples">code examples</a>, and an example project from the Nym community <a href="https://github.com/sgeisler/btcbc-rs/">BTC-BC</a>: Bitcoin transaction transmission via Nym, a client and service provider written in Rust.</p>
<h4 id="clients-websocket-client-getting-your-own-address"><a class="header" href="#clients-websocket-client-getting-your-own-address">Getting your own address</a></h4>
<p>Sometimes, when you start your app, it can be convenient to ask the native client to tell you what your own address is (from the saved configuration files). To do this, send:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;selfAddress&quot;
}
</code></pre>
<p>You'll get back:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;selfAddress&quot;,
  &quot;address&quot;: &quot;the-address&quot; // e.g. &quot;71od3ZAupdCdxeFNg8sdonqfZTnZZy1E86WYKEjxD4kj@FWYoUrnKuXryysptnCZgUYRTauHq4FnEFu2QGn5LZWbm&quot;
}
</code></pre>
<h4 id="clients-websocket-client-error-messages"><a class="header" href="#clients-websocket-client-error-messages">Error messages</a></h4>
<p>Errors from the app's client, or from the gateway, will be sent down the websocket to your code in the following format:</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;error&quot;,
  &quot;message&quot;: &quot;string message&quot;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div id="clients-socks5-client"></div><h1 id="clients-socks5-client-socks5-client"><a class="header" href="#clients-socks5-client-socks5-client">Socks5 Client</a></h1>
<blockquote>
<p>The Nym socks5 client was built in the <a href="#binaries-building-nym">building nym</a> section. If you haven't yet built Nym and want to run the code on this page, go there first.</p>
</blockquote>
<p>Many existing applications are able to use either the SOCKS4, SOCKS4A, or SOCKS5 proxy protocols. If you want to send such an application's traffic through the mixnet, you can use the <code>nym-socks5-client</code> to bounce network traffic through the Nym network, like this:</p>
<pre><code>                                                                              External Systems:
                                                                                     +--------------------+
                                                                             |------&gt;| Monero blockchain  |
                                                                             |       +--------------------+
                                                                             |       +--------------------+
                                                                             |------&gt;|    Email server    |
                                                                             |       +--------------------+
                                                                             |       +--------------------+
                                                                             |------&gt;|    RPC endpoint    |
                                                                             |       +--------------------+
                                                                             |       +--------------------+
                                                                             |------&gt;|       Website      |
                                                                             |       +--------------------+
                                                                             |       +--------------------+
  +----------------------------------+                                       |------&gt;|       etc...       |
  | Mixnet:                          |                                       |       +--------------------+
  |       * Gateway your client is   |                                       |
  |       connected to               |          +--------------------+       |
  |       * Mix nodes 1 -&gt; 3         |&lt;--------&gt;| Network requester  |&lt;------+
  |       * Gateway that network     |          +--------------------+
  |       requester is connected to  |
  +----------------------------------+
           ^
           |
           |
           |
           |
           v
 +-------------------+
 | +---------------+ |
 | |  Nym client   | |
 | +---------------+ |
 |         ^         |
 |         |         |
 |         |         |
 |         |         |
 |         v         |
 | +---------------+ |
 | | Your app code | |
 | +---------------+ |
 +-------------------+
  Your Local Machine
</code></pre>
<p>There are 2 pieces of software that work together to send SOCKS traffic through the mixnet: the <code>nym-socks5-client</code>, and the <code>nym-network-requester</code>.</p>
<p>The <code>nym-socks5-client</code> allows you to do the following from your local machine:</p>
<ul>
<li>Take a TCP data stream from a application that can send traffic via SOCKS5.</li>
<li>Chop up the TCP stream into multiple Sphinx packets, assigning sequence numbers to them, while leaving the TCP connection open for more data</li>
<li>Send the Sphinx packets through the mixnet to a <a href="#nodes-network-requester-setup">network requester</a>. Packets are shuffled and mixed as they transit the mixnet.</li>
</ul>
<p>The <code>nym-network-requester</code> then reassembles the original TCP stream using the packets' sequence numbers, and make the intended request. It will then chop up the response into Sphinx packets and send them back through the mixnet to your  <code>nym-socks5-client</code>. The application will then receive its data, without even noticing that it wasn't talking to a &quot;normal&quot; SOCKS5 proxy!</p>
<h2 id="clients-socks5-client-client-setup"><a class="header" href="#clients-socks5-client-client-setup">Client setup</a></h2>
<h3 id="clients-socks5-client-viewing-command-help"><a class="header" href="#clients-socks5-client-viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-socks5-client --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">

         _ __  _   _ _ __ ___
        | '_ \| | | | '_ \ _ \
        | | | | |_| | | | | | |
        |_| |_|\__, |_| |_| |_|
                |___/

                (socks5 proxy - version {{platform_release_version}})


        nym-socks5-client {{platform_release_version}}
        Nymtech
        A SOCKS5 localhost proxy that converts incoming messages to Sphinx and sends them to a Nym address

        USAGE:
        nym-socks5-client [OPTIONS] &lt;SUBCOMMAND&gt;

        OPTIONS:
                --config-env-file &lt;CONFIG_ENV_FILE&gt;
                Path pointing to an env file that configures the client

        -h, --help
                Print help information

        -V, --version
                Print version information

        SUBCOMMANDS:
        completions          Generate shell completions
        generate-fig-spec    Generate Fig specification
        help                 Print this message or the help of the given subcommand(s)
        init                 Initialise a Nym client. Do this first!
        run                  Run the Nym client with provided configuration client optionally
                             overriding set parameters
        upgrade              Try to upgrade the client


</code></pre>
<p>You can check the necessary parameters for the available commands by running:</p>
<pre><code>./nym-client &lt;command&gt; --help
</code></pre>
<h3 id="clients-socks5-client-initialising-a-new-client-instance"><a class="header" href="#clients-socks5-client-initialising-a-new-client-instance">Initialising a new client instance</a></h3>
<p>Before you can use the client, you need to initalise a new instance of it, which can be done with the following command:</p>
<pre><code>./nym-socks5-client init --id &lt;id&gt; --provider &lt;provider&gt;
</code></pre>
<p>The <code>--id</code> in the example above is a local identifier so that you can name your clients; it is <strong>never</strong> transmitted over the network.</p>
<p>The <code>--provider</code> field needs to be filled with the Nym address of a Network Requester that can make network requests on your behalf. If you don't want to <a href="#nodes-network-requester-setup">run your own</a> you can select one from the <a href="https://explorer.nymtech.net/network-components/service-providers">mixnet explorer</a> by copying its <code>Client ID</code> and using this as the value of the <code>--provider</code> flag. Alternatively, you could use <a href="https://harbourmaster.nymtech.net/">this list</a>.</p>
<p>Since the nodes on this list are the infrastructure for <a href="https://nymtech.net/developers/quickstart/nymconnect-gui.html">Nymconnect</a> they will support all apps on the <a href="#nodes-network-requester-setup-network-requester-whitelist">default whitelist</a>: Keybase, Telegram, Electrum, Blockstream Green, and Helios.</p>
<h4 id="clients-socks5-client-choosing-a-gateway"><a class="header" href="#clients-socks5-client-choosing-a-gateway">Choosing a Gateway</a></h4>
<p>By default - as in the example above - your client will choose a random gateway to connect to.</p>
<p>However, there are several options for choosing a gateway, if you do not want one that is randomly assigned to your client:</p>
<ul>
<li>If you wish to connect to a specific gateway, you can specify this with the <code>--gateway</code> flag when running <code>init</code>.</li>
<li>You can also choose a gateway based on its location relative to your client. This can be done by appending the <code>--latency-based-selection</code> flag to your <code>init</code> command. This command means that to select a gateway, your client will:
<ul>
<li>fetch a list of all availiable gateways</li>
<li>send few ping messages to all of them, and measure response times.</li>
<li>create a weighted distribution to randomly choose one, favouring ones with lower latency.</li>
</ul>
</li>
</ul>
<blockquote>
<p>Note this doesn't mean that your client will pick the closest gateway to you, but it will be far more likely to connect to gateway with a 20ms ping rather than 200ms</p>
</blockquote>
<h3 id="clients-socks5-client-running-the-socks5-client"><a class="header" href="#clients-socks5-client-running-the-socks5-client">Running the socks5 client</a></h3>
<p>You can run the initalised client by doing this:</p>
<pre><code>./nym-socks5-client run --id &lt;id&gt;
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">
```
2022-04-27T16:15:45.843Z INFO  nym_socks5_client::client &gt; Starting nym client
2022-04-27T16:15:45.889Z INFO  nym_socks5_client::client &gt; Obtaining initial network topology
2022-04-27T16:15:51.470Z INFO  nym_socks5_client::client &gt; Starting topology refresher...
2022-04-27T16:15:51.470Z INFO  nym_socks5_client::client &gt; Starting received messages buffer controller...
2022-04-27T16:15:51.648Z INFO  gateway_client::client    &gt; Claiming more bandwidth for your tokens. This will use 1 token(s) from your wallet. Stop the process now if you don't want that to happen.
2022-04-27T16:15:51.648Z WARN  gateway_client::client    &gt; Not enough bandwidth. Trying to get more bandwidth, this might take a while
2022-04-27T16:15:51.648Z INFO  gateway_client::client    &gt; The client is running in disabled credentials mode - attempting to claim bandwidth without a credential
2022-04-27T16:15:51.706Z INFO  nym_socks5_client::client &gt; Starting mix traffic controller...
2022-04-27T16:15:51.706Z INFO  nym_socks5_client::client &gt; Starting real traffic stream...
2022-04-27T16:15:51.706Z INFO  nym_socks5_client::client &gt; Starting loop cover traffic stream...
2022-04-27T16:15:51.707Z INFO  nym_socks5_client::client &gt; Starting socks5 listener...
2022-04-27T16:15:51.707Z INFO  nym_socks5_client::socks::server &gt; Listening on 127.0.0.1:1080
2022-04-27T16:15:51.707Z INFO  nym_socks5_client::client&gt; Client startup finished!
2022-04-27T16:15:51.707Z INFO  nym_socks5_client::client&gt; The address of this client is: BFKhbyNsSVwbsGSLwHDkfwH5mwZqZYpnpNjjV7Xo25Xc.EFWd1geWspzyVeinwXrY5fCBMRtAKV1QmK1CNFhAA8VG@BNjYZPxzcJwczXHHgBxCAyVJKxN6LPteDRrKapxWmexv
2022-04-27T16:15:51.707Z INFO  nym_socks5_client::socks::server &gt; Serving Connections...
```
</code></pre>
<h2 id="clients-socks5-client-using-your-socks5-client"><a class="header" href="#clients-socks5-client-using-your-socks5-client">Using your Socks5 Client</a></h2>
<p>After completing the steps above, your local Socks5 Client will be listening on <code>localhost:1080</code> ready to proxy traffic to the Network Requester set as the <code>--provider</code> when initialising.</p>
<p>When trying to connect your app, generally the proxy settings are found in <code>settings-&gt;advanced</code> or <code>settings-&gt;connection</code>.</p>
<p>Here is an example of setting the proxy connecting in Blockstream Green:</p>
<p><img src="clients/../images/wallet-proxy-settings/blockstream-green.gif" alt="Blockstream Green settings" /></p>
<p>Most wallets and other applications will work basically the same way: find the network proxy settings, enter the proxy url (host: <strong>localhost</strong>, port: <strong>1080</strong>).</p>
<p>In some other applications, this might be written as <strong>localhost:1080</strong> if there's only one proxy entry field.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="clients-webassembly-client"></div><h1 id="clients-webassembly-client-webassembly-client"><a class="header" href="#clients-webassembly-client-webassembly-client">Webassembly Client</a></h1>
<p>The Nym webassembly client allows any webassembly-capable runtime to build and send Sphinx packets to the Nym network, for uses in edge computing and browser-based applications. </p>
<p>This is currently packaged and distributed for ease of use via the <a href="#sdk-typescript">Nym Typescript SDK library</a>. </p>
<p>The webassembly client allows for the easy creation of Sphinx packets from within mobile apps and browser-based client-side apps (including Electron or similar). </p>
<h2 id="clients-webassembly-client-building-apps-with-nym-client-wasm"><a class="header" href="#clients-webassembly-client-building-apps-with-nym-client-wasm">Building apps with nym-client-wasm</a></h2>
<p>Check out the <a href="#sdk-typescript-using-the-sdk">examples section</a> of the SDK docs for examples of simple application framework setups. There are also two example applications located in the <code>clients/webassembly</code> directory in the main Nym platform codebase. The <code>js-example</code> is a simple, bare-bones JavaScript app. </p>
<h2 id="clients-webassembly-client-think-about-what-youre-sending"><a class="header" href="#clients-webassembly-client-think-about-what-youre-sending">Think about what you're sending!</a></h2>
<pre><code class="language-admonish caution">Think about what information your app sends. That goes for whatever you put into your Sphinx packet messages as well as what your app's environment may leak.
</code></pre>
<p>Whenever you write client PEAPPs using HTML/JavaScript, we recommend that you do not load external resources from CDNs. Webapp developers do this all the time, to save load time for common resources, or just for convenience. But when you're writing privacy apps it's better not to make these kinds of requests. Pack everything locally.</p>
<p>If you use only local resources within your Electron app or your browser extensions, explicitly encoding request data in a Sphinx packet does protect you from the normal leakage that gets sent in a browser HTTP request. <a href="https://panopticlick.eff.org/">There's a lot of stuff that leaks when you make an HTTP request from a browser window</a>. Luckily, all that metadata and request leakage doesn't happen in Nym, because you're choosing very explicitly what to encode into Sphinx packets, instead of sending a whole browser environment by default.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="clients-addressing-system"></div><h1 id="clients-addressing-system-addressing-system"><a class="header" href="#clients-addressing-system-addressing-system">Addressing System</a></h1>
<p>When a Nym client is initalised, it generates and stores its own public/private keypair locally. When the client starts, it automatically connects to the Nym network and finds out what Nym infrastructure exists. It then chooses and connects to a specific Gateway node via websocket.</p>
<p>All apps in the Nym network therefore have an address, in the format:</p>
<pre><code>user-identity-key.user-encryption-key@gateway-identity-key
</code></pre>
<p>Which in practice, looks something like this: </p>
<pre><code>DguTcdkWWtDyUFLvQxRdcA8qZhardhE1ZXy1YCC7Zfmq.Dxreouj5RhQqMb3ZaAxgXFdGkmfbDKwk457FdeHGKmQQ@4kjgWmFU1tcGAZYRZR57yFuVAexjLbJ5M7jvo3X5Hkcf
</code></pre>
<p>This is obviously not very user-friendly and the moment, and will be developed on in the coming months. </p>
<div style="break-before: page; page-break-before: always;"></div><div id="sdk-typescript"></div><h1 id="sdk-typescript-typescript-sdk"><a class="header" href="#sdk-typescript-typescript-sdk">Typescript SDK</a></h1>
<p>The Nym Typescript SDK allows developers to start building browser-based Mixnet applications quickly, by simply importing the SDK into their code via NPM as they would any other Typescript library. </p>
<p>You can find the source code <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/sdk">here</a> and the library on NPM <a href="https://www.npmjs.com/package/@nymproject/sdk">here</a>. </p>
<p>Currently developers can use the SDK to do the following <strong>entirely in the browser</strong>: </p>
<ul>
<li>Create a client</li>
<li>Listen for incoming messages and reply to them</li>
<li>Encrypt text and binary-encoded messages as Sphinx packets and send these through the mixnet</li>
</ul>
<blockquote>
<p>We will be fleshing out further mixnet-related features in the coming weeks with functionality such as importing/exporting keypairs for developing apps with a retained identity over time.</p>
</blockquote>
<p>In the future the SDK will be made up of several components, each of which will allow developers to interact with different parts of Nym's infrastructure.</p>
<div class="table-wrapper"><table><thead><tr><th>Component</th><th>Functionality</th><th>Released</th></tr></thead><tbody>
<tr><td>Mixnet</td><td>Create clients &amp; keypairs, subscribe to Mixnet events, send &amp; receive messages</td><td>✔️</td></tr>
<tr><td>Coconut</td><td>Create &amp; verify Coconut credentials</td><td>❌</td></tr>
<tr><td>Validator</td><td>Sign &amp; broadcast Nyx blockchain transactions, query the blockchain</td><td>❌</td></tr>
</tbody></table>
</div>
<h3 id="sdk-typescript-using-the-sdk"><a class="header" href="#sdk-typescript-using-the-sdk">Using the SDK</a></h3>
<p>The following code snippet shows the basic flow of initialising a client, subscribing to an event on the websocket connection, and sending yourself a message through the Mixnet: </p>
<pre><code class="language-javascript">import { createNymMixnetClient } from '@nymproject/sdk';

const main = async () =&gt; {
  const nym = await createNymMixnetClient();

  const nymApiUrl = 'https://validator.nymtech.net/api';

  // show message payload content when received 
  nym.events.subscribeToTextMessageReceivedEvent((e) =&gt; {
    console.log('Got a message: ', e.args.payload);
  });

  // start the client and connect to a gateway
  await nym.client.start({
    clientId: 'My awesome client',
    nymApiUrl,
  });

  // send a message to yourself
  const payload = 'Hello mixnet';
  const recipient = nym.client.selfAddress();
  nym.client.send({ payload, recipient });
  
};
</code></pre>
<p>You can send a message to another user (you will need to know their address at a Gateway) with: </p>
<pre><code class="language-javascript">const payload = 'Hello mixnet';
const recipient = '&lt;&lt; RECIPIENT ADDRESS GOES HERE &gt;&gt;';
await nym.client.sendMessage({ payload, recipient });
</code></pre>
<p>There are also examples for several different frameworks which can be run in the browser: </p>
<ul>
<li><a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/sdk/typescript/examples/plain-html">Plain html</a></li>
<li><a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/sdk/typescript/examples/react-webpack-with-theme-example">Create-react-app</a> </li>
<li><a href="https://github.com/fmtabbara/nym-sdk-vanilla-template">Vanilla Typescript</a> </li>
</ul>
<h3 id="sdk-typescript-how-it-works"><a class="header" href="#sdk-typescript-how-it-works">How it works</a></h3>
<p>The SDK can be thought of as a 'wrapper' around the compiled <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/clients/webassembly">WebAssembly client</a> code: it runs the client (a Wasm blob) in a web worker. This allows us to keep the work done by the client - such as the heavy lifting of creating and multiply-encrypting Sphinx packets - in a seperate thread from our UI, enabling you to build reactive frontends without worrying about the work done under the hood by the client eating your processing power. </p>
<p>The SDK exposes an interface that allows developers to interact with the Wasm blob inside the webworker from frontend code.</p>
<h3 id="sdk-typescript-framework-support"><a class="header" href="#sdk-typescript-framework-support">Framework Support</a></h3>
<p>Currently, the SDK <strong>only</strong> works with frameworks that use webpack as a bundler. If you want to use the SDK with a framework that isn't on this list, such as Angular, or NodeJS, <strong>here be dragons!</strong> These frameworks will probably use a different bundler than the examples listed above, which are all using Webpack. </p>
<p>Support for environments with different bundlers will be added in subsequent releases. </p>
<div class="table-wrapper"><table><thead><tr><th>Bundler</th><th>Supported</th></tr></thead><tbody>
<tr><td>Webpack</td><td>✔️</td></tr>
<tr><td>Packer</td><td>❌</td></tr>
</tbody></table>
</div><!--      
| Environment      | Supported | 
| ---------------- | --------- | 
| Browser          |  ✔️       |
| Headless NodeJS  |  ❌       |
| Electron Desktop |  ❌       | -->
<h3 id="sdk-typescript-think-about-what-youre-sending"><a class="header" href="#sdk-typescript-think-about-what-youre-sending">Think about what you're sending!</a></h3>
<pre><code class="language-admonish caution">Think about what information your app sends. That goes for whatever you put into your Sphinx packet messages as well as what your app's environment may leak.
</code></pre>
<p>Whenever you write client PEAPPs using HTML/JavaScript, we recommend that you do not load external resources from CDNs. Webapp developers do this all the time, to save load time for common resources, or just for convenience. But when you're writing privacy apps it's better not to make these kinds of requests. Pack everything locally.</p>
<p>If you use only local resources within your Electron app or your browser extensions, explicitly encoding request data in a Sphinx packet does protect you from the normal leakage that gets sent in a browser HTTP request. <a href="https://panopticlick.eff.org/">There's a lot of stuff that leaks when you make an HTTP request from a browser window</a>. Luckily, all that metadata and request leakage doesn't happen in Nym, because you're choosing very explicitly what to encode into Sphinx packets, instead of sending a whole browser environment by default.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="sdk-rust"></div><h1 id="sdk-rust-rust-sdk-coming-soon"><a class="header" href="#sdk-rust-rust-sdk-coming-soon">Rust SDK (coming soon)</a></h1>
<p>🦀 coming soon 🦀</p>
<div style="break-before: page; page-break-before: always;"></div><div id="wallet-desktop-wallet"></div><h1 id="wallet-desktop-wallet-desktop-wallet"><a class="header" href="#wallet-desktop-wallet-desktop-wallet">Desktop Wallet</a></h1>
<p>The Nym Desktop Wallet lets you interact with your Nym node and to delegate stake to others, see the vesting schedule of tokens, and transfer tokens. In future releases, it will also let you access the Nym mixnet.</p>
<p>You can download it for Mac, Windows, or Linux.</p>
<p><a href="https://github.com/nymtech/nym/releases/tag/nym-wallet-%7B%7Bplatform_release_version%7D%7D"><img src="wallet/../images/download-wallet.png" alt="download nym wallet" /></a></p>
<h3 id="wallet-desktop-wallet-bypassing-security-warnings"><a class="header" href="#wallet-desktop-wallet-bypassing-security-warnings">Bypassing security warnings</a></h3>
<p>On Windows you will see a security warning pop up when you attempt to run the wallet. We are in the process of getting app store keys from Microsoft so that this doesn't happen. See the section below for details on steps to bypass these. </p>
<h4 id="wallet-desktop-wallet-linux"><a class="header" href="#wallet-desktop-wallet-linux">Linux</a></h4>
<p>You will need to <code>chmod +x</code> the AppImage in the terminal (or give it execute permission in your file browser) before it will run. </p>
<h4 id="wallet-desktop-wallet-windows"><a class="header" href="#wallet-desktop-wallet-windows">Windows</a></h4>
<p><em>You will still encounter warnings when opening the wallet on Windows. This is because - although the wallet is approved by Microsoft - it has less than 10 thousand downloads at the current time. Once the wallet has passed this threshold, this warning will disappear.</em></p>
<p>Follow the steps below to bypass the warnings. </p>
<ul>
<li>Select more-info after clicking the msi installer app: </li>
</ul>
<p><img src="wallet/../images/wallet-warnings/windows_warningv1-0-2.png" alt="Windows Warning" /></p>
<ul>
<li>Proceed to 'run-anyway':</li>
</ul>
<p><img src="wallet/../images/wallet-warnings/windows_warning2.png" alt="Windows Warning" /></p>
<ul>
<li>Follow the installer instructions: </li>
</ul>
<p><img src="wallet/../images/wallet-warnings/windows_warning3.png" alt="Windows Warning" /></p>
<p><img src="wallet/../images/wallet-warnings/windows_warning4.png" alt="Windows Warning" /></p>
<p><img src="wallet/../images/wallet-warnings/windows_warning5.png" alt="Windows Warning" /></p>
<h3 id="wallet-desktop-wallet-for-developers"><a class="header" href="#wallet-desktop-wallet-for-developers">For developers</a></h3>
<p>If you would like to the compile the wallet yourself, follow the instructions below. </p>
<blockquote>
<p>Please note that the wallet has currently only been built on the operating systems for which there are binaries as listed above. If you find an issue or any additional prerequisties, please create an issue or PR against <code>develop</code> on <a href="https://github.com/nymtech/docs">Github</a>.</p>
</blockquote>
<h4 id="wallet-desktop-wallet-software-prerequisites-for-building-the-wallet"><a class="header" href="#wallet-desktop-wallet-software-prerequisites-for-building-the-wallet">Software prerequisites for building the wallet</a></h4>
<ul>
<li><code>git</code></li>
</ul>
<pre><code>sudo apt update
sudo apt install git
</code></pre>
<p>Verify <code>git</code> is installed with:</p>
<pre><code>git version
# Should return: git version X.Y.Z
</code></pre>
<ul>
<li>
<p><a href="https://yarnpkg.com/">Yarn</a></p>
</li>
<li>
<p><code>NodeJS &gt;= v16.8.0</code></p>
</li>
<li>
<p><code>Rust &amp; cargo &gt;= v1.56</code></p>
</li>
</ul>
<p>We recommend using the <a href="https://www.rust-lang.org/tools/install">Rust shell script installer</a>. Installing cargo from your package manager (e.g. <code>apt</code>) is not recommended as the packaged versions are usually too old.</p>
<p>If you really don't want to use the shell script installer, the <a href="https://forge.rust-lang.org/infra/other-installation-methods.html">Rust installation docs</a> contain instructions for many platforms.</p>
<h4 id="wallet-desktop-wallet-additional-prerequisites-for-ubuntudebian-systems"><a class="header" href="#wallet-desktop-wallet-additional-prerequisites-for-ubuntudebian-systems">Additional prerequisites for Ubuntu/Debian systems</a></h4>
<pre><code>sudo apt update
sudo apt install pkg-config build-essential libssl-dev curl jq
</code></pre>
<h4 id="wallet-desktop-wallet-additional-prerequisites-for-windows"><a class="header" href="#wallet-desktop-wallet-additional-prerequisites-for-windows">Additional prerequisites for Windows</a></h4>
<ul>
<li>When running on Windows you will need to install the <code>c++</code> build tools.</li>
<li>An easy guide to get Rust up and running can be found <a href="http://kennykerr.ca/2019/11/18/rust-getting-started/">here</a>.</li>
<li>When installing <code>NodeJS</code> please use the <code>current features</code> version.</li>
<li>Using a package manager like <a href="https://chocolatey.org/">Chocolatey</a> is recommended.</li>
</ul>
<h3 id="wallet-desktop-wallet-removing-signing-errors-when-building-in-development-mode"><a class="header" href="#wallet-desktop-wallet-removing-signing-errors-when-building-in-development-mode">Removing signing errors when building in development mode</a></h3>
<p>If you're wanting to build the wallet yourself, you will need to make a few modifications to the file located at <code>nym-wallet/src-tauri/tauri.conf.json</code> before doing so. These relate to the wallet being accepted by Mac and Windows app stores, and so aren't relevant to you when building and running the wallet yourself. </p>
<p>On <strong>all</strong> operating systems: </p>
<ul>
<li>set the value of line 49 to <code>false</code></li>
<li>remove lines 50 to 54 </li>
</ul>
<p>As well as these modifications for MacOS and Windows users: </p>
<ul>
<li>MacOS users must also remove line 39 </li>
<li>Windows users must remove lines 42 to 46 </li>
</ul>
<h3 id="wallet-desktop-wallet-installation"><a class="header" href="#wallet-desktop-wallet-installation">Installation</a></h3>
<p>Once you have made these modifications to <code>tauri.conf.json</code>, inside of the <code>nym-wallet</code> folder, run:</p>
<pre><code>yarn install
</code></pre>
<h3 id="wallet-desktop-wallet-running-in-development-mode"><a class="header" href="#wallet-desktop-wallet-running-in-development-mode">Running in Development Mode</a></h3>
<blockquote>
<p>Make sure you copy over the contents of the provided <code>.env.sample</code> to a new <code>.env</code> file before proceeding</p>
</blockquote>
<p>You can run the wallet without having to install it in development mode by running the following terminal command from the <code>nym-wallet</code> folder</p>
<pre><code>yarn dev
</code></pre>
<p>This will then start the Wallet GUI and produce a binary in <code>nym-wallet/target/debug/</code> named <code>nym-wallet</code>. </p>
<h3 id="wallet-desktop-wallet-running-in-production-mode"><a class="header" href="#wallet-desktop-wallet-running-in-production-mode">Running in Production Mode</a></h3>
<blockquote>
<p>Make sure you copy over the contents of the provided <code>.env.sample</code> to a new <code>.env</code> file before proceeding</p>
</blockquote>
<p>To build and install the wallet, run the following terminal command from the <code>nym-wallet</code> folder.</p>
<pre><code>yarn build
</code></pre>
<p>This will build an executable file that you can use to install the wallet on your machine. The output will compile different types of binaries dependent on your hardware / OS system. Once the binaries are built, they can be located as follows:</p>
<pre><code>Binary output directory structure
**macos**
|
└─── target/release
|   |─ nym-wallet
└───target/release/bundle/dmg
│   │─ bundle_dmg.sh
│   │─ nym-wallet.*.dmg
└───target/release/bundle/macos/MacOs
│   │─ nym-wallet
|
**Linux**
└─── target/release
|   │─  nym-wallet
└───target/release/bundle/appimage
│   │─  nym-wallet_*_.AppImage
│   │─  build_appimage.sh
└───target/release/bundle/deb
│   │─  nym-wallet_*_.deb
|
**Windows**
└─── target/release
|   │─  nym-wallet.exe
└───target/release/bundle/msi
│   │─  nym-wallet_*_.msi
</code></pre>
<h3 id="wallet-desktop-wallet-importing-or-creating-accounts-when-you-have-signed-in-with-mnemonic"><a class="header" href="#wallet-desktop-wallet-importing-or-creating-accounts-when-you-have-signed-in-with-mnemonic">Importing or creating account(s) when you have signed in with mnemonic</a></h3>
<p>To import or create a new account, first you need to create a password for your wallet:</p>
<ol>
<li>Log out from the wallet</li>
<li>Sign in using &quot;Sign in with mnemonic&quot; button</li>
<li>On the next screen select “Create a password&quot;</li>
<li>Type in the mnemonic you want to create a password for and follow the next steps</li>
<li>Sign back in the wallet using your new password</li>
<li>Come back to this page to import or create new accounts</li>
</ol>
<h3 id="wallet-desktop-wallet-importing-or-creating-accounts-when-you-have-signed-in-with-mnemonic-but-a-password-already-exists-on-your-machine"><a class="header" href="#wallet-desktop-wallet-importing-or-creating-accounts-when-you-have-signed-in-with-mnemonic-but-a-password-already-exists-on-your-machine">Importing or creating account(s) when you have signed in with mnemonic but a password already exists on your machine</a></h3>
<p>To import or create a new account, you need to log in with your existing password or create a new password. </p>
<blockquote>
<p>Creating a new password will overwrite any old one stored on your machine. Make sure you have saved any mnemonics associated with the password before creating a new one.</p>
</blockquote>
<ol>
<li>Log out</li>
<li>Click on “Forgot password” </li>
<li>On the next screen select “Create new password”</li>
<li>Follow the instructions and create a new password</li>
<li>Sign in using your new password</li>
</ol>
<h3 id="wallet-desktop-wallet-cli-tool-for-wallet-encrypted-file-password-recovery"><a class="header" href="#wallet-desktop-wallet-cli-tool-for-wallet-encrypted-file-password-recovery">CLI tool for wallet encrypted file (password) recovery:</a></h3>
<p>The mnemonics that are stored in the local password protected file can also be decrypted and recovered through a simple CLI tool, <code>nym-wallet-recovery-cli</code>. </p>
<pre><code>nym-wallet-recovery –file saved-wallet.json –password foo
</code></pre>
<p>The saved wallet file can be found in <code>$XDG_DATA_HOME</code> or <code>$HOME/.local/share</code> on Linux, <code>$HOME/Library/Application Support</code> on Mac, and <code>C:\Users\username\AppData\Local</code> on Windows.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="wallet-cli-wallet"></div><h1 id="wallet-cli-wallet-cli-wallet"><a class="header" href="#wallet-cli-wallet-cli-wallet">CLI Wallet</a></h1>
<p>If you have already read our validator setup and maintenance <a href="#nodes-validator-setup">documentation</a> you will have seen that we compile and use the <code>nyxd</code> binary primarily for our validators. This binary can however be used for many other tasks, such as creating and using keypairs for wallets, or automated setups that require the signing and broadcasting of transactions. </p>
<h3 id="wallet-cli-wallet-using-nyxd-binary-as-a-cli-wallet"><a class="header" href="#wallet-cli-wallet-using-nyxd-binary-as-a-cli-wallet">Using <code>nyxd</code> binary as a CLI wallet</a></h3>
<p>You can use the <code>nyxd</code> as a minimal CLI wallet if you want to set up an account (or multiple accounts). Just compile the binary as per the documentation, <strong>stopping after</strong> the <a href="#nodes-validator-setup-building-your-validator">building your validator</a> step is complete. You can then run <code>nyxd keys --help</code> to see how you can set up and store different keypairs with which to interact with the Nyx blockchain. </p>
<!-- For more on interacting with the chain, see the [Interacting with Nyx Chain and Smart Contracts](../nyx/interacting-with-chain.md) page.  -->
<div style="break-before: page; page-break-before: always;"></div><div id="explorers-mixnet-explorer"></div><h1 id="explorers-mixnet-explorer-mixnet-explorer"><a class="header" href="#explorers-mixnet-explorer-mixnet-explorer">Mixnet Explorer</a></h1>
<p>The Nym Network Explorer lets you explore the Nym network. We have open-sourced the explorer so that anyone can run an instance of it, further decentralising the network! </p>
<h3 id="explorers-mixnet-explorer-prerequisites"><a class="header" href="#explorers-mixnet-explorer-prerequisites">Prerequisites</a></h3>
<ul>
<li><code>git</code></li>
</ul>
<pre><code>sudo apt update
sudo apt install git
</code></pre>
<p>Verify <code>git</code> is installed with:</p>
<pre><code>git version
# Should return: git version X.Y.Z
</code></pre>
<ul>
<li>(Debian/Ubuntu) <code>pkg-config</code>, <code>build-essential</code>, <code>libssl-dev</code>, <code>curl</code>, <code>jq</code></li>
</ul>
<pre><code>sudo apt update
sudo apt install pkg-config build-essential libssl-dev curl jq
</code></pre>
<ul>
<li>
<p><code>NodeJS</code> (use <code>nvm install</code> to automatically install the correct version) and <code>npm</code></p>
</li>
<li>
<p><code>Rust &amp; cargo &gt;= {{minimum_rust_version}}</code></p>
</li>
</ul>
<p>We recommend using the <a href="https://www.rust-lang.org/tools/install">Rust shell script installer</a>. Installing cargo from your package manager (e.g. <code>apt</code>) is not recommended as the packaged versions are usually too old.</p>
<p>If you really don't want to use the shell script installer, the <a href="https://forge.rust-lang.org/infra/other-installation-methods.html">Rust installation docs</a> contain instructions for many platforms.</p>
<h3 id="explorers-mixnet-explorer-local-development"><a class="header" href="#explorers-mixnet-explorer-local-development">Local Development</a></h3>
<p>Complete the steps in the <a href="#binaries-building-nym">building nym</a> section, before <code>cd</code>-ing into <code>nym/explorer</code>. </p>
<p>Start a development server with hot reloading running on <code>http://localhost:3000</code> with the following commands from inside the <code>explorer</code> directory:</p>
<pre><code>nvm install # install relevant nodejs and npm versions 
npm install
npm run start
</code></pre>
<p><code>eslint</code> and <code>prettier</code> are already configured.</p>
<p>You can lint the code by running:</p>
<pre><code>npm run lint
</code></pre>
<blockquote>
<p>This command will only <strong>show</strong> linting errors and will not fix them!</p>
</blockquote>
<p>To fix all linting errors automatically run:</p>
<pre><code>npm run lint:fix
</code></pre>
<p>Please see the development docs in <code>explorer/docs</code> for more information on the structure and design of this app.</p>
<h3 id="explorers-mixnet-explorer-deployment"><a class="header" href="#explorers-mixnet-explorer-deployment">Deployment</a></h3>
<p>Complete the steps in the <a href="#binaries-building-nym">building nym</a> section, before <code>cd</code>-ing into <code>nym/explorer</code>. </p>
<blockquote>
<p>The Network Explorer should be run on a machine with at least 4GB of RAM - the build process might fail if run on a less powerful machine. </p>
</blockquote>
<h4 id="explorers-mixnet-explorer-building-the-explorer-ui"><a class="header" href="#explorers-mixnet-explorer-building-the-explorer-ui">Building the Explorer UI</a></h4>
<p>Build the UI with these commands from within the <code>explorer</code> directory:</p>
<pre><code>nvm install # install relevant nodejs and npm versions 
npm install
npm run build
</code></pre>
<p>The output will be in the <code>dist</code> directory. </p>
<p>This can then be either served directly from the <code>nym</code> directory, or from its own directory if you wish. See the template nginx config below for more on how to host this. </p>
<h4 id="explorers-mixnet-explorer-building-the-explorer-api"><a class="header" href="#explorers-mixnet-explorer-building-the-explorer-api">Building the Explorer API</a></h4>
<p>The Explorer API was built in the previous step with <code>cargo build</code>. </p>
<h3 id="explorers-mixnet-explorer-automating-the-explorer-with-systemd"><a class="header" href="#explorers-mixnet-explorer-automating-the-explorer-with-systemd">Automating the explorer with systemd</a></h3>
<p>You will most likely want to automate the Explorer-API restarting if your server reboots. Below is a systemd unit file to place at <code>/etc/systemd/system/nym-explorer-api.service</code>:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Explorer API (1.1.0)
StartLimitIntervalSec=350
StartLimitBurst=10

[Service]
User=nym
Type=simple
Environment=&quot;API_STATE_FILE=/home/nym/network-explorer/explorer-api-state.json&quot;
Environment=&quot;GEO_IP_SERVICE_API_KEY=c69155d0-25f6-11ec-80bc-75e5dbd322c3&quot;
ExecStart=explorer/api/location
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Proceed to start it with:</p>
<pre><code>systemctl daemon-reload # to pickup the new unit file
systemctl enable nymd   # to enable the service
systemctl start nymd    # to actually start the service
journalctl -f           # to monitor system logs showing the service start
</code></pre>
<h3 id="explorers-mixnet-explorer-installing-and-configuring-nginx-for-https"><a class="header" href="#explorers-mixnet-explorer-installing-and-configuring-nginx-for-https">Installing and configuring nginx for HTTPS</a></h3>
<h4 id="explorers-mixnet-explorer-setup"><a class="header" href="#explorers-mixnet-explorer-setup">Setup</a></h4>
<p><a href="https://www.nginx.com/resources/glossary/nginx/#:~:text=NGINX%20is%20open%20source%20software,%2C%20media%20streaming%2C%20and%20more.&amp;text=In%20addition%20to%20its%20HTTP,%2C%20TCP%2C%20and%20UDP%20servers.">Nginx</a> is an open source software used for operating high-performance web servers. It allows us to set up reverse proxying on our validator server to improve performance and security.</p>
<p>Install <code>nginx</code> and allow the 'Nginx Full' rule in your firewall:</p>
<pre><code>sudo ufw allow 'Nginx Full'
</code></pre>
<p>Check nginx is running via systemctl:</p>
<pre><code>systemctl status nginx
</code></pre>
<p>Which should return:</p>
<pre><code>● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2018-04-20 16:08:19 UTC; 3 days ago
     Docs: man:nginx(8)
 Main PID: 2369 (nginx)
    Tasks: 2 (limit: 1153)
   CGroup: /system.slice/nginx.service
           ├─2369 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─2380 nginx: worker process
</code></pre>
<h4 id="explorers-mixnet-explorer-configuration"><a class="header" href="#explorers-mixnet-explorer-configuration">Configuration</a></h4>
<p>Replace the default nginx configuration at <code>/etc/nginx/sites-available/</code> with: </p>
<pre><code>server {
  listen 80;
  listen [::]:80;
  server_name domain;
  root html_location;
  location / {
    try_files /$uri /$uri/index.html /index.html =404;
  }

  location /api {
      proxy_pass http://127.0.0.1:8000;
		  rewrite /api/(.*) /$1  break;
                  proxy_set_header  X-Real-IP $remote_addr;
                  proxy_set_header  Host $host;
                  proxy_set_header  X-Real-IP $remote_addr;
  }
}
</code></pre>
<p>Followed by:</p>
<pre><code>sudo apt install certbot nginx python3
certbot --nginx -d nym-validator.yourdomain.com -m you@yourdomain.com --agree-tos --noninteractive --redirect
</code></pre>
<pre><code class="language-admonish caution">If using a VPS running Ubuntu 20: replace `certbot nginx python3` with `python3-certbot-nginx`
</code></pre>
<h3 id="explorers-mixnet-explorer-configure-your-firewall"><a class="header" href="#explorers-mixnet-explorer-configure-your-firewall">Configure your firewall</a></h3>
<p>The following commands will allow you to set up a firewall using <code>ufw</code>.</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Now open the ports: </p>
<pre><code>sudo ufw allow 22,80,443/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div id="nyx-smart-contracts"></div><h1 id="nyx-smart-contracts-smart-contracts"><a class="header" href="#nyx-smart-contracts-smart-contracts">Smart Contracts</a></h1>
<p>The Nyx blockchain is based on <a href="https://cosmwasm.com/">CosmWasm</a>. It allows users to code smart contracts in a safe subset of the Rust programming language, easily export them to WebAssembly, and upload them to the blockchain. Information about the chain can be found on the <a href="https://nym.explorers.guru/">Nyx blockchain explorer</a>. </p>
<p>There are currently two smart contracts on the Nyx chain: </p>
<ul>
<li>the <a href="#nyx-mixnet-contract">Mixnet contract</a> which manages the network topology of the mixnet, tracking delegations and rewarding. </li>
<li>the <a href="#nyx-vesting-contract">Vesting contract</a> which manages <code>NYM</code> token vesting functionality.</li>
</ul>
<blockquote>
<p>Users will soon be able to create and upload their own CosmWasm smart contracts to Nyx and take advantage of applications such as the Coconut Credential Scheme - more to be announced regarding this very soon.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><div id="nyx-mixnet-contract"></div><h1 id="nyx-mixnet-contract-mixnet-contract"><a class="header" href="#nyx-mixnet-contract-mixnet-contract">Mixnet Contract</a></h1>
<p>The Mixnet smart contract is a core piece of the Nym system, functioning as the mixnet directory and keeping track of delegations and rewards: the core functionality required by an incentivised mixnet. You can find the code and build instructions <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/contracts/mixnet">here</a>.</p>
<h3 id="nyx-mixnet-contract-functionality"><a class="header" href="#nyx-mixnet-contract-functionality">Functionality</a></h3>
<p>The Mixnet contract has multiple functions: </p>
<ul>
<li>storing bonded mix node and gateway information (and removing this on unbonding).</li>
<li>providing the network-topology to the (cached) validator API endpoint used by clients on startup for routing information. </li>
<li>storing delegation and bond amounts.</li>
<li>storing reward amounts. </li>
</ul>
<p>The addresses of deployed smart contracts can be found in the <a href="https://github.com/nymtech/nym/blob/release/%7B%7Bplatform_release_version%7D%7D/common/network-defaults/src/mainnet.rs"><code>network-defaults</code></a> directory of the codebase alongside other network default values.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="nyx-vesting-contract"></div><h1 id="nyx-vesting-contract-vesting-contract"><a class="header" href="#nyx-vesting-contract-vesting-contract">Vesting Contract</a></h1>
<p>The vesting contract allows for the creation of vesting accounts, allowing <code>NYM</code> tokens to vest over time, and for users to minimally interact with the Mixnet using their unvested tokens. You can find the code and build instructions <a href="https://github.com/nymtech/nym/tree/release/%7B%7Bplatform_release_version%7D%7D/contracts/vesting">here</a>. </p>
<h3 id="nyx-vesting-contract-functionality"><a class="header" href="#nyx-vesting-contract-functionality">Functionality</a></h3>
<p>The Vesting contract has multiple functions:</p>
<ul>
<li>Creating and storing vesting <code>NYM</code> token vesting accounts.</li>
<li>Interacting with the Mixnet using vesting (i.e. non-transferable) tokens, allowing users to delegate their unvested tokens. </li>
</ul>
<p>The addresses of deployed smart contracts can be found in the <a href="https://github.com/nymtech/nym/blob/release/%7B%7Bplatform_release_version%7D%7D/common/network-defaults/src/mainnet.rs"><code>network-defaults</code></a> directory of the codebase alongside other network default values.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="nyx-rpc-node"></div><h1 id="nyx-rpc-node-rpc-nodes"><a class="header" href="#nyx-rpc-node-rpc-nodes">RPC Nodes</a></h1>
<p>RPC Nodes (which might otherwise be referred to as 'Lite Nodes' or just 'Full Nodes') differ from Validators in that they hold a copy of the Nyx blockchain, but do <strong>not</strong> participate in consensus / block-production. </p>
<p>You may want to set up an RPC Node for querying the blockchain, or in order to have an endpoint that your app can use to send transactions. </p>
<p>In order to set up an RPC Node, simply follow the instructions to set up a <a href="#nodes-validator-setup">Validator</a>, but <strong>exclude the <code>nyxd tx staking create-validator</code> command</strong>. </p>
<p>If you want to fast-sync your node, check out the Polkachu snapshot and their other <a href="https://polkachu.com/seeds/nym">resources</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="nyx-ledger-live"></div><h1 id="nyx-ledger-live-ledger-live-support"><a class="header" href="#nyx-ledger-live-ledger-live-support">Ledger Live Support</a></h1>
<p>Use the following instructions to interact with the Nyx blockchain - either with deployed smart contracts, or just to send tokens - using your Ledger device to sign transactions. </p>
<h2 id="nyx-ledger-live-prerequisites"><a class="header" href="#nyx-ledger-live-prerequisites">Prerequisites</a></h2>
<ul>
<li>Download and install <a href="https://www.ledger.com/ledger-live">Ledger Live</a>. </li>
<li>Compile the <code>nyxd</code> binary as per the instructions <a href="#nodes-validator-setup-building-the-nym-validator">here</a>. Stop after you can successfully run <code>nyxd</code> and get the helptext in your console output. </li>
</ul>
<h2 id="nyx-ledger-live-prepare-your-ledger-app"><a class="header" href="#nyx-ledger-live-prepare-your-ledger-app">Prepare your Ledger App</a></h2>
<ul>
<li>Plug in your Ledger device</li>
<li>Install the <code>Cosmos (ATOM)</code> app by following the instructions <a href="https://hub.cosmos.network/main/resources/ledger.html">here</a>. This app allows you to interact with <strong>any</strong> Cosmos SDK chain - you can manage your ATOM, OSMOSIS, NYM tokens, etc.</li>
<li>On the device, navigate to the Cosmos app and open it</li>
</ul>
<h2 id="nyx-ledger-live-create-a-keypair"><a class="header" href="#nyx-ledger-live-create-a-keypair">Create a keypair</a></h2>
<p>Add a reference to the ledger device on your local machine by running the following command in the same directory as your <code>nyxd</code> binary: </p>
<pre><code>nyxd keys add ledger_account --ledger 
</code></pre>
<h2 id="nyx-ledger-live-command-help-with-nyxd"><a class="header" href="#nyx-ledger-live-command-help-with-nyxd">Command help with <code>nyxd</code></a></h2>
<p>More information about each command is available by consulting the help section (<code>--help</code>) at each layer of <code>nyxd</code>'s commands:</p>
<pre><code># logging top level command help
nyxd --help

# logging top level command help for transaction commands 
nyxd tx --help

# logging top level command help for transaction commands utilising the 'bank' module
nyxd tx bank --help
</code></pre>
<h2 id="nyx-ledger-live-sending-tokens-between-addresses"><a class="header" href="#nyx-ledger-live-sending-tokens-between-addresses">Sending tokens between addresses</a></h2>
<p>Perform a transaction from the CLI with <code>nyxd</code>, appending the <code>--ledger</code> option to the command. </p>
<p>As an example, the below command will send 1 <code>NYM</code> from the ledger account to the <code>$DESTINATION_ACCOUNT</code>:</p>
<pre><code>nyxd tx bank send ledger_account $DESTINATION_ACCOOUNT 1000000unym --ledger --node https://rpc.dev.nymte.ch:443
</code></pre>
<blockquote>
<p>When a command is run, the transaction will appear on the Ledger device and will require physical confirmation from the device before being signed.</p>
</blockquote>
<h2 id="nyx-ledger-live-nym-specific-transactions"><a class="header" href="#nyx-ledger-live-nym-specific-transactions">Nym-specific transactions</a></h2>
<p>Nym-specific commands and queries, like bonding a mix node or delegating unvested tokens, are available in the <code>wasm</code> module, and follow the following pattern: </p>
<pre><code># Executing commands
nyxd tx wasm execute $CONTRACT_ADDRESS $JSON_MSG

# Querying the state of a smart contract 
nyxd query wasm contract-state smart $CONTRACT_ADDRESS $JSON_MSG
</code></pre>
<p>You can find the value of <code>$CONTRACT_ADDRESS</code> in the <a href="https://github.com/nymtech/nym/blob/release/v1.1.7/common/network-defaults/src/mainnet.rs"><code>network defaults</code></a> file. </p>
<p>The value of <code>$JSON_MSG</code> will be a blog of <code>json</code> formatted as defined for each command and query. You can find these definitions for the mixnet smart contract <a href="https://github.com/nymtech/nym/blob/develop/common/cosmwasm-smart-contracts/mixnet-contract/src/msg.rs">here</a> and for the vesting contract <a href="https://github.com/nymtech/nym/blob/develop/common/cosmwasm-smart-contracts/vesting-contract/src/messages.rs">here</a> under <code>ExecuteMsg</code> and <code>QueryMsg</code>. </p>
<h3 id="nyx-ledger-live-example-command-execution"><a class="header" href="#nyx-ledger-live-example-command-execution">Example command execution:</a></h3>
<h4 id="nyx-ledger-live-delegate-to-a-mix-node"><a class="header" href="#nyx-ledger-live-delegate-to-a-mix-node">Delegate to a mix node</a></h4>
<p>You can delegate to a mix node from the CLI using <code>nyxd</code> and signing the transaction with your ledger by filling in the values of this example: </p>
<pre><code>CONTRACT_ADDRESS=mixnet_contract_address

./nyxd tx wasm execute $CONTRACT_ADDRESS '{&quot;delegate_to_mixnode&quot;:{&quot;mix_identity&quot;:&quot;MIX_NODE_IDENTITY&quot;,&quot;amount&quot;:{&quot;amount&quot;:&quot;100000000000&quot;,&quot;denom&quot;:&quot;unym&quot;}}}' --ledger --from admin --node https://rpc.dev.nymte.ch:443 --gas-prices 0.025unymt --gas auto -b block
</code></pre>
<blockquote>
<p>By replacing the value of <code>CONTRACT_ADDRESS</code> with the address of the vesting contract, you could use the above command to use tokens held in the vesting contract. </p>
</blockquote>
<h4 id="nyx-ledger-live-query-a-vesting-schedule"><a class="header" href="#nyx-ledger-live-query-a-vesting-schedule">Query a vesting schedule</a></h4>
<p>You can query for (e.g.) seeing the current vesting period of an address by filling in the values of the following: </p>
<pre><code>CONTRACT_ADDRESS=vesting_contract_address

nyxd query wasm contract-state smart $CONTRACT_ADDRESS '{&quot;get_current_vesting_period&quot;}:{&quot;address&quot;: &quot;address_to_query_for&quot;}' --ledger --from admin --node https://rpc.dev.nymte.ch:443 --chain-id qa-net --gas-prices 0.025unymt --gas auto -b block  
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div id="coconut"></div><h1 id="coconut-coconut"><a class="header" href="#coconut-coconut">Coconut</a></h1>
<blockquote>
<p>Coconut is in active development - stay tuned for code and integration examples</p>
</blockquote>
<p>Coconut is a cryptographic signature scheme that produces privacy-enhanced credentials. It lets application programmers who are concerned with resource access control to think and code in a new way.</p>
<p>Most of the time, when we build system security, we think of <em>who</em> questions:</p>
<ul>
<li>Has Alice identified herself (authentication)?</li>
<li>Is Alice allowed to take a specific action (authorisation)?</li>
</ul>
<p>Coconut fundamentally changes these questions. Rather than asking <em>who</em> a user is, it allows application designers to ask different questions, mostly centered around questions of <em>rights</em>:</p>
<ul>
<li>Does the entity taking this action have a right to do X?</li>
</ul>
<p>This allows a different kind of security. Many of the computer systems we talk to every day don't need to know <em>who we are</em>, they only need to know if we have a <em>right to use</em> the system. Coconut allows signing authorities and validators to work together to determine whether a given private key holder has a right to take an action. The credentials are generated cooperatively by decentralised, trustless systems.</p>
<p>Once the credentials are generated, they can be <em>re-randomized:</em> entirely new credentials, which no one has ever seen before, can be presented to service providers, and magically validated without being linkable back to the credential originally given out by validators.</p>
<p>These properties allow Coconut credentials to act as something like a decentralized and fully private version of OAuth credentials, or like cryptographic bearer tokens generated by decentralised systems. The tokens can be mutated so that they are not traceable, but still verified with the original permissions intact.</p>
<p>Users present cryptographic claims encoded inside the credentials to get secure access to resources despite the systems verifying credential usage not being able to know who they are.</p>
<h3 id="coconut-re-randomisation-vs-pseudonymity"><a class="header" href="#coconut-re-randomisation-vs-pseudonymity">Re-randomisation vs pseudonymity</a></h3>
<p>We stand on the shoulders of giants. Ten years ago, Bitcoin showed the way forward by allowing people to control resource access without recourse to <em>who</em> questions. Rather, in Bitcoin and succeeding blockchains, a private key proves a <em>right to use</em>.</p>
<p>But as we can now see, private keys in blockchain systems act only as a minor barrier to finding out <em>who</em> is accessing resources. A Bitcoin or Ethereum private key is effectively a long-lived pseudonym which is easily traceable through successive transactions.</p>
<p>Coconut allows us to build truly private systems rather than pseudonymous ones.</p>
<h3 id="coconut-how-does-coconut-work"><a class="header" href="#coconut-how-does-coconut-work">How does Coconut work?</a></h3>
<p>Just like normal credentials, Nym's Coconut credentials can be signed with a secret key and later verified by anybody with the correct public key. But Nym credentials have additional superpowers when compared to &quot;normal&quot; signature schemes like RSA or DSA.</p>
<p>Specifically, Coconut is a blinded, re-randomizable, selective disclosure threshold credential signature scheme. That's quite a mouthful, so let's break it down into its component parts.</p>
<p>Let's say you have a <code>message</code> with the content <code>This credential controls X</code> in hand. In addition to the normal <code>sign(message, secretKey)</code> and <code>verify(message, publicKey)</code> functions present in other signature schemes, Coconut adds the following:</p>
<ol>
<li>
<p><em><a href="https://en.wikipedia.org/wiki/Blind_signature">Blind signatures</a></em> - disguises message content so that the signer can't see what they're signing. This defends users against signers: the entity that signed can't identify the user who created a given credential, since they've never seen the message they're signing before it's been <em>blinded</em> (turned into gobbledygook). Coconut uses zero-knowledge proofs so that the signer can sign confidently without seeing the unblinded content of the message.</p>
</li>
<li>
<p><em>Re-randomizable signatures</em> - take a signature, and generate a brand new signature that is valid for the same underlying message <code>This credential controls X</code>. The new bitstring in the re-randomized signature is equivalent to the original signature but not linkable to it. So a user can &quot;show&quot; a credential multiple times, and each time it appears to be a new credential, which is unlinkable to any previous &quot;show&quot;. But the underlying content of the re-randomized credential is the same (including for things like double-spend protection). This once again protects the user against the signer, because the signer can't trace the signed message that they gave back to the user when it is presented. It also protects the user against the relying party that accepts the signed credential. The user can show re-randomized credentials repeatedly, and although the underlying message is the same in all cases, there's no way of tracking them by watching the user present the same credential multiple times.</p>
</li>
<li>
<p><em>Selective disclosure of attributes</em> - allows someone with the public key to verify some, but not all, parts of a message. So you could for instance selectively reveal parts of a signed message to some people, but not to others. This is a very powerful property of Coconut, potentially leading to diverse applications: voting systems, selective revelation of medical data, privacy-friendly KYC systems, etc.</p>
</li>
<li>
<p><em><a href="https://en.wikipedia.org/wiki/Threshold_cryptosystem">Threshold issuance</a></em> - allows signature generation to be split up across multiple nodes and decentralized, so that either all signers need to sign (<em>n of n</em> where <em>n</em> is the number of signers) or only a threshold number of signers need to sign a message (<em>t of n</em> where <em>t</em> is the threshold value).</p>
</li>
</ol>
<p>Taken together, these properties provide privacy for applications when it comes to generating and using signatures for cryptographic claims. If you compare it to existing tech, you might think of it as a sort of supercharged decentralized privacy-friendly <a href="https://jwt.io/">JWT</a>.</p>
<p>A slightly expanded view of Coconut is available <a href="https://medium.com/nymtech/nyms-coconut-credentials-an-overview-4aa4e922cd51">in this blog post</a>.</p>
<h3 id="coconut-using-coconut-for-blockchain-transaction-privacy"><a class="header" href="#coconut-using-coconut-for-blockchain-transaction-privacy">Using Coconut for blockchain transaction privacy</a></h3>
<p>In the context of a blockchain currency system, Coconut allows us to create a privacy-enhanced Coconut credential which provably represents an amount under control of a given entity. The credential can then be &quot;spent&quot; anonymously, as if it were the original value. Double-spending protections apply to the credential, so it can only be spent once. Nyx Validators can then unlock the value so it can be redeemed by the party holding the credential.</p>
<p>Although there's still work to be done to integrate it against various blockchains, in principle Coconut can anonymise blockchain transactions in any system which provides multi-sig. We're working on <a href="https://cosmos.network">Cosmos</a> integration at the moment. Bitcoin and Ethereum are also obvious targets here.</p>
<p>Coconut is simple and flexible, and can ensure privacy for more than coin transfers; it can provide privacy for more complex smart contracts as well.</p>
<p>Finally, it should be mentioned that Coconut can be applied to both blockchain and non-blockchain systems - it's a general purpose technology.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="bandwidth-credentials"></div><h1 id="bandwidth-credentials-bandwidth-credentials"><a class="header" href="#bandwidth-credentials-bandwidth-credentials">Bandwidth Credentials</a></h1>
<p>You can now try using Nym Bandwidth Credentials in our <a href="https://sandbox-explorer.nymtech.net">Sandbox testnet environment</a>.</p>
<p>Create a <code>sandbox.env</code> file with the following details: </p>
<pre><code>CONFIGURED=true

RUST_LOG=info
RUST_BACKTRACE=1

BECH32_PREFIX=nymt
MIX_DENOM=unymt
MIX_DENOM_DISPLAY=nymt
STAKE_DENOM=unyxt
STAKE_DENOM_DISPLAY=nyxt
DENOMS_EXPONENT=6

REWARDING_VALIDATOR_ADDRESS=&quot;nymt1mxuweurc066kprnngtm8zmvam7m2nw26yatpmv&quot;
MIXNET_CONTRACT_ADDRESS=&quot;nymt1dlsvvgey26ernlj0sq2afjluh3qd4ap0k9eerekfkw5algqrwqksaf2qf7&quot;
VESTING_CONTRACT_ADDRESS=&quot;nymt19g9xuqrvz2frv905v3fc7puryfypluhg383q9zwsmedrlqekfgys62ykm4&quot;
BANDWIDTH_CLAIM_CONTRACT_ADDRESS=&quot;nymt1rhmk9udessnv3r8f3eh2s03f45svnjaczpmcqz&quot;
MULTISIG_CONTRACT_ADDRESS=&quot;nymt142dkm8xe9f0ytyarp7ww4kvclva65705jphxsk9exn3nqdsm8jkqnp06ac&quot;
COCONUT_BANDWIDTH_CONTRACT_ADDRESS=&quot;nymt1ty0frysegskh6ndm3v96z5xdq66qzcu0aw7xcxlgp54jg0mjwlgqplc6v0&quot;
COCONUT_DKG_CONTRACT_ADDRESS=&quot;nymt1gwk6muhmzeuxje7df7rjvqwl2vex0kj4t2hwuzmyx5k62kfusu5qk4k5z4&quot;
GROUP_CONTRACT_ADDRESS=&quot;nymt14ry36mwauycz08v8ndcujghxz4hmua5epxcn0mamlr3suqe0l2qsqx5ya2&quot;

STATISTICS_SERVICE_DOMAIN_ADDRESS=&quot;http://0.0.0.0&quot;
NYXD=&quot;https://sandbox-validator1.nymtech.net&quot;
NYM_API=&quot;https://sandbox-validator1-api.nymtech.net/api&quot;
</code></pre>
<p>Create an account on Sandbox using the nym-cli: </p>
<p><code>./nym-cli --config-env-file &lt;path-to&gt;sandbox.env account create</code></p>
<p>You will need <code>nymt</code> funds sent to this account. Get in touch via Nym <a href="https://t.me/nymchan">Telegram</a> or <a href="https://discord.com/invite/nym">Discord</a> and we can send them to you. </p>
<p>Next, you init the nym-client with the enabled credentials mode set to true:</p>
<p><code>./nym-client --config-env-file &lt;path-to&gt;sandbox.env init --id &lt;ID&gt; --enabled-credentials-mode true</code></p>
<p>Using the new credentials binary, purchase some credentials for the client. The recovery directory is a directory where the credentials will be temporarily stored in case the request fails.</p>
<p><code>./credential --config-env-file &lt;path-to&gt;sandbox.env run --client-home-directory &lt;path-to-the-client-config&gt; --nyxd-url https://sandbox-validator1.nymtech.net --mnemonic &quot;&lt;mnemonic of the account created above&gt;&quot; --amount 50 --recovery-dir &lt;a-path&gt; </code></p>
<p>You can redeem this now by running the nym-client, in enabled credentials mode:</p>
<p><code>./nym-client --config-env-file &lt;path-to&gt;sandbox.env run --id &lt;ID&gt; --enabled-credentials-mode true</code></p>
<p>Run the network requester which can be downloaded <a href="https://github.com/nymtech/nym/releases/download/nym-binaries-v1.1.9/nym-network-requester">here</a></p>
<p><code>./nym-network-requester run</code></p>
<blockquote>
<p>You need to run this version for now, as the <code>nym-client</code> functionality was recently integrated into the <code>network-requester</code> binary but for the moment cannot support coconut credentials natively.</p>
</blockquote>
<p>Now time to init the socks5 client: </p>
<p><code>./nym-socks5-client --config-env-file &lt;path-to&gt;sandbox.env init --id &lt;ID&gt; --provider &lt;insert provider address which was returned when init-ing the nym-client&gt; --enabled-credentials-mode true</code></p>
<p>Purchase credentials for this now too: </p>
<p><code>./credential --config-env-file &lt;path-to&gt;sandbox.env run --client-home-directory &lt;path-to-socks5-config&gt; --nyxd-url https://sandbox-validator1.nymtech.net --mnemonic &quot;&lt;any valid sandbox mnemonic&gt;&quot; --amount 100 --recovery-dir &lt;a-path&gt;</code></p>
<p>Run the socks5 client:</p>
<p><code>./nym-socks5-client --config-env-file &lt;path-to&gt;sandbox.env run --id &lt;ID&gt; --enabled-credentials-mode true</code></p>
<p>NOTE </p>
<p>You can check to see if credentials have been correctly purchased by installing sqlite, and proceeding to do the following:</p>
<pre><code>sqlite3 ~/.nym/socks5-clients/&lt;ID&gt;/data/credentials_database.db  
select * from coconut_credentials;
</code></pre>
<p>Keep in mind 1GB = 1NYM </p>
<div style="break-before: page; page-break-before: always;"></div><div id="tools-nym-cli"></div><h1 id="tools-nym-cli-nym-cli"><a class="header" href="#tools-nym-cli-nym-cli">Nym-CLI</a></h1>
<p>This is a CLI tool for interacting with:</p>
<ul>
<li>the Nyx blockchain (account management, querying the chain state, etc)</li>
<li>the smart contracts deployed on Nyx (bonding and unbonding mixnodes, collecting rewards, etc)</li>
</ul>
<p>It provides a convenient wrapper around the <code>nymd</code> client, and has similar functionality to the <code>nyxd</code> binary for querying the chain or executing smart contract methods.</p>
<h2 id="tools-nym-cli-building"><a class="header" href="#tools-nym-cli-building">Building</a></h2>
<p>The <code>nym-cli</code> binary can be built by running <code>cargo build --release</code> in the <code>nym/tools/nym-cli</code> directory. </p>
<h3 id="tools-nym-cli-useage"><a class="header" href="#tools-nym-cli-useage">Useage</a></h3>
<p>You can see all available commands with: </p>
<pre><code>./nym-cli --help      
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

nym-cli 
A client for interacting with Nym smart contracts and the Nyx blockchain

USAGE:
    nym-cli [OPTIONS] &lt;subcommand&gt;

OPTIONS:
        --config-env-file &lt;CONFIG_ENV_FILE&gt;
            Overrides configuration as a file of environment variables. Note: individual env vars
            take precedence over this file.

    -h, --help
            Print help information

        --mixnet-contract-address &lt;MIXNET_CONTRACT_ADDRESS&gt;
            Overrides the mixnet contract address provided either as an environment variable or in a
            config file

        --mnemonic &lt;MNEMONIC&gt;
            Provide the mnemonic for your account. You can also provide this is an env var called
            MNEMONIC.

        --nymd-url &lt;NYMD_URL&gt;
            Overrides the nymd URL provided either as an environment variable NYMD_VALIDATOR or in a
            config file

        --validator-api-url &lt;VALIDATOR_API_URL&gt;
            Overrides the validator API URL provided either as an environment variable API_VALIDATOR
            or in a config file

        --vesting-contract-address &lt;VESTING_CONTRACT_ADDRESS&gt;
            Overrides the vesting contract address provided either as an environment variable or in
            a config file

subcommands:
    account             Query and manage Nyx blockchain accounts
    block               Query chain blocks
    cosmwasm            Manage and execute WASM smart contracts
    generate-fig        Generates shell completion
    help                Print this message or the help of the given subcommand(s)
    mixnet              Manage your mixnet infrastructure, delegate stake or query the directory
    signature           Sign and verify messages
    tx                  Query for transactions
    vesting-schedule    Create and query for a vesting schedule
```
</code></pre>
<h2 id="tools-nym-cli-example-usage"><a class="header" href="#tools-nym-cli-example-usage">Example Usage</a></h2>
<p>Below we have listed some example commands for some of the features listed above. </p>
<p>If ever in doubt what you need to type, or if you want to see alternative parameters for a command, use the <code>nym-cli &lt;subcommand_name&gt; --help</code> to view all available options.</p>
<pre><code>./nym-cli account create --help     
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

Create a new mnemonic - note, this account does not appear on the chain until the account id is used in a transaction

USAGE:
    nym-cli account create [OPTIONS]

OPTIONS:
    --config-env-file &lt;CONFIG_ENV_FILE&gt;
        Overrides configuration as a file of environment variables. Note: individual env vars take precedence over this file.

-h, --help
        Print help information

    --mixnet-contract-address &lt;MIXNET_CONTRACT_ADDRESS&gt;
        Overrides the mixnet contract address provided either as an environment variable or in a
        config file

    --mnemonic &lt;MNEMONIC&gt;
        Provide the mnemonic for your account. You can also provide this is an env var called
        MNEMONIC.

    --nymd-url &lt;NYMD_URL&gt;
        Overrides the nymd URL provided either as an environment variable NYMD_VALIDATOR or in a
        config file

    --validator-api-url &lt;VALIDATOR_API_URL&gt;
        Overrides the validator API URL provided either as an environment variable API_VALIDATOR
        or in a config file

    --vesting-contract-address &lt;VESTING_CONTRACT_ADDRESS&gt;
        Overrides the vesting contract address provided either as an environment variable or in
        a config file

    --word-count &lt;WORD_COUNT&gt;
```
</code></pre>
<h3 id="tools-nym-cli-create-account"><a class="header" href="#tools-nym-cli-create-account">Create account</a></h3>
<p>Creates an account with a random Mnemonic and a new address.</p>
<pre><code>./nym-cli account create     

# Result:
# 1. Mnemonic
assist jungle spoil domain saddle energy box carpet toy resist castle faith talent note outdoor inform cage lecture syrup trigger dress oppose slender museum
# 2. Address
n132tpw4kkfas7ah0vmq78dwurhxljf2f869tlf5
</code></pre>
<blockquote>
<p>NEVER share your mnemonic with anyone. Keep it stored in a safe and secure location.</p>
</blockquote>
<h3 id="tools-nym-cli-check-the-current-balance-of-an-account"><a class="header" href="#tools-nym-cli-check-the-current-balance-of-an-account">Check the current balance of an account</a></h3>
<p>Queries the existing balance of an account.</p>
<pre><code># Using adddress below for example purposes.
./nym-cli account balance n1hzn28p2c6pzr98r85jp3h53fy8mju5w7ndd5vh     

# Result:
2022-11-10T10:28:54.009Z INFO  nym_cli_commands::validator::account::balance &gt; Getting balance for n1hzn28p2c6pzr98r85jp3h53fy8mju5w7ndd5vh...

# Balance for each token will be listed here
0.264 nym
1921.995 nyx
</code></pre>
<p>You can also query an accounts balance by using its mnemonic:</p>
<pre><code>./nym-cli account balance --mnemonic &lt;mnemonic&gt;  
</code></pre>
<h3 id="tools-nym-cli-send-tokens-to-an-account"><a class="header" href="#tools-nym-cli-send-tokens-to-an-account">Send tokens to an account</a></h3>
<p>Sends tokens to an account using an address.</p>
<pre><code>./nym-cli account send &lt;ADDRESS&gt; &lt;AMOUNT&gt;
</code></pre>
<h3 id="tools-nym-cli-get-the-current-block-height"><a class="header" href="#tools-nym-cli-get-the-current-block-height">Get the current block height</a></h3>
<p>Queries the specified blockchain (Nyx chain by default) for the current block height.</p>
<pre><code>./nym-cli block current-height --mnemonic &lt;mnemonic&gt;

# Result: 
Current block height:
&lt;BLOCK_HEIGHT&gt;
</code></pre>
<h3 id="tools-nym-cli-query-for-a-mix-node"><a class="header" href="#tools-nym-cli-query-for-a-mix-node">Query for a mix node</a></h3>
<p>Query a mix node on the mixnet.</p>
<pre><code>./nym-cli mixnet query mixnodes --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-bond-a-mix-node"><a class="header" href="#tools-nym-cli-bond-a-mix-node">Bond a mix node</a></h3>
<p>Bonding a mix node is a process that takes a few steps due to the need to sign a transaction with your nym address for replay attack protection. </p>
<ul>
<li>generate a signature payload: </li>
</ul>
<pre><code>./nym-cli mixnet operators mixnode create-mixnode-bonding-sign-payload 

# returns something like 
97GEhgMrPTmQVZgHqJeqWmgQ154GLKqy8xNGtLkV8xy5xc1SuwsEnqjhtZVshBYK74n53fFkKbSrS6kxkBE3vUikbU76JZmLMFmfR7aaU2NdBnfTPPHP2nwb2hJiEueq4SvvtDtQckxv7ZJzdxyXHxUeDPhzbprxTff78U3NGNk4cg6Q2K4EFqishdaqToedsXAPvVCWNbC1iWVjEq8nJ95Eb3NJyi3KmXcNDy4i8ZXgZHu4v8F4htXq2vZUdBSbizdkNr1NRvEg6PGVQdTseyuN8JxD3yuvrqprPY2kvJaT2YiYLPgWxoQtbfwcpkX4PP1PvwuMg4W8EXhitMpM2WHqLDP5vgfDGxdDCmRS44pM8ya4hcQ4g3McHWxduGWdbCzNNEsX6oQw4LVFcWn4mhbXSgqHwNQMm2TQW6LatYZSwCczdhEwV2CXe36UGCUzozmm4nj9qfUtXqDzMrHAAS8kjbKaVNaVaRRKgauQrHnK7QGg1QpVnnaxCs14wvUb62sio8XZmMzP2SjVaRJFCyJB3UwZ6L4oXMGMXSRsiKe8ZNTaa6iX69tx54CAAHBHoiReiq7E5T2VuR5v
</code></pre>
<ul>
<li>sign this payload: </li>
</ul>
<pre><code>./nym-mixnode sign --id upgrade_test --contract-msg 97GEhgMrPTmQVZgHqJeqWmgQ154GLKqy8xNGtLkV8xy5xc1SuwsEnqjhtZVshBYK74n53fFkKbSrS6kxkBE3vUikbU76JZmLMFmfR7aaU2NdBnfTPPHP2nwb2hJiEueq4SvvtDtQckxv7ZJzdxyXHxUeDPhzbprxTff78U3NGNk4cg6Q2K4EFqishdaqToedsXAPvVCWNbC1iWVjEq8nJ95Eb3NJyi3KmXcNDy4i8ZXgZHu4v8F4htXq2vZUdBSbizdkNr1NRvEg6PGVQdTseyuN8JxD3yuvrqprPY2kvJaT2YiYLPgWxoQtbfwcpkX4PP1PvwuMg4W8EXhitMpM2WHqLDP5vgfDGxdDCmRS44pM8ya4hcQ4g3McHWxduGWdbCzNNEsX6oQw4LVFcWn4mhbXSgqHwNQMm2TQW6LatYZSwCczdhEwV2CXe36UGCUzozmm4nj9qfUtXqDzMrHAAS8kjbKaVNaVaRRKgauQrHnK7QGg1QpVnnaxCs14wvUb62sio8XZmMzP2SjVaRJFCyJB3UwZ6L4oXMGMXSRsiKe8ZNTaa6iX69tx54CAAHBHoiReiq7E5T2VuR5v
</code></pre>
<ul>
<li>bond the node using the signature: </li>
</ul>
<pre><code>./nym-cli --mnemonic &lt;mnemonic&gt; mixnet operators mixnode bond --amount 100000000 --mix-port 1789 --version &quot;1.1.13&quot; --host &quot;85.163.111.99&quot; --identity-key &quot;B6pWscxYb8sPAdKTci8zPy5AgMzn5Zx8KpWwQNCyUSU7&quot; --location &quot;nym-town&quot; --sphinx-key &quot;o6MmKHzRewpNzVwaV37ZX9G3BfK4AmfYvsQfyoyAFRk&quot; --signature &quot;2TujBZfer8r5QM639Yb8coD9xH6f5eXzjAT5dD7wMom9fH8D1u36d7UpPdVaaZrWsCynmYpobwMWqiMKr5kM6CprD&quot;
</code></pre>
<h3 id="tools-nym-cli-bond-a-gateway"><a class="header" href="#tools-nym-cli-bond-a-gateway">Bond a gateway</a></h3>
<p>Bonding a mix node is a process that takes a few steps due to the need to sign a transaction with your nym address for replay attack protection. </p>
<ul>
<li>generate a signature payload: </li>
</ul>
<pre><code>./nym-cli mixnet operators gateway create-gateway-bonding-sign-payload 

# returns something like 
97GEhgMrPTmQVZgHqJeqWmgQ154GLKqy8xNGtLkV8xy5xc1SuwsEnqjhtZVshBYK74n53fFkKbSrS6kxkBE3vUikbU76JZmLMFmfR7aaU2NdBnfTPPHP2nwb2hJiEueq4SvvtDtQckxv7ZJzdxyXHxUeDPhzbprxTff78U3NGNk4cg6Q2K4EFqishdaqToedsXAPvVCWNbC1iWVjEq8nJ95Eb3NJyi3KmXcNDy4i8ZXgZHu4v8F4htXq2vZUdBSbizdkNr1NRvEg6PGVQdTseyuN8JxD3yuvrqprPY2kvJaT2YiYLPgWxoQtbfwcpkX4PP1PvwuMg4W8EXhitMpM2WHqLDP5vgfDGxdDCmRS44pM8ya4hcQ4g3McHWxduGWdbCzNNEsX6oQw4LVFcWn4mhbXSgqHwNQMm2TQW6LatYZSwCczdhEwV2CXe36UGCUzozmm4nj9qfUtXqDzMrHAAS8kjbKaVNaVaRRKgauQrHnK7QGg1QpVnnaxCs14wvUb62sio8XZmMzP2SjVaRJFCyJB3UwZ6L4oXMGMXSRsiKe8ZNTaa6iX69tx54CAAHBHoiReiq7E5T2VuR5v
</code></pre>
<ul>
<li>sign this payload: </li>
</ul>
<pre><code>./nym-gateway sign --id upgrade_test --contract-msg 97GEhgMrPTmQVZgHqJeqWmgQ154GLKqy8xNGtLkV8xy5xc1SuwsEnqjhtZVshBYK74n53fFkKbSrS6kxkBE3vUikbU76JZmLMFmfR7aaU2NdBnfTPPHP2nwb2hJiEueq4SvvtDtQckxv7ZJzdxyXHxUeDPhzbprxTff78U3NGNk4cg6Q2K4EFqishdaqToedsXAPvVCWNbC1iWVjEq8nJ95Eb3NJyi3KmXcNDy4i8ZXgZHu4v8F4htXq2vZUdBSbizdkNr1NRvEg6PGVQdTseyuN8JxD3yuvrqprPY2kvJaT2YiYLPgWxoQtbfwcpkX4PP1PvwuMg4W8EXhitMpM2WHqLDP5vgfDGxdDCmRS44pM8ya4hcQ4g3McHWxduGWdbCzNNEsX6oQw4LVFcWn4mhbXSgqHwNQMm2TQW6LatYZSwCczdhEwV2CXe36UGCUzozmm4nj9qfUtXqDzMrHAAS8kjbKaVNaVaRRKgauQrHnK7QGg1QpVnnaxCs14wvUb62sio8XZmMzP2SjVaRJFCyJB3UwZ6L4oXMGMXSRsiKe8ZNTaa6iX69tx54CAAHBHoiReiq7E5T2VuR5v
</code></pre>
<ul>
<li>bond the node using this signature: </li>
</ul>
<pre><code>./nym-cli --mnemonic &lt;mnemonic&gt; mixnet operators gateway bond --amount 100000000 --mix-port 1789 --version &quot;1.1.13&quot; --host &quot;85.163.111.99&quot; --identity-key &quot;B6pWscxYb8sPAdKTci8zPy5AgMzn5Zx8KpWwQNCyUSU7&quot; --location &quot;nym-town&quot; --sphinx-key &quot;o6MmKHzRewpNzVwaV37ZX9G3BfK4AmfYvsQfyoyAFRk&quot; --signature &quot;2TujBZfer8r5QM639Yb8coD9xH6f5eXzjAT5dD7wMom9fH8D1u36d7UpPdVaaZrWsCynmYpobwMWqiMKr5kM6CprD&quot;
</code></pre>
<h3 id="tools-nym-cli-unbond-a-node"><a class="header" href="#tools-nym-cli-unbond-a-node">Unbond a node</a></h3>
<p>Unbond a mix node or gateway. </p>
<pre><code>./nym-cli mixnet operators gateway unbound --mnemonic &lt;mnemonic&gt;
</code></pre>
<blockquote>
<p>The same command can be applied with a mix node. Just replace <code>gateway</code> with <code>mixnode</code>.</p>
</blockquote>
<h3 id="tools-nym-cli-upgrade-a-mix-node"><a class="header" href="#tools-nym-cli-upgrade-a-mix-node">Upgrade a mix node</a></h3>
<p>Upgrade your node config. </p>
<pre><code>./nym-cli mixnet operators mixnode settings update-config --version &lt;new_version&gt;
</code></pre>
<h3 id="tools-nym-cli-claim-a-vesting-reward-for-a-mixnode"><a class="header" href="#tools-nym-cli-claim-a-vesting-reward-for-a-mixnode">Claim a vesting reward for a mixnode</a></h3>
<p>Claim rewards for a mix node bonded with locked tokens.</p>
<pre><code>./nym-cli mixnet operators mixnode rewards vesting-claim --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-claim-rewards"><a class="header" href="#tools-nym-cli-claim-rewards">Claim rewards</a></h3>
<pre><code>./nym-cli mixnet operators mixnode rewards --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-manage-mix-node-settings"><a class="header" href="#tools-nym-cli-manage-mix-node-settings">Manage Mix node Settings</a></h3>
<p>Manage your mix node settings stored in the directory.</p>
<pre><code>./nym-cli mixnet operators mixnode settings update-config --version &lt;VERSION_NUMBER&gt;
</code></pre>
<h3 id="tools-nym-cli-delegate-stake"><a class="header" href="#tools-nym-cli-delegate-stake">Delegate Stake</a></h3>
<p>Delegate to a mix node.</p>
<pre><code>./nym-cli mixnet delegators delegate --amount &lt;AMOUNT&gt; –mix-id &lt;MIX_ID&gt; --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-undelegate-stake"><a class="header" href="#tools-nym-cli-undelegate-stake">Undelegate Stake</a></h3>
<p>Remove stake from a mix node.</p>
<pre><code>./nym-cli mixnet delegators undelegate --mix-id &lt;MIX-ID&gt; --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-query-a-reward-for-a-delegator"><a class="header" href="#tools-nym-cli-query-a-reward-for-a-delegator">Query a reward for a delegator</a></h3>
<p>Claim rewards accumulated during the delegation of unlocked tokens.</p>
<pre><code>./nym-cli mixnet delegators rewards claim --mix-id &lt;MIX-ID&gt; --mnemonic &lt;mnemonic&gt;
</code></pre>
<h3 id="tools-nym-cli-signature-generation-sign-a-message"><a class="header" href="#tools-nym-cli-signature-generation-sign-a-message">Signature Generation: Sign a message</a></h3>
<p>Sign a message.</p>
<pre><code>./nym-cli signature sign --mnemonic &lt;mnemonic&gt; &lt;MESSAGE&gt;

# Result:
{&quot;account_id&quot;:&lt;ACCOUNT_ID&gt;,&quot;public_key&quot;:{&quot;@type&quot;:&quot;/cosmos.crypto.secp256k1.PubKey&quot;,&quot;key&quot;:&lt;PUBLIC_KEY&gt;},&quot;signature&quot;:&quot;&lt;OUTPUT_SIGNATURE&gt;&quot;}
</code></pre>
<h3 id="tools-nym-cli-signature-generation-verify-a-signature"><a class="header" href="#tools-nym-cli-signature-generation-verify-a-signature">Signature Generation: Verify a signature</a></h3>
<p>Verify a signature.</p>
<pre><code>./nym-cli signature verify  --mnemonic &lt;mnemonic&gt; &lt;PUBLIC_KEY_OR_ADDRESS&gt; &lt;SIGNATURE_AS_HEX&gt; &lt;MESSAGE&gt; 
</code></pre>
<h3 id="tools-nym-cli-create-a-vesting-schedule"><a class="header" href="#tools-nym-cli-create-a-vesting-schedule">Create a Vesting Schedule</a></h3>
<p>Creates a vesting schedule for an account in the <a href="#nyx-vesting-contract">vesting smart contract</a>.</p>
<pre><code>./nym-cli vesting-schedule create --mnemonic &lt;mnemonic&gt; --address &lt;ADDRESS&gt; --amount &lt;AMOUNT&gt;
</code></pre>
<h3 id="tools-nym-cli-query-a-vesting-schedule"><a class="header" href="#tools-nym-cli-query-a-vesting-schedule">Query a Vesting Schedule</a></h3>
<p>Query for vesting schedule in the <a href="#nyx-vesting-contract">vesting smart contract</a>.</p>
<pre><code>./nym-cli vesting-schedule query --mnemonic &lt;mnemonic&gt;
</code></pre>
<h2 id="tools-nym-cli-staking-on-someones-behalf-for-custodians"><a class="header" href="#tools-nym-cli-staking-on-someones-behalf-for-custodians">Staking on someone's behalf (for custodians)</a></h2>
<p>There is a limitation the the staking address can only perform the following actions (and are visible via the Nym Wallet:</p>
<ul>
<li>Bond on the gaƒteway's or mix node's behalf.</li>
<li>Delegate or Undelegate (to a mix node in order to begin receiving rewards)</li>
<li>Claiming the rewards on the account</li>
</ul>
<pre><code class="language-admonish note title=&quot;&quot;">The staking address has no ability to withdraw any coins from the parent's account.
</code></pre>
<p>The staking address must maintain the same level of security as the parent mnemonic; while the parent mnemonic's delegations and bonding events will be visible to the parent owner, the staking address will be the only account capable of undoing the bonding and delegating from the mix nodes or gateway.</p>
<p>Query for staking on behlaf of someone else</p>
<pre><code>./nym-cli --mnemonic &lt;staking address mnemonic&gt;  mixnet delegators delegate --mix-id &lt;input&gt; --identity-key &lt;input&gt; --amount &lt;input&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><div id="coc"></div><h1 id="coc-code-of-conduct"><a class="header" href="#coc-code-of-conduct">Code of Conduct</a></h1>
<p>We are committed to providing a friendly, safe and welcoming environment for all, regardless of level of experience, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, ethnicity, age, religion, nationality, or other similar characteristic.</p>
<p>Please avoid using overtly sexual aliases or other nicknames that might detract from a friendly, safe and welcoming environment for all.</p>
<p>Please be kind and courteous. There’s no need to be mean or rude.</p>
<p>Respect that people have differences of opinion and that every design or implementation choice carries a trade-off and numerous costs. There is seldom a right answer.</p>
<p>Please keep unstructured critique to a minimum. If you have solid ideas you want to experiment with, make a fork and see how it works.</p>
<p>We will exclude you from interaction if you insult, demean or harass anyone. That is not welcome behaviour. We interpret the term “harassment” as including the definition in the Citizen Code of Conduct; if you have any lack of clarity about what might be included in that concept, please read their definition. In particular, we don’t tolerate behaviour that excludes people in socially marginalized groups.</p>
<p>Private harassment is also unacceptable. No matter who you are, if you feel you have been or are being harassed or made uncomfortable by a community member, please contact one of the channel ops or any of the Rust moderation team immediately. Whether you’re a regular contributor or a newcomer, we care about making this community a safe place for you and we’ve got your back.</p>
<p>Likewise any spamming, trolling, flaming, baiting or other attention-stealing behaviour is not welcome.</p>
<div style="break-before: page; page-break-before: always;"></div><div id="licensing"></div><h1 id="licensing-licensing"><a class="header" href="#licensing-licensing">Licensing</a></h1>
<p>Nym is Free Software released under the Apache License V2.</p>
<p>All of the contributions of the Nym core developers are © Nym Technologies SA. If you are interested in talking to us about other licenses, please get in touch.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
