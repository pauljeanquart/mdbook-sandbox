<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Gateway - Sandbox</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../SUMMARY.html"></a></li><li class="chapter-item expanded affix "><li class="part-title">Summary</li><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Architecture</li><li class="chapter-item expanded "><a href="../architecture/network-overview.html"><strong aria-hidden="true">2.</strong> Network Overview</a></li><li class="chapter-item expanded "><a href="../architecture/traffic-flow.html"><strong aria-hidden="true">3.</strong> Mixnet Traffic Flow</a></li><li class="chapter-item expanded affix "><li class="part-title">Binaries</li><li class="chapter-item expanded "><a href="../binaries/pre-built-binaries.html"><strong aria-hidden="true">4.</strong> Pre-built Binaries</a></li><li class="chapter-item expanded "><a href="../binaries/building-nym.html"><strong aria-hidden="true">5.</strong> Building from Source</a></li><li class="chapter-item expanded "><a href="../binaries/init-and-config.html"><strong aria-hidden="true">6.</strong> Binary Initialisation and Configuration</a></li><li class="chapter-item expanded "><a href="../binaries/version-compatiblity.html"><strong aria-hidden="true">7.</strong> Version Compatibility Table</a></li><li class="chapter-item expanded affix "><li class="part-title">Nodes</li><li class="chapter-item expanded "><a href="../nodes/setup-guides.html"><strong aria-hidden="true">8.</strong> Node Setup Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodes/mix-node-setup.html"><strong aria-hidden="true">8.1.</strong> Mix Node</a></li><li class="chapter-item expanded "><a href="../nodes/gateway-setup.html" class="active"><strong aria-hidden="true">8.2.</strong> Gateway</a></li><li class="chapter-item expanded "><a href="../nodes/network-requester-setup.html"><strong aria-hidden="true">8.3.</strong> Network Requester</a></li><li class="chapter-item expanded "><a href="../nodes/validator-setup.html"><strong aria-hidden="true">8.4.</strong> Validator</a></li></ol></li><li class="chapter-item expanded "><a href="../nodes/troubleshooting.html"><strong aria-hidden="true">9.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Clients</li><li class="chapter-item expanded "><a href="../clients/overview.html"><strong aria-hidden="true">10.</strong> Clients Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../clients/websocket-client.html"><strong aria-hidden="true">10.1.</strong> Websocket</a></li><li class="chapter-item expanded "><a href="../clients/socks5-client.html"><strong aria-hidden="true">10.2.</strong> Socks5</a></li><li class="chapter-item expanded "><a href="../clients/webassembly-client.html"><strong aria-hidden="true">10.3.</strong> Webassembly</a></li></ol></li><li class="chapter-item expanded "><a href="../clients/addressing-system.html"><strong aria-hidden="true">11.</strong> Addressing System</a></li><li class="chapter-item expanded affix "><li class="part-title">SDK</li><li class="chapter-item expanded "><a href="../sdk/typescript.html"><strong aria-hidden="true">12.</strong> Typescript SDK</a></li><li class="chapter-item expanded "><a href="../sdk/rust.html"><strong aria-hidden="true">13.</strong> Rust SDK (coming soon)</a></li><li class="chapter-item expanded affix "><li class="part-title">Wallet</li><li class="chapter-item expanded "><a href="../wallet/desktop-wallet.html"><strong aria-hidden="true">14.</strong> Desktop Wallet</a></li><li class="chapter-item expanded "><a href="../wallet/cli-wallet.html"><strong aria-hidden="true">15.</strong> CLI Wallet</a></li><li class="chapter-item expanded affix "><li class="part-title">Explorers</li><li class="chapter-item expanded "><a href="../explorers/mixnet-explorer.html"><strong aria-hidden="true">16.</strong> Mixnet Explorer</a></li><li class="chapter-item expanded affix "><li class="part-title">Nyx Blockchain</li><li class="chapter-item expanded "><a href="../nyx/smart-contracts.html"><strong aria-hidden="true">17.</strong> Smart Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nyx/mixnet-contract.html"><strong aria-hidden="true">17.1.</strong> Mixnet Contract</a></li><li class="chapter-item expanded "><a href="../nyx/vesting-contract.html"><strong aria-hidden="true">17.2.</strong> Vesting Contract</a></li></ol></li><li class="chapter-item expanded "><a href="../nyx/rpc-node.html"><strong aria-hidden="true">18.</strong> RPC Nodes</a></li><li class="chapter-item expanded "><a href="../nyx/ledger-live.html"><strong aria-hidden="true">19.</strong> Ledger Live Support</a></li><li class="chapter-item expanded affix "><li class="part-title">Coconut</li><li class="chapter-item expanded "><a href="../coconut.html"><strong aria-hidden="true">20.</strong> Coconut</a></li><li class="chapter-item expanded "><a href="../bandwidth-credentials.html"><strong aria-hidden="true">21.</strong> Bandwidth Credentials</a></li><li class="chapter-item expanded affix "><li class="part-title">Tools</li><li class="chapter-item expanded "><a href="../tools/nym-cli.html"><strong aria-hidden="true">22.</strong> NymCLI</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Misc.</li><li class="chapter-item expanded "><a href="../coc.html"><strong aria-hidden="true">23.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="../licensing.html"><strong aria-hidden="true">24.</strong> Licensing</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sandbox</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gateways"><a class="header" href="#gateways">Gateways</a></h1>
<blockquote>
<p>The Nym gateway was built in the <a href="../binaries/building-nym.html">building nym</a> section. If you haven't yet built Nym and want to run the code, go there first.</p>
</blockquote>
<h2 id="preliminary-steps"><a class="header" href="#preliminary-steps">Preliminary steps</a></h2>
<p>There are a couple of steps that need completing before starting to set up your gateway:</p>
<ul>
<li>preparing your wallet</li>
<li>requisitioning a VPS (Virtual Private Server)</li>
</ul>
<h3 id="wallet-preparation"><a class="header" href="#wallet-preparation">Wallet preparation</a></h3>
<h4 id="mainnet"><a class="header" href="#mainnet">Mainnet</a></h4>
<p>Before you initialise and run your gateway, head to our <a href="https://nymtech.net/download/">website</a> and download the Nym wallet for your operating system. If pre-compiled binaries for your operating system aren't availiable, you can build the wallet yourself with instructions <a href="../wallet/desktop-wallet.html">here</a>. </p>
<p>If you don't already have one, please create a Nym address using the wallet, and fund it with tokens. The minimum amount required to bond a gateway is 100 <code>NYM</code>, but make sure you have a bit more to account for gas costs.</p>
<p><code>NYM</code> can be purchased via Bity from the wallet itself, and is currently present on several exchanges. Head to our <a href="https://t.me/nymchan">telegram channels</a> to find out where to get <code>NYM</code> tokens.</p>
<blockquote>
<p>Remember that you can <strong>only</strong> use native Cosmos <code>NYM</code> tokens to bond your gateway. You <strong>cannot</strong> use ERC20 representations of <code>NYM</code> to run a node. </p>
</blockquote>
<h4 id="sandbox-testnet"><a class="header" href="#sandbox-testnet">Sandbox testnet</a></h4>
<p>Make sure to download a wallet and create an account as outlined above. Then head to our <a href="https://faucet.nymtech.net/">token faucet</a> and get some tokens to use to bond it. </p>
<h3 id="vps-hardware-specs"><a class="header" href="#vps-hardware-specs">VPS Hardware Specs</a></h3>
<p>You will need to rent a VPS to run your mix node on. One key reason for this is that your node <strong>must be able to send TCP data using both IPv4 and IPv6</strong> (as other nodes you talk to may use either protocol.</p>
<p>We currently have these <em>rough</em> specs for VPS hardware: </p>
<ul>
<li>Processors: 2 cores are fine. Get the fastest CPUs you can afford.</li>
<li>RAM: Memory requirements depend on the amount of users your Gateway will be serving at any one time. If you're just going to be using it yourself, then minimal RAM is fine. <strong>If you're running your Gateway as part of a Service Grant, get something with at least 4GB RAM.</strong> </li>
<li>Disks: much like the amount of RAM your Gateway could use, the amount of disk space required will vary with the amount of users your Gateway is serving. <strong>If you're running your Gateway as part of a Service Grant, get something with at least 40GB storage.</strong> </li>
</ul>
<h2 id="gateway-setup"><a class="header" href="#gateway-setup">Gateway setup</a></h2>
<p>Now that you have built the codebase, set up your wallet, and have a VPS with the <code>nym-gateway</code> binary, you can set up your gateway with the instructions below.</p>
<h3 id="viewing-command-help"><a class="header" href="#viewing-command-help">Viewing command help</a></h3>
<p>You can check that your binaries are properly compiled with:</p>
<pre><code>./nym-gateway --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (gateway - version {{platform_release_version}})

    
nym-gateway {{platform_release_version}}
Nymtech
Implementation of the Nym Mixnet Gateway

USAGE:
    nym-gateway [OPTIONS] &lt;SUBCOMMAND&gt;

OPTIONS:
        --config-env-file &lt;CONFIG_ENV_FILE&gt;
            Path pointing to an env file that configures the gateway

    -h, --help
            Print help information

    -V, --version
            Print version information

SUBCOMMANDS:
    completions          Generate shell completions
    generate-fig-spec    Generate Fig specification
    help                 Print this message or the help of the given subcommand(s)
    init                 Initialise the gateway
    node-details         Show details of this gateway
    run                  Starts the gateway
    sign                 Sign text to prove ownership of this mixnode
    upgrade              Try to upgrade the gateway
    
```
</code></pre>
<p>You can also check the various arguments required for individual commands with: </p>
<pre><code>./nym-gateway &lt;command&gt; --help
</code></pre>
<h3 id="initialising-your-gateway"><a class="header" href="#initialising-your-gateway">Initialising your gateway</a></h3>
<p>To check available configuration options use:</p>
<pre><code> ./nym-gateway init --help
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```

  _ __  _   _ _ __ ___
 | '_ \| | | | '_ \ _ \
 | | | | |_| | | | | | |
 |_| |_|\__, |_| |_| |_|
        |___/

         (gateway - version {{platform_release_version}})

    
nym-gateway-init 
Initialise the gateway

USAGE:
    nym-gateway init [OPTIONS] --id &lt;ID&gt; --host &lt;HOST&gt; --wallet-address &lt;WALLET_ADDRESS&gt;

OPTIONS:
        --announce-host &lt;ANNOUNCE_HOST&gt;
            The host that will be reported to the directory server

        --clients-port &lt;CLIENTS_PORT&gt;
            The port on which the gateway will be listening for clients gateway-requests

        --datastore &lt;DATASTORE&gt;
            Path to sqlite database containing all gateway persistent data

        --enabled-statistics &lt;ENABLED_STATISTICS&gt;
            Enable/disable gateway anonymized statistics that get sent to a statistics aggregator server

    -h, --help
            Print help information

        --host &lt;HOST&gt;
            The custom host on which the gateway will be running for receiving sphinx packets

        --id &lt;ID&gt;
            Id of the gateway we want to create config for

        --mix-port &lt;MIX_PORT&gt;
            The port on which the gateway will be listening for sphinx packets

        --mnemonic &lt;MNEMONIC&gt;
            Cosmos wallet mnemonic needed for double spending protection

        --statistics-service-url &lt;STATISTICS_SERVICE_URL&gt;
            URL where a statistics aggregator is running. The default value is a Nym aggregator server

        --validator-apis &lt;VALIDATOR_APIS&gt;
            Comma separated list of endpoints of the validators APIs

        --validators &lt;VALIDATORS&gt;
            Comma separated list of endpoints of the validator

        --wallet-address &lt;WALLET_ADDRESS&gt;
            The wallet address you will use to bond this gateway, e.g.
            nymt1z9egw0knv47nmur0p8vk4rcx59h9gg4zuxrrr9
```
</code></pre>
<p>The following command returns a gateway on your current IP with the <code>id</code> of <code>supergateway</code>:</p>
<pre><code>./nym-gateway init --id supergateway --host $(curl ifconfig.me) --wallet-address &lt;WALLET_ADDRESS&gt; --enabled-statistics true
</code></pre>
<p>The <code>$(curl ifconfig.me)</code> command above returns your IP automatically using an external service. Alternatively, you can enter your IP manually wish. If you do this, remember to enter your IP <strong>without</strong> any port information.</p>
<h3 id="bonding-your-gateway"><a class="header" href="#bonding-your-gateway">Bonding your gateway</a></h3>
<h4 id="via-the-desktop-wallet"><a class="header" href="#via-the-desktop-wallet">Via the Desktop wallet</a></h4>
<p>You can bond your gateway via the Desktop wallet. </p>
<ul>
<li>
<p>Open your wallet, and head to the <code>Bond</code> page, then select the node type and input your node details. Press <code>continue</code> </p>
</li>
<li>
<p>You will be asked to run a the <code>sign</code> command with your <code>gateway</code> - copy and paste the long signature as the value of <code>--contract-msg</code> and run it. It will look something like this: </p>
</li>
</ul>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">```
./nym-gateway sign --id upgrade_test --contract-msg 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a


      _ __  _   _ _ __ ___
     | '_ \| | | | '_ \ _ \
     | | | | |_| | | | | | |
     |_| |_|\__, |_| |_| |_|
            |___/

             (nym-gateway - version 1.1.13)

    
&gt;&gt;&gt; attempting to sign 2Mf8xYytgEeyJke9LA7TjhHoGQWNBEfgHZtTyy2krFJfGHSiqy7FLgTnauSkQepCZTqKN5Yfi34JQCuog9k6FGA2EjsdpNGAWHZiuUGDipyJ6UksNKRxnFKhYW7ri4MRduyZwbR98y5fQMLAwHne1Tjm9cXYCn8McfigNt77WAYwBk5bRRKmC34BJMmWcAxphcLES2v9RdSR68tkHSpy2C8STfdmAQs3tZg8bJS5Qa8pQdqx14TnfQAPLk3QYCynfUJvgcQTrg29aqCasceGRpKdQ3Tbn81MLXAGAs7JLBbiMEAhCezAr2kEN8kET1q54zXtKz6znTPgeTZoSbP8rzf4k2JKHZYWrHYF9JriXepuZTnyxAKAxvGFPBk8Z6KAQi33NRQkwd7MPyttatHna6kG9x7knffV6ebGzgRBf7NV27LurH8x4L1uUXwm1v1UYCA1WSBQ9Pp2JW69k5v5v7G9gBy8RUcZnMbeL26Qqb8WkuGcmuHhaFfoqSfV7PRHPpPT4M8uRqUyR4bjUtSJJM1yh6QSeZk9BEazzoJqPeYeGoiFDZ3LMj2jesbJweQR4caaYuRczK92UGSSqu9zBKmE45a
&gt;&gt;&gt; decoding the message...
&gt;&gt;&gt; message to sign: {&quot;nonce&quot;:0,&quot;algorithm&quot;:&quot;ed25519&quot;,&quot;message_type&quot;:&quot;gateway-bonding&quot;,&quot;content&quot;:{&quot;sender&quot;:&quot;n1ewmme88q22l8syvgshqma02jv0vqrug9zq9dy8&quot;,&quot;proxy&quot;:null,&quot;funds&quot;:[{&quot;denom&quot;:&quot;unym&quot;,&quot;amount&quot;:&quot;100000000&quot;}],&quot;data&quot;:{&quot;gateway&quot;:{&quot;host&quot;:&quot;62.240.134.189&quot;,&quot;mix_port&quot;:1789,&quot;clients_port&quot;:9000,&quot;location&quot;:&quot;62.240.134.189&quot;,&quot;sphinx_key&quot;:&quot;FKbuN7mPdoCG9jA3CkAfXxC5X4rHhqeMVtmfRtJ3cFZd&quot;,&quot;identity_key&quot;:&quot;3RoAhR8gEdfBETMjm2vbMFzKddxXDdE9ygBAnJHWqSzD&quot;,&quot;version&quot;:&quot;1.1.13&quot;}}}}
```
</code></pre>
<ul>
<li>Copy the resulting signature:</li>
</ul>
<pre><code>&gt;&gt;&gt; The base58-encoded signature is:
2SPDjLjX4b6XEtkgG7yD8Znsb1xycL1edFvRK4JcVnPsM9k6HXEUUeVS6rswRiYxoj1bMgiRKyPDwiksiuyxu8Xi
</code></pre>
<ul>
<li>And paste it into the wallet nodal, then confirm the transaction.</li>
</ul>
<p><img src="../images/wallet-sign.png" alt="Paste Signature" /></p>
<ul>
<li>Your gateway is now bonded. </li>
</ul>
<blockquote>
<p>You are asked to <code>sign</code> a transaction on bonding so that the mixnet smart contract is able to map your nym address to your node. This allows us to create a nonce for each account and defend against replay attacks.</p>
</blockquote>
<h4 id="via-the-cli-power-users"><a class="header" href="#via-the-cli-power-users">Via the CLI (power users)</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="../tools/nym-cli.html#bond-a-gateway">relevant section in the Nym CLI</a> docs.</p>
<h3 id="running-your-gateway"><a class="header" href="#running-your-gateway">Running your gateway</a></h3>
<p>The <code>run</code> command starts the gateway:</p>
<pre><code>./nym-gateway run --id supergateway
</code></pre>
<pre><code class="language-admonish example collapsible=true title=&quot;Console output&quot;">
```
Starting gateway supergateway...

To bond your gateway you will need to install the Nym wallet, go to https://nymtech.net/get-involved and select the Download button.
Select the correct version and install it to your machine. You will need to provide the following: 

Identity Key: 6jWSJZsQ888jwzi1CBfkHefiDdUEjgwfeMfJU4RNhDuk
Sphinx Key: HbqYJwjmtzDi4WzGp7ehj8Ns394sRvJnxtanX28upon
Host: 62.240.134.46 (bind address: 62.240.134.46)
Version: 1.1.
Mix Port: 1789, Clients port: 9000
Data store is at: &quot;/home/mx/.nym/gateways/supergateway/data/db.sqlite&quot;
2022-04-27T16:04:33.831Z INFO  nym_gateway::node &gt; Starting nym gateway!
2022-04-27T16:04:34.268Z INFO  nym_gateway::node &gt; Starting mix packet forwarder...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node &gt; Starting mix socket listener...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node::mixnet_handling::receiver::listener &gt; Running mix listener on &quot;62.240.134.46:1789&quot;
2022-04-27T16:04:34.269Z INFO  nym_gateway::node              
&gt; Starting client [web]socket listener...
2022-04-27T16:04:34.269Z INFO  nym_gateway::node                                      &gt; Finished nym gateway startup procedure - it should now be able to receive mix and client traffic!

```
</code></pre>
<h3 id="upgrading-your-gateway"><a class="header" href="#upgrading-your-gateway">Upgrading your gateway</a></h3>
<p>Upgrading your node is a two-step process:</p>
<ul>
<li>Updating the binary and <code>config.toml</code> on your VPS</li>
<li>Updating the node information in the <a href="../nyx/mixnet-contract.html">mixnet smart contract</a>. <strong>This is the information that is present on the <a href="https://explorer.nymtech.net">mixnet explorer</a></strong>.</li>
</ul>
<blockquote>
<p>These instructions are specifically regarding upgrading your gateway binary from one version to another. If you want to change node information such as the listening port, you can do this by clicking the <code>node settings</code> tab in the <code>bond</code> page of the wallet.</p>
</blockquote>
<h4 id="step-1-upgrading-your-binary"><a class="header" href="#step-1-upgrading-your-binary">Step 1: upgrading your binary</a></h4>
<p>Follow these steps to upgrade your binary and update its config file:</p>
<ul>
<li>pause your gateway process.</li>
<li>replace the existing binary with the newest binary (which you can either compile yourself or grab from our <a href="https://github.com/nymtech/nym/releases">releases page</a>).</li>
<li>re-run <code>init</code> with the same values as you used initially. <strong>This will just update the config file, it will not overwrite existing keys</strong>.</li>
<li>restart your gateway process with the new binary.</li>
</ul>
<blockquote>
<p>Do <strong>not</strong> use the <code>upgrade</code> command: there is a known error with the command that will be fixed in a subsequent release.</p>
</blockquote>
<h4 id="step-2-updating-your-node-information-in-the-smart-contract"><a class="header" href="#step-2-updating-your-node-information-in-the-smart-contract">Step 2: updating your node information in the smart contract</a></h4>
<p>Follow these steps to update the information about your node which is publically avaliable from the <a href="https://validator.nymtech.net/api/swagger/index.html">Nym API</a> and information displayed on the <a href="https://explorer.nymtech.net">mixnet explorer</a>.</p>
<p>You can either do this graphically via the Desktop Wallet, or the CLI.</p>
<h4 id="updating-node-information-via-the-desktop-wallet"><a class="header" href="#updating-node-information-via-the-desktop-wallet">Updating node information via the Desktop Wallet</a></h4>
<ul>
<li>
<p>Navigate to the <code>Bonding</code> page and click the <code>Node Settings</code> link in the top right corner:
<img src="../images/wallet-screenshots/bonding.png" alt="Bonding page" /></p>
</li>
<li>
<p>Update the fields in the <code>Node Settings</code> page and click <code>Submit changes to the blockchain</code>.
<img src="../images/wallet-screenshots/node_settings.png" alt="Node Settings Page" /></p>
</li>
</ul>
<h4 id="updating-node-information-via-the-cli"><a class="header" href="#updating-node-information-via-the-cli">Updating node information via the CLI</a></h4>
<p>If you want to bond your mix node via the CLI, then check out the <a href="../tools/nym-cli.html#upgrade-a-mix-node">relevant section in the Nym CLI</a> docs.</p>
<h2 id="vps-setup-and-automation"><a class="header" href="#vps-setup-and-automation">VPS Setup and Automation</a></h2>
<h3 id="configure-your-firewall"><a class="header" href="#configure-your-firewall">Configure your firewall</a></h3>
<p>Although your gateway is now ready to receive traffic, your server may not be - the following commands will allow you to set up a properly configured firewall using <code>ufw</code>:</p>
<pre><code># check if you have ufw installed
ufw version
# if it is not installed, install with
sudo apt install ufw -y
# enable ufw
sudo ufw enable
# check the status of the firewall
sudo ufw status
</code></pre>
<p>Finally open your gateway's p2p port, as well as ports for ssh and incoming traffic connections:</p>
<pre><code>sudo ufw allow 1789,22,9000/tcp
# check the status of the firewall
sudo ufw status
</code></pre>
<p>For more information about your gateway's port configuration, check the <a href="#gateway-port-reference">gateway port reference table</a> below.</p>
<h3 id="automating-your-gateway-with-systemd"><a class="header" href="#automating-your-gateway-with-systemd">Automating your gateway with systemd</a></h3>
<p>Although it's not totally necessary, it's useful to have the gateway automatically start at system boot time. Here's a systemd service file to do that:</p>
<pre><code class="language-ini">[Unit]
Description=Nym Gateway ({{platform_release_version}})
StartLimitInterval=350
StartLimitBurst=10

[Service]
User=nym
LimitNOFILE=65536
ExecStart=/home/nym/nym-gateway run --id supergateway
KillSignal=SIGINT
Restart=on-failure
RestartSec=30

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Put the above file onto your system at <code>/etc/systemd/system/nym-gateway.service</code>.</p>
<p>Change the path in <code>ExecStart</code> to point at your gateway binary (<code>nym-gateway</code>), and the <code>User</code> so it is the user you are running as.</p>
<p>If you have built nym on your server, and your username is <code>jetpanther</code>, then the start command might look like this:</p>
<p><code>ExecStart=/home/jetpanther/nym/target/release/nym-gateway run --id your-id</code>. Basically, you want the full <code>/path/to/nym-gateway run --id whatever-your-node-id-is</code></p>
<p>Then run:</p>
<pre><code>systemctl enable nym-gateway.service
</code></pre>
<p>Start your node:</p>
<pre><code>service nym-gateway start
</code></pre>
<p>This will cause your node to start at system boot time. If you restart your machine, the node will come back up automatically.</p>
<p>You can also do <code>service nym-gateway stop</code> or <code>service nym-gateway restart</code>.</p>
<p>Note: if you make any changes to your systemd script after you've enabled it, you will need to run:</p>
<pre><code>systemctl daemon-reload
</code></pre>
<p>This lets your operating system know it's ok to reload the service configuration.</p>
<h2 id="gateway-related-validator-api-endpoints"><a class="header" href="#gateway-related-validator-api-endpoints">Gateway related Validator API endpoints</a></h2>
<p>Numerous gateway related API endpoints are documented on the Validator API's <a href="https://validator.nymtech.net/api/swagger/index.html">Swagger Documentation</a>. There you can also try out various requests from your broswer, and download the response from the API. Swagger will also show you what commands it is running, so that you can run these from an app or from your CLI if you prefer. </p>
<h2 id="ports"><a class="header" href="#ports">Ports</a></h2>
<p>All gateway specific port configuration can be found in <code>$HOME/.nym/gateways/&lt;your-id&gt;/config/config.toml</code>. If you do edit any port configs, remember to restart your gateway.</p>
<h3 id="gateway-port-reference"><a class="header" href="#gateway-port-reference">Gateway port reference</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Default port</th><th>Use</th></tr></thead><tbody>
<tr><td>1789</td><td>Listen for Mixnet traffic</td></tr>
<tr><td>9000</td><td>Listen for Client traffic</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../nodes/mix-node-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../nodes/network-requester-setup.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../nodes/mix-node-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../nodes/network-requester-setup.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
